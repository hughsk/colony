<h1>d3.v2.js</h1>
<pre><code class="lang-js">(<span class="keyword">function</span>() {
  <span class="function"><span class="keyword">function</span> <span class="title">d3_class</span><span class="params">(ctor, properties)</span> {</span>
    <span class="keyword">try</span> {
      <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> properties) {
        Object.defineProperty(ctor.prototype, key, {
          value: properties[key],
          enumerable: <span class="literal">false</span>
        });
      }
    } <span class="keyword">catch</span> (e) {
      ctor.prototype = properties;
    }
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_arrayCopy</span><span class="params">(pseudoarray)</span> {</span>
    <span class="keyword">var</span> i = -<span class="number">1</span>, n = pseudoarray.length, array = [];
    <span class="keyword">while</span> (++i &lt; n) array.push(pseudoarray[i]);
    <span class="keyword">return</span> array;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_arraySlice</span><span class="params">(pseudoarray)</span> {</span>
    <span class="keyword">return</span> Array.prototype.slice.call(pseudoarray);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_Map</span><span class="params">()</span> {</span>}
  <span class="function"><span class="keyword">function</span> <span class="title">d3_identity</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_this</span><span class="params">()</span> {</span>
    <span class="keyword">return</span> <span class="keyword">this</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_true</span><span class="params">()</span> {</span>
    <span class="keyword">return</span> <span class="literal">true</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_functor</span><span class="params">(v)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">typeof</span> v === <span class="string">"function"</span> ? v : <span class="keyword">function</span>() {
      <span class="keyword">return</span> v;
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_rebind</span><span class="params">(target, source, method)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">function</span>() {
      <span class="keyword">var</span> value = method.apply(source, arguments);
      <span class="keyword">return</span> arguments.length ? target : value;
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_number</span><span class="params">(x)</span> {</span>
    <span class="keyword">return</span> x != <span class="literal">null</span> &amp;&amp; !isNaN(x);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_zipLength</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d.length;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_splitter</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d == <span class="literal">null</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_collapse</span><span class="params">(s)</span> {</span>
    <span class="keyword">return</span> s.trim().replace(<span class="regexp">/\s+/g</span>, <span class="string">" "</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_range_integerScale</span><span class="params">(x)</span> {</span>
    <span class="keyword">var</span> k = <span class="number">1</span>;
    <span class="keyword">while</span> (x * k % <span class="number">1</span>) k *= <span class="number">10</span>;
    <span class="keyword">return</span> k;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_dispatch</span><span class="params">()</span> {</span>}
  <span class="function"><span class="keyword">function</span> <span class="title">d3_dispatch_event</span><span class="params">(dispatch)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">event</span><span class="params">()</span> {</span>
      <span class="keyword">var</span> z = listeners, i = -<span class="number">1</span>, n = z.length, l;
      <span class="keyword">while</span> (++i &lt; n) <span class="keyword">if</span> (l = z[i].on) l.apply(<span class="keyword">this</span>, arguments);
      <span class="keyword">return</span> dispatch;
    }
    <span class="keyword">var</span> listeners = [], listenerByName = <span class="keyword">new</span> d3_Map;
    event.on = <span class="keyword">function</span>(name, listener) {
      <span class="keyword">var</span> l = listenerByName.get(name), i;
      <span class="keyword">if</span> (arguments.length &lt; <span class="number">2</span>) <span class="keyword">return</span> l &amp;&amp; l.on;
      <span class="keyword">if</span> (l) {
        l.on = <span class="literal">null</span>;
        listeners = listeners.slice(<span class="number">0</span>, i = listeners.indexOf(l)).concat(listeners.slice(i + <span class="number">1</span>));
        listenerByName.remove(name);
      }
      <span class="keyword">if</span> (listener) listeners.push(listenerByName.set(name, {
        on: listener
      }));
      <span class="keyword">return</span> dispatch;
    };
    <span class="keyword">return</span> event;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_format_precision</span><span class="params">(x, p)</span> {</span>
    <span class="keyword">return</span> p - (x ? <span class="number">1</span> + Math.floor(Math.log(x + Math.pow(<span class="number">10</span>, <span class="number">1</span> + Math.floor(Math.log(x) / Math.LN10) - p)) / Math.LN10) : <span class="number">1</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_format_typeDefault</span><span class="params">(x)</span> {</span>
    <span class="keyword">return</span> x + <span class="string">""</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_format_group</span><span class="params">(value)</span> {</span>
    <span class="keyword">var</span> i = value.lastIndexOf(<span class="string">"."</span>), f = i >= <span class="number">0</span> ? value.substring(i) : (i = value.length, <span class="string">""</span>), t = [];
    <span class="keyword">while</span> (i > <span class="number">0</span>) t.push(value.substring(i -= <span class="number">3</span>, i + <span class="number">3</span>));
    <span class="keyword">return</span> t.reverse().join(<span class="string">","</span>) + f;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_formatPrefix</span><span class="params">(d, i)</span> {</span>
    <span class="keyword">var</span> k = Math.pow(<span class="number">10</span>, Math.abs(<span class="number">8</span> - i) * <span class="number">3</span>);
    <span class="keyword">return</span> {
      scale: i > <span class="number">8</span> ? <span class="keyword">function</span>(d) {
        <span class="keyword">return</span> d / k;
      } : <span class="keyword">function</span>(d) {
        <span class="keyword">return</span> d * k;
      },
      symbol: d
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_ease_clamp</span><span class="params">(f)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">function</span>(t) {
      <span class="keyword">return</span> t &lt;= <span class="number">0</span> ? <span class="number">0</span> : t >= <span class="number">1</span> ? <span class="number">1</span> : f(t);
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_ease_reverse</span><span class="params">(f)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">function</span>(t) {
      <span class="keyword">return</span> <span class="number">1</span> - f(<span class="number">1</span> - t);
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_ease_reflect</span><span class="params">(f)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">function</span>(t) {
      <span class="keyword">return</span> <span class="number">.5</span> * (t &lt; <span class="number">.5</span> ? f(<span class="number">2</span> * t) : <span class="number">2</span> - f(<span class="number">2</span> - <span class="number">2</span> * t));
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_ease_identity</span><span class="params">(t)</span> {</span>
    <span class="keyword">return</span> t;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_ease_poly</span><span class="params">(e)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">function</span>(t) {
      <span class="keyword">return</span> Math.pow(t, e);
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_ease_sin</span><span class="params">(t)</span> {</span>
    <span class="keyword">return</span> <span class="number">1</span> - Math.cos(t * Math.PI / <span class="number">2</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_ease_exp</span><span class="params">(t)</span> {</span>
    <span class="keyword">return</span> Math.pow(<span class="number">2</span>, <span class="number">10</span> * (t - <span class="number">1</span>));
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_ease_circle</span><span class="params">(t)</span> {</span>
    <span class="keyword">return</span> <span class="number">1</span> - Math.sqrt(<span class="number">1</span> - t * t);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_ease_elastic</span><span class="params">(a, p)</span> {</span>
    <span class="keyword">var</span> s;
    <span class="keyword">if</span> (arguments.length &lt; <span class="number">2</span>) p = <span class="number">.45</span>;
    <span class="keyword">if</span> (arguments.length &lt; <span class="number">1</span>) {
      a = <span class="number">1</span>;
      s = p / <span class="number">4</span>;
    } <span class="keyword">else</span> s = p / (<span class="number">2</span> * Math.PI) * Math.asin(<span class="number">1</span> / a);
    <span class="keyword">return</span> <span class="keyword">function</span>(t) {
      <span class="keyword">return</span> <span class="number">1</span> + a * Math.pow(<span class="number">2</span>, <span class="number">10</span> * -t) * Math.sin((t - s) * <span class="number">2</span> * Math.PI / p);
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_ease_back</span><span class="params">(s)</span> {</span>
    <span class="keyword">if</span> (!s) s = <span class="number">1.70158</span>;
    <span class="keyword">return</span> <span class="keyword">function</span>(t) {
      <span class="keyword">return</span> t * t * ((s + <span class="number">1</span>) * t - s);
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_ease_bounce</span><span class="params">(t)</span> {</span>
    <span class="keyword">return</span> t &lt; <span class="number">1</span> / <span class="number">2.75</span> ? <span class="number">7.5625</span> * t * t : t &lt; <span class="number">2</span> / <span class="number">2.75</span> ? <span class="number">7.5625</span> * (t -= <span class="number">1.5</span> / <span class="number">2.75</span>) * t + <span class="number">.75</span> : t &lt; <span class="number">2.5</span> / <span class="number">2.75</span> ? <span class="number">7.5625</span> * (t -= <span class="number">2.25</span> / <span class="number">2.75</span>) * t + <span class="number">.9375</span> : <span class="number">7.5625</span> * (t -= <span class="number">2.625</span> / <span class="number">2.75</span>) * t + <span class="number">.984375</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_eventCancel</span><span class="params">()</span> {</span>
    d3.event.stopPropagation();
    d3.event.preventDefault();
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_eventSource</span><span class="params">()</span> {</span>
    <span class="keyword">var</span> e = d3.event, s;
    <span class="keyword">while</span> (s = e.sourceEvent) e = s;
    <span class="keyword">return</span> e;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_eventDispatch</span><span class="params">(target)</span> {</span>
    <span class="keyword">var</span> dispatch = <span class="keyword">new</span> d3_dispatch, i = <span class="number">0</span>, n = arguments.length;
    <span class="keyword">while</span> (++i &lt; n) dispatch[arguments[i]] = d3_dispatch_event(dispatch);
    dispatch.of = <span class="keyword">function</span>(thiz, argumentz) {
      <span class="keyword">return</span> <span class="keyword">function</span>(e1) {
        <span class="keyword">try</span> {
          <span class="keyword">var</span> e0 = e1.sourceEvent = d3.event;
          e1.target = target;
          d3.event = e1;
          dispatch[e1.type].apply(thiz, argumentz);
        } <span class="keyword">finally</span> {
          d3.event = e0;
        }
      };
    };
    <span class="keyword">return</span> dispatch;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_transform</span><span class="params">(m)</span> {</span>
    <span class="keyword">var</span> r0 = [ m.a, m.b ], r1 = [ m.c, m.d ], kx = d3_transformNormalize(r0), kz = d3_transformDot(r0, r1), ky = d3_transformNormalize(d3_transformCombine(r1, r0, -kz)) || <span class="number">0</span>;
    <span class="keyword">if</span> (r0[<span class="number">0</span>] * r1[<span class="number">1</span>] &lt; r1[<span class="number">0</span>] * r0[<span class="number">1</span>]) {
      r0[<span class="number">0</span>] *= -<span class="number">1</span>;
      r0[<span class="number">1</span>] *= -<span class="number">1</span>;
      kx *= -<span class="number">1</span>;
      kz *= -<span class="number">1</span>;
    }
    <span class="keyword">this</span>.rotate = (kx ? Math.atan2(r0[<span class="number">1</span>], r0[<span class="number">0</span>]) : Math.atan2(-r1[<span class="number">0</span>], r1[<span class="number">1</span>])) * d3_transformDegrees;
    <span class="keyword">this</span>.translate = [ m.e, m.f ];
    <span class="keyword">this</span>.scale = [ kx, ky ];
    <span class="keyword">this</span>.skew = ky ? Math.atan2(kz, ky) * d3_transformDegrees : <span class="number">0</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_transformDot</span><span class="params">(a, b)</span> {</span>
    <span class="keyword">return</span> a[<span class="number">0</span>] * b[<span class="number">0</span>] + a[<span class="number">1</span>] * b[<span class="number">1</span>];
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_transformNormalize</span><span class="params">(a)</span> {</span>
    <span class="keyword">var</span> k = Math.sqrt(d3_transformDot(a, a));
    <span class="keyword">if</span> (k) {
      a[<span class="number">0</span>] /= k;
      a[<span class="number">1</span>] /= k;
    }
    <span class="keyword">return</span> k;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_transformCombine</span><span class="params">(a, b, k)</span> {</span>
    a[<span class="number">0</span>] += k * b[<span class="number">0</span>];
    a[<span class="number">1</span>] += k * b[<span class="number">1</span>];
    <span class="keyword">return</span> a;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_interpolateByName</span><span class="params">(name)</span> {</span>
    <span class="keyword">return</span> name == <span class="string">"transform"</span> ? d3.interpolateTransform : d3.interpolate;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_uninterpolateNumber</span><span class="params">(a, b)</span> {</span>
    b = b - (a = +a) ? <span class="number">1</span> / (b - a) : <span class="number">0</span>;
    <span class="keyword">return</span> <span class="keyword">function</span>(x) {
      <span class="keyword">return</span> (x - a) * b;
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_uninterpolateClamp</span><span class="params">(a, b)</span> {</span>
    b = b - (a = +a) ? <span class="number">1</span> / (b - a) : <span class="number">0</span>;
    <span class="keyword">return</span> <span class="keyword">function</span>(x) {
      <span class="keyword">return</span> Math.max(<span class="number">0</span>, Math.min(<span class="number">1</span>, (x - a) * b));
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_Color</span><span class="params">()</span> {</span>}
  <span class="function"><span class="keyword">function</span> <span class="title">d3_rgb</span><span class="params">(r, g, b)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">new</span> d3_Rgb(r, g, b);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_Rgb</span><span class="params">(r, g, b)</span> {</span>
    <span class="keyword">this</span>.r = r;
    <span class="keyword">this</span>.g = g;
    <span class="keyword">this</span>.b = b;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_rgb_hex</span><span class="params">(v)</span> {</span>
    <span class="keyword">return</span> v &lt; <span class="number">16</span> ? <span class="string">"0"</span> + Math.max(<span class="number">0</span>, v).toString(<span class="number">16</span>) : Math.min(<span class="number">255</span>, v).toString(<span class="number">16</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_rgb_parse</span><span class="params">(format, rgb, hsl)</span> {</span>
    <span class="keyword">var</span> r = <span class="number">0</span>, g = <span class="number">0</span>, b = <span class="number">0</span>, m1, m2, name;
    m1 = <span class="regexp">/([a-z]+)\((.*)\)/i</span>.exec(format);
    <span class="keyword">if</span> (m1) {
      m2 = m1[<span class="number">2</span>].split(<span class="string">","</span>);
      <span class="keyword">switch</span> (m1[<span class="number">1</span>]) {
       <span class="keyword">case</span> <span class="string">"hsl"</span>:
        {
          <span class="keyword">return</span> hsl(parseFloat(m2[<span class="number">0</span>]), parseFloat(m2[<span class="number">1</span>]) / <span class="number">100</span>, parseFloat(m2[<span class="number">2</span>]) / <span class="number">100</span>);
        }
       <span class="keyword">case</span> <span class="string">"rgb"</span>:
        {
          <span class="keyword">return</span> rgb(d3_rgb_parseNumber(m2[<span class="number">0</span>]), d3_rgb_parseNumber(m2[<span class="number">1</span>]), d3_rgb_parseNumber(m2[<span class="number">2</span>]));
        }
      }
    }
    <span class="keyword">if</span> (name = d3_rgb_names.get(format)) <span class="keyword">return</span> rgb(name.r, name.g, name.b);
    <span class="keyword">if</span> (format != <span class="literal">null</span> &amp;&amp; format.charAt(<span class="number">0</span>) === <span class="string">"#"</span>) {
      <span class="keyword">if</span> (format.length === <span class="number">4</span>) {
        r = format.charAt(<span class="number">1</span>);
        r += r;
        g = format.charAt(<span class="number">2</span>);
        g += g;
        b = format.charAt(<span class="number">3</span>);
        b += b;
      } <span class="keyword">else</span> <span class="keyword">if</span> (format.length === <span class="number">7</span>) {
        r = format.substring(<span class="number">1</span>, <span class="number">3</span>);
        g = format.substring(<span class="number">3</span>, <span class="number">5</span>);
        b = format.substring(<span class="number">5</span>, <span class="number">7</span>);
      }
      r = parseInt(r, <span class="number">16</span>);
      g = parseInt(g, <span class="number">16</span>);
      b = parseInt(b, <span class="number">16</span>);
    }
    <span class="keyword">return</span> rgb(r, g, b);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_rgb_hsl</span><span class="params">(r, g, b)</span> {</span>
    <span class="keyword">var</span> min = Math.min(r /= <span class="number">255</span>, g /= <span class="number">255</span>, b /= <span class="number">255</span>), max = Math.max(r, g, b), d = max - min, h, s, l = (max + min) / <span class="number">2</span>;
    <span class="keyword">if</span> (d) {
      s = l &lt; <span class="number">.5</span> ? d / (max + min) : d / (<span class="number">2</span> - max - min);
      <span class="keyword">if</span> (r == max) h = (g - b) / d + (g &lt; b ? <span class="number">6</span> : <span class="number">0</span>); <span class="keyword">else</span> <span class="keyword">if</span> (g == max) h = (b - r) / d + <span class="number">2</span>; <span class="keyword">else</span> h = (r - g) / d + <span class="number">4</span>;
      h *= <span class="number">60</span>;
    } <span class="keyword">else</span> {
      s = h = <span class="number">0</span>;
    }
    <span class="keyword">return</span> d3_hsl(h, s, l);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_rgb_lab</span><span class="params">(r, g, b)</span> {</span>
    r = d3_rgb_xyz(r);
    g = d3_rgb_xyz(g);
    b = d3_rgb_xyz(b);
    <span class="keyword">var</span> x = d3_xyz_lab((<span class="number">.4124564</span> * r + <span class="number">.3575761</span> * g + <span class="number">.1804375</span> * b) / d3_lab_X), y = d3_xyz_lab((<span class="number">.2126729</span> * r + <span class="number">.7151522</span> * g + <span class="number">.072175</span> * b) / d3_lab_Y), z = d3_xyz_lab((<span class="number">.0193339</span> * r + <span class="number">.119192</span> * g + <span class="number">.9503041</span> * b) / d3_lab_Z);
    <span class="keyword">return</span> d3_lab(<span class="number">116</span> * y - <span class="number">16</span>, <span class="number">500</span> * (x - y), <span class="number">200</span> * (y - z));
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_rgb_xyz</span><span class="params">(r)</span> {</span>
    <span class="keyword">return</span> (r /= <span class="number">255</span>) &lt;= <span class="number">.04045</span> ? r / <span class="number">12.92</span> : Math.pow((r + <span class="number">.055</span>) / <span class="number">1.055</span>, <span class="number">2.4</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_rgb_parseNumber</span><span class="params">(c)</span> {</span>
    <span class="keyword">var</span> f = parseFloat(c);
    <span class="keyword">return</span> c.charAt(c.length - <span class="number">1</span>) === <span class="string">"%"</span> ? Math.round(f * <span class="number">2.55</span>) : f;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_hsl</span><span class="params">(h, s, l)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">new</span> d3_Hsl(h, s, l);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_Hsl</span><span class="params">(h, s, l)</span> {</span>
    <span class="keyword">this</span>.h = h;
    <span class="keyword">this</span>.s = s;
    <span class="keyword">this</span>.l = l;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_hsl_rgb</span><span class="params">(h, s, l)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">v</span><span class="params">(h)</span> {</span>
      <span class="keyword">if</span> (h > <span class="number">360</span>) h -= <span class="number">360</span>; <span class="keyword">else</span> <span class="keyword">if</span> (h &lt; <span class="number">0</span>) h += <span class="number">360</span>;
      <span class="keyword">if</span> (h &lt; <span class="number">60</span>) <span class="keyword">return</span> m1 + (m2 - m1) * h / <span class="number">60</span>;
      <span class="keyword">if</span> (h &lt; <span class="number">180</span>) <span class="keyword">return</span> m2;
      <span class="keyword">if</span> (h &lt; <span class="number">240</span>) <span class="keyword">return</span> m1 + (m2 - m1) * (<span class="number">240</span> - h) / <span class="number">60</span>;
      <span class="keyword">return</span> m1;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">vv</span><span class="params">(h)</span> {</span>
      <span class="keyword">return</span> Math.round(v(h) * <span class="number">255</span>);
    }
    <span class="keyword">var</span> m1, m2;
    h = h % <span class="number">360</span>;
    <span class="keyword">if</span> (h &lt; <span class="number">0</span>) h += <span class="number">360</span>;
    s = s &lt; <span class="number">0</span> ? <span class="number">0</span> : s > <span class="number">1</span> ? <span class="number">1</span> : s;
    l = l &lt; <span class="number">0</span> ? <span class="number">0</span> : l > <span class="number">1</span> ? <span class="number">1</span> : l;
    m2 = l &lt;= <span class="number">.5</span> ? l * (<span class="number">1</span> + s) : l + s - l * s;
    m1 = <span class="number">2</span> * l - m2;
    <span class="keyword">return</span> d3_rgb(vv(h + <span class="number">120</span>), vv(h), vv(h - <span class="number">120</span>));
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_hcl</span><span class="params">(h, c, l)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">new</span> d3_Hcl(h, c, l);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_Hcl</span><span class="params">(h, c, l)</span> {</span>
    <span class="keyword">this</span>.h = h;
    <span class="keyword">this</span>.c = c;
    <span class="keyword">this</span>.l = l;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_hcl_lab</span><span class="params">(h, c, l)</span> {</span>
    <span class="keyword">return</span> d3_lab(l, Math.cos(h *= Math.PI / <span class="number">180</span>) * c, Math.sin(h) * c);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_lab</span><span class="params">(l, a, b)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">new</span> d3_Lab(l, a, b);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_Lab</span><span class="params">(l, a, b)</span> {</span>
    <span class="keyword">this</span>.l = l;
    <span class="keyword">this</span>.a = a;
    <span class="keyword">this</span>.b = b;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_lab_rgb</span><span class="params">(l, a, b)</span> {</span>
    <span class="keyword">var</span> y = (l + <span class="number">16</span>) / <span class="number">116</span>, x = y + a / <span class="number">500</span>, z = y - b / <span class="number">200</span>;
    x = d3_lab_xyz(x) * d3_lab_X;
    y = d3_lab_xyz(y) * d3_lab_Y;
    z = d3_lab_xyz(z) * d3_lab_Z;
    <span class="keyword">return</span> d3_rgb(d3_xyz_rgb(<span class="number">3.2404542</span> * x - <span class="number">1.5371385</span> * y - <span class="number">.4985314</span> * z), d3_xyz_rgb(-<span class="number">.969266</span> * x + <span class="number">1.8760108</span> * y + <span class="number">.041556</span> * z), d3_xyz_rgb(<span class="number">.0556434</span> * x - <span class="number">.2040259</span> * y + <span class="number">1.0572252</span> * z));
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_lab_hcl</span><span class="params">(l, a, b)</span> {</span>
    <span class="keyword">return</span> d3_hcl(Math.atan2(b, a) / Math.PI * <span class="number">180</span>, Math.sqrt(a * a + b * b), l);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_lab_xyz</span><span class="params">(x)</span> {</span>
    <span class="keyword">return</span> x > <span class="number">.206893034</span> ? x * x * x : (x - <span class="number">4</span> / <span class="number">29</span>) / <span class="number">7.787037</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_xyz_lab</span><span class="params">(x)</span> {</span>
    <span class="keyword">return</span> x > <span class="number">.008856</span> ? Math.pow(x, <span class="number">1</span> / <span class="number">3</span>) : <span class="number">7.787037</span> * x + <span class="number">4</span> / <span class="number">29</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_xyz_rgb</span><span class="params">(r)</span> {</span>
    <span class="keyword">return</span> Math.round(<span class="number">255</span> * (r &lt;= <span class="number">.00304</span> ? <span class="number">12.92</span> * r : <span class="number">1.055</span> * Math.pow(r, <span class="number">1</span> / <span class="number">2.4</span>) - <span class="number">.055</span>));
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_selection</span><span class="params">(groups)</span> {</span>
    d3_arraySubclass(groups, d3_selectionPrototype);
    <span class="keyword">return</span> groups;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_selection_selector</span><span class="params">(selector)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">function</span>() {
      <span class="keyword">return</span> d3_select(selector, <span class="keyword">this</span>);
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_selection_selectorAll</span><span class="params">(selector)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">function</span>() {
      <span class="keyword">return</span> d3_selectAll(selector, <span class="keyword">this</span>);
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_selection_attr</span><span class="params">(name, value)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">attrNull</span><span class="params">()</span> {</span>
      <span class="keyword">this</span>.removeAttribute(name);
    }
    <span class="function"><span class="keyword">function</span> <span class="title">attrNullNS</span><span class="params">()</span> {</span>
      <span class="keyword">this</span>.removeAttributeNS(name.space, name.local);
    }
    <span class="function"><span class="keyword">function</span> <span class="title">attrConstant</span><span class="params">()</span> {</span>
      <span class="keyword">this</span>.setAttribute(name, value);
    }
    <span class="function"><span class="keyword">function</span> <span class="title">attrConstantNS</span><span class="params">()</span> {</span>
      <span class="keyword">this</span>.setAttributeNS(name.space, name.local, value);
    }
    <span class="function"><span class="keyword">function</span> <span class="title">attrFunction</span><span class="params">()</span> {</span>
      <span class="keyword">var</span> x = value.apply(<span class="keyword">this</span>, arguments);
      <span class="keyword">if</span> (x == <span class="literal">null</span>) <span class="keyword">this</span>.removeAttribute(name); <span class="keyword">else</span> <span class="keyword">this</span>.setAttribute(name, x);
    }
    <span class="function"><span class="keyword">function</span> <span class="title">attrFunctionNS</span><span class="params">()</span> {</span>
      <span class="keyword">var</span> x = value.apply(<span class="keyword">this</span>, arguments);
      <span class="keyword">if</span> (x == <span class="literal">null</span>) <span class="keyword">this</span>.removeAttributeNS(name.space, name.local); <span class="keyword">else</span> <span class="keyword">this</span>.setAttributeNS(name.space, name.local, x);
    }
    name = d3.ns.qualify(name);
    <span class="keyword">return</span> value == <span class="literal">null</span> ? name.local ? attrNullNS : attrNull : <span class="keyword">typeof</span> value === <span class="string">"function"</span> ? name.local ? attrFunctionNS : attrFunction : name.local ? attrConstantNS : attrConstant;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_selection_classedRe</span><span class="params">(name)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">new</span> RegExp(<span class="string">"(?:^|\\s+)"</span> + d3.requote(name) + <span class="string">"(?:\\s+|$)"</span>, <span class="string">"g"</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_selection_classed</span><span class="params">(name, value)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">classedConstant</span><span class="params">()</span> {</span>
      <span class="keyword">var</span> i = -<span class="number">1</span>;
      <span class="keyword">while</span> (++i &lt; n) name[i](<span class="keyword">this</span>, value);
    }
    <span class="function"><span class="keyword">function</span> <span class="title">classedFunction</span><span class="params">()</span> {</span>
      <span class="keyword">var</span> i = -<span class="number">1</span>, x = value.apply(<span class="keyword">this</span>, arguments);
      <span class="keyword">while</span> (++i &lt; n) name[i](<span class="keyword">this</span>, x);
    }
    name = name.trim().split(<span class="regexp">/\s+/</span>).map(d3_selection_classedName);
    <span class="keyword">var</span> n = name.length;
    <span class="keyword">return</span> <span class="keyword">typeof</span> value === <span class="string">"function"</span> ? classedFunction : classedConstant;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_selection_classedName</span><span class="params">(name)</span> {</span>
    <span class="keyword">var</span> re = d3_selection_classedRe(name);
    <span class="keyword">return</span> <span class="keyword">function</span>(node, value) {
      <span class="keyword">if</span> (c = node.classList) <span class="keyword">return</span> value ? c.add(name) : c.remove(name);
      <span class="keyword">var</span> c = node.className, cb = c.baseVal != <span class="literal">null</span>, cv = cb ? c.baseVal : c;
      <span class="keyword">if</span> (value) {
        re.lastIndex = <span class="number">0</span>;
        <span class="keyword">if</span> (!re.test(cv)) {
          cv = d3_collapse(cv + <span class="string">" "</span> + name);
          <span class="keyword">if</span> (cb) c.baseVal = cv; <span class="keyword">else</span> node.className = cv;
        }
      } <span class="keyword">else</span> <span class="keyword">if</span> (cv) {
        cv = d3_collapse(cv.replace(re, <span class="string">" "</span>));
        <span class="keyword">if</span> (cb) c.baseVal = cv; <span class="keyword">else</span> node.className = cv;
      }
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_selection_style</span><span class="params">(name, value, priority)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">styleNull</span><span class="params">()</span> {</span>
      <span class="keyword">this</span>.style.removeProperty(name);
    }
    <span class="function"><span class="keyword">function</span> <span class="title">styleConstant</span><span class="params">()</span> {</span>
      <span class="keyword">this</span>.style.setProperty(name, value, priority);
    }
    <span class="function"><span class="keyword">function</span> <span class="title">styleFunction</span><span class="params">()</span> {</span>
      <span class="keyword">var</span> x = value.apply(<span class="keyword">this</span>, arguments);
      <span class="keyword">if</span> (x == <span class="literal">null</span>) <span class="keyword">this</span>.style.removeProperty(name); <span class="keyword">else</span> <span class="keyword">this</span>.style.setProperty(name, x, priority);
    }
    <span class="keyword">return</span> value == <span class="literal">null</span> ? styleNull : <span class="keyword">typeof</span> value === <span class="string">"function"</span> ? styleFunction : styleConstant;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_selection_property</span><span class="params">(name, value)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">propertyNull</span><span class="params">()</span> {</span>
      <span class="keyword">delete</span> <span class="keyword">this</span>[name];
    }
    <span class="function"><span class="keyword">function</span> <span class="title">propertyConstant</span><span class="params">()</span> {</span>
      <span class="keyword">this</span>[name] = value;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">propertyFunction</span><span class="params">()</span> {</span>
      <span class="keyword">var</span> x = value.apply(<span class="keyword">this</span>, arguments);
      <span class="keyword">if</span> (x == <span class="literal">null</span>) <span class="keyword">delete</span> <span class="keyword">this</span>[name]; <span class="keyword">else</span> <span class="keyword">this</span>[name] = x;
    }
    <span class="keyword">return</span> value == <span class="literal">null</span> ? propertyNull : <span class="keyword">typeof</span> value === <span class="string">"function"</span> ? propertyFunction : propertyConstant;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_selection_dataNode</span><span class="params">(data)</span> {</span>
    <span class="keyword">return</span> {
      __data__: data
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_selection_filter</span><span class="params">(selector)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">function</span>() {
      <span class="keyword">return</span> d3_selectMatches(<span class="keyword">this</span>, selector);
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_selection_sortComparator</span><span class="params">(comparator)</span> {</span>
    <span class="keyword">if</span> (!arguments.length) comparator = d3.ascending;
    <span class="keyword">return</span> <span class="keyword">function</span>(a, b) {
      <span class="keyword">return</span> comparator(a &amp;&amp; a.__data__, b &amp;&amp; b.__data__);
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_selection_on</span><span class="params">(type, listener, capture)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">onRemove</span><span class="params">()</span> {</span>
      <span class="keyword">var</span> wrapper = <span class="keyword">this</span>[name];
      <span class="keyword">if</span> (wrapper) {
        <span class="keyword">this</span>.removeEventListener(type, wrapper, wrapper.$);
        <span class="keyword">delete</span> <span class="keyword">this</span>[name];
      }
    }
    <span class="function"><span class="keyword">function</span> <span class="title">onAdd</span><span class="params">()</span> {</span>
      <span class="function"><span class="keyword">function</span> <span class="title">wrapper</span><span class="params">(e)</span> {</span>
        <span class="keyword">var</span> o = d3.event;
        d3.event = e;
        args[<span class="number">0</span>] = node.__data__;
        <span class="keyword">try</span> {
          listener.apply(node, args);
        } <span class="keyword">finally</span> {
          d3.event = o;
        }
      }
      <span class="keyword">var</span> node = <span class="keyword">this</span>, args = arguments;
      onRemove.call(<span class="keyword">this</span>);
      <span class="keyword">this</span>.addEventListener(type, <span class="keyword">this</span>[name] = wrapper, wrapper.$ = capture);
      wrapper._ = listener;
    }
    <span class="keyword">var</span> name = <span class="string">"__on"</span> + type, i = type.indexOf(<span class="string">"."</span>);
    <span class="keyword">if</span> (i > <span class="number">0</span>) type = type.substring(<span class="number">0</span>, i);
    <span class="keyword">return</span> listener ? onAdd : onRemove;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_selection_each</span><span class="params">(groups, callback)</span> {</span>
    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>, m = groups.length; j &lt; m; j++) {
      <span class="keyword">for</span> (<span class="keyword">var</span> group = groups[j], i = <span class="number">0</span>, n = group.length, node; i &lt; n; i++) {
        <span class="keyword">if</span> (node = group[i]) callback(node, i, j);
      }
    }
    <span class="keyword">return</span> groups;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_selection_enter</span><span class="params">(selection)</span> {</span>
    d3_arraySubclass(selection, d3_selection_enterPrototype);
    <span class="keyword">return</span> selection;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_transition</span><span class="params">(groups, id, time)</span> {</span>
    d3_arraySubclass(groups, d3_transitionPrototype);
    <span class="keyword">var</span> tweens = <span class="keyword">new</span> d3_Map, event = d3.dispatch(<span class="string">"start"</span>, <span class="string">"end"</span>), ease = d3_transitionEase;
    groups.id = id;
    groups.time = time;
    groups.tween = <span class="keyword">function</span>(name, tween) {
      <span class="keyword">if</span> (arguments.length &lt; <span class="number">2</span>) <span class="keyword">return</span> tweens.get(name);
      <span class="keyword">if</span> (tween == <span class="literal">null</span>) tweens.remove(name); <span class="keyword">else</span> tweens.set(name, tween);
      <span class="keyword">return</span> groups;
    };
    groups.ease = <span class="keyword">function</span>(value) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> ease;
      ease = <span class="keyword">typeof</span> value === <span class="string">"function"</span> ? value : d3.ease.apply(d3, arguments);
      <span class="keyword">return</span> groups;
    };
    groups.each = <span class="keyword">function</span>(type, listener) {
      <span class="keyword">if</span> (arguments.length &lt; <span class="number">2</span>) <span class="keyword">return</span> d3_transition_each.call(groups, type);
      event.on(type, listener);
      <span class="keyword">return</span> groups;
    };
    d3.timer(<span class="keyword">function</span>(elapsed) {
      <span class="keyword">return</span> d3_selection_each(groups, <span class="keyword">function</span>(node, i, j) {
        <span class="function"><span class="keyword">function</span> <span class="title">start</span><span class="params">(elapsed)</span> {</span>
          <span class="keyword">if</span> (lock.active > id) <span class="keyword">return</span> stop();
          lock.active = id;
          tweens.forEach(<span class="keyword">function</span>(key, value) {
            <span class="keyword">if</span> (value = value.call(node, d, i)) {
              tweened.push(value);
            }
          });
          event.start.call(node, d, i);
          <span class="keyword">if</span> (!tick(elapsed)) d3.timer(tick, <span class="number">0</span>, time);
          <span class="keyword">return</span> <span class="number">1</span>;
        }
        <span class="function"><span class="keyword">function</span> <span class="title">tick</span><span class="params">(elapsed)</span> {</span>
          <span class="keyword">if</span> (lock.active !== id) <span class="keyword">return</span> stop();
          <span class="keyword">var</span> t = (elapsed - delay) / duration, e = ease(t), n = tweened.length;
          <span class="keyword">while</span> (n > <span class="number">0</span>) {
            tweened[--n].call(node, e);
          }
          <span class="keyword">if</span> (t >= <span class="number">1</span>) {
            stop();
            d3_transitionId = id;
            event.end.call(node, d, i);
            d3_transitionId = <span class="number">0</span>;
            <span class="keyword">return</span> <span class="number">1</span>;
          }
        }
        <span class="function"><span class="keyword">function</span> <span class="title">stop</span><span class="params">()</span> {</span>
          <span class="keyword">if</span> (!--lock.count) <span class="keyword">delete</span> node.__transition__;
          <span class="keyword">return</span> <span class="number">1</span>;
        }
        <span class="keyword">var</span> tweened = [], delay = node.delay, duration = node.duration, lock = (node = node.node).__transition__ || (node.__transition__ = {
          active: <span class="number">0</span>,
          count: <span class="number">0</span>
        }), d = node.__data__;
        ++lock.count;
        delay &lt;= elapsed ? start(elapsed) : d3.timer(start, delay, time);
      });
    }, <span class="number">0</span>, time);
    <span class="keyword">return</span> groups;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_transition_each</span><span class="params">(callback)</span> {</span>
    <span class="keyword">var</span> id = d3_transitionId, ease = d3_transitionEase, delay = d3_transitionDelay, duration = d3_transitionDuration;
    d3_transitionId = <span class="keyword">this</span>.id;
    d3_transitionEase = <span class="keyword">this</span>.ease();
    d3_selection_each(<span class="keyword">this</span>, <span class="keyword">function</span>(node, i, j) {
      d3_transitionDelay = node.delay;
      d3_transitionDuration = node.duration;
      callback.call(node = node.node, node.__data__, i, j);
    });
    d3_transitionId = id;
    d3_transitionEase = ease;
    d3_transitionDelay = delay;
    d3_transitionDuration = duration;
    <span class="keyword">return</span> <span class="keyword">this</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_tweenNull</span><span class="params">(d, i, a)</span> {</span>
    <span class="keyword">return</span> a != <span class="string">""</span> &amp;&amp; d3_tweenRemove;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_tweenByName</span><span class="params">(b, name)</span> {</span>
    <span class="keyword">return</span> d3.tween(b, d3_interpolateByName(name));
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_timer_step</span><span class="params">()</span> {</span>
    <span class="keyword">var</span> elapsed, now = Date.now(), t1 = d3_timer_queue;
    <span class="keyword">while</span> (t1) {
      elapsed = now - t1.then;
      <span class="keyword">if</span> (elapsed >= t1.delay) t1.flush = t1.callback(elapsed);
      t1 = t1.next;
    }
    <span class="keyword">var</span> delay = d3_timer_flush() - now;
    <span class="keyword">if</span> (delay > <span class="number">24</span>) {
      <span class="keyword">if</span> (isFinite(delay)) {
        clearTimeout(d3_timer_timeout);
        d3_timer_timeout = setTimeout(d3_timer_step, delay);
      }
      d3_timer_interval = <span class="number">0</span>;
    } <span class="keyword">else</span> {
      d3_timer_interval = <span class="number">1</span>;
      d3_timer_frame(d3_timer_step);
    }
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_timer_flush</span><span class="params">()</span> {</span>
    <span class="keyword">var</span> t0 = <span class="literal">null</span>, t1 = d3_timer_queue, then = <span class="literal">Infinity</span>;
    <span class="keyword">while</span> (t1) {
      <span class="keyword">if</span> (t1.flush) {
        <span class="keyword">delete</span> d3_timer_byId[t1.callback.id];
        t1 = t0 ? t0.next = t1.next : d3_timer_queue = t1.next;
      } <span class="keyword">else</span> {
        then = Math.min(then, t1.then + t1.delay);
        t1 = (t0 = t1).next;
      }
    }
    <span class="keyword">return</span> then;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_mousePoint</span><span class="params">(container, e)</span> {</span>
    <span class="keyword">var</span> svg = container.ownerSVGElement || container;
    <span class="keyword">if</span> (svg.createSVGPoint) {
      <span class="keyword">var</span> point = svg.createSVGPoint();
      <span class="keyword">if</span> (d3_mouse_bug44083 &lt; <span class="number">0</span> &amp;&amp; (window.scrollX || window.scrollY)) {
        svg = d3.select(document.body).append(<span class="string">"svg"</span>).style(<span class="string">"position"</span>, <span class="string">"absolute"</span>).style(<span class="string">"top"</span>, <span class="number">0</span>).style(<span class="string">"left"</span>, <span class="number">0</span>);
        <span class="keyword">var</span> ctm = svg[<span class="number">0</span>][<span class="number">0</span>].getScreenCTM();
        d3_mouse_bug44083 = !(ctm.f || ctm.e);
        svg.remove();
      }
      <span class="keyword">if</span> (d3_mouse_bug44083) {
        point.x = e.pageX;
        point.y = e.pageY;
      } <span class="keyword">else</span> {
        point.x = e.clientX;
        point.y = e.clientY;
      }
      point = point.matrixTransform(container.getScreenCTM().inverse());
      <span class="keyword">return</span> [ point.x, point.y ];
    }
    <span class="keyword">var</span> rect = container.getBoundingClientRect();
    <span class="keyword">return</span> [ e.clientX - rect.left - container.clientLeft, e.clientY - rect.top - container.clientTop ];
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_noop</span><span class="params">()</span> {</span>}
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scaleExtent</span><span class="params">(domain)</span> {</span>
    <span class="keyword">var</span> start = domain[<span class="number">0</span>], stop = domain[domain.length - <span class="number">1</span>];
    <span class="keyword">return</span> start &lt; stop ? [ start, stop ] : [ stop, start ];
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scaleRange</span><span class="params">(scale)</span> {</span>
    <span class="keyword">return</span> scale.rangeExtent ? scale.rangeExtent() : d3_scaleExtent(scale.range());
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_nice</span><span class="params">(domain, nice)</span> {</span>
    <span class="keyword">var</span> i0 = <span class="number">0</span>, i1 = domain.length - <span class="number">1</span>, x0 = domain[i0], x1 = domain[i1], dx;
    <span class="keyword">if</span> (x1 &lt; x0) {
      dx = i0, i0 = i1, i1 = dx;
      dx = x0, x0 = x1, x1 = dx;
    }
    <span class="keyword">if</span> (nice = nice(x1 - x0)) {
      domain[i0] = nice.floor(x0);
      domain[i1] = nice.ceil(x1);
    }
    <span class="keyword">return</span> domain;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_niceDefault</span><span class="params">()</span> {</span>
    <span class="keyword">return</span> Math;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_linear</span><span class="params">(domain, range, interpolate, clamp)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">rescale</span><span class="params">()</span> {</span>
      <span class="keyword">var</span> linear = Math.min(domain.length, range.length) > <span class="number">2</span> ? d3_scale_polylinear : d3_scale_bilinear, uninterpolate = clamp ? d3_uninterpolateClamp : d3_uninterpolateNumber;
      output = linear(domain, range, uninterpolate, interpolate);
      input = linear(range, domain, uninterpolate, d3.interpolate);
      <span class="keyword">return</span> scale;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">scale</span><span class="params">(x)</span> {</span>
      <span class="keyword">return</span> output(x);
    }
    <span class="keyword">var</span> output, input;
    scale.invert = <span class="keyword">function</span>(y) {
      <span class="keyword">return</span> input(y);
    };
    scale.domain = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> domain;
      domain = x.map(Number);
      <span class="keyword">return</span> rescale();
    };
    scale.range = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> range;
      range = x;
      <span class="keyword">return</span> rescale();
    };
    scale.rangeRound = <span class="keyword">function</span>(x) {
      <span class="keyword">return</span> scale.range(x).interpolate(d3.interpolateRound);
    };
    scale.clamp = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> clamp;
      clamp = x;
      <span class="keyword">return</span> rescale();
    };
    scale.interpolate = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> interpolate;
      interpolate = x;
      <span class="keyword">return</span> rescale();
    };
    scale.ticks = <span class="keyword">function</span>(m) {
      <span class="keyword">return</span> d3_scale_linearTicks(domain, m);
    };
    scale.tickFormat = <span class="keyword">function</span>(m) {
      <span class="keyword">return</span> d3_scale_linearTickFormat(domain, m);
    };
    scale.nice = <span class="keyword">function</span>() {
      d3_scale_nice(domain, d3_scale_linearNice);
      <span class="keyword">return</span> rescale();
    };
    scale.copy = <span class="keyword">function</span>() {
      <span class="keyword">return</span> d3_scale_linear(domain, range, interpolate, clamp);
    };
    <span class="keyword">return</span> rescale();
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_linearRebind</span><span class="params">(scale, linear)</span> {</span>
    <span class="keyword">return</span> d3.rebind(scale, linear, <span class="string">"range"</span>, <span class="string">"rangeRound"</span>, <span class="string">"interpolate"</span>, <span class="string">"clamp"</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_linearNice</span><span class="params">(dx)</span> {</span>
    dx = Math.pow(<span class="number">10</span>, Math.round(Math.log(dx) / Math.LN10) - <span class="number">1</span>);
    <span class="keyword">return</span> dx &amp;&amp; {
      floor: <span class="keyword">function</span>(x) {
        <span class="keyword">return</span> Math.floor(x / dx) * dx;
      },
      ceil: <span class="keyword">function</span>(x) {
        <span class="keyword">return</span> Math.ceil(x / dx) * dx;
      }
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_linearTickRange</span><span class="params">(domain, m)</span> {</span>
    <span class="keyword">var</span> extent = d3_scaleExtent(domain), span = extent[<span class="number">1</span>] - extent[<span class="number">0</span>], step = Math.pow(<span class="number">10</span>, Math.floor(Math.log(span / m) / Math.LN10)), err = m / span * step;
    <span class="keyword">if</span> (err &lt;= <span class="number">.15</span>) step *= <span class="number">10</span>; <span class="keyword">else</span> <span class="keyword">if</span> (err &lt;= <span class="number">.35</span>) step *= <span class="number">5</span>; <span class="keyword">else</span> <span class="keyword">if</span> (err &lt;= <span class="number">.75</span>) step *= <span class="number">2</span>;
    extent[<span class="number">0</span>] = Math.ceil(extent[<span class="number">0</span>] / step) * step;
    extent[<span class="number">1</span>] = Math.floor(extent[<span class="number">1</span>] / step) * step + step * <span class="number">.5</span>;
    extent[<span class="number">2</span>] = step;
    <span class="keyword">return</span> extent;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_linearTicks</span><span class="params">(domain, m)</span> {</span>
    <span class="keyword">return</span> d3.range.apply(d3, d3_scale_linearTickRange(domain, m));
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_linearTickFormat</span><span class="params">(domain, m)</span> {</span>
    <span class="keyword">return</span> d3.format(<span class="string">",."</span> + Math.max(<span class="number">0</span>, -Math.floor(Math.log(d3_scale_linearTickRange(domain, m)[<span class="number">2</span>]) / Math.LN10 + <span class="number">.01</span>)) + <span class="string">"f"</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_bilinear</span><span class="params">(domain, range, uninterpolate, interpolate)</span> {</span>
    <span class="keyword">var</span> u = uninterpolate(domain[<span class="number">0</span>], domain[<span class="number">1</span>]), i = interpolate(range[<span class="number">0</span>], range[<span class="number">1</span>]);
    <span class="keyword">return</span> <span class="keyword">function</span>(x) {
      <span class="keyword">return</span> i(u(x));
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_polylinear</span><span class="params">(domain, range, uninterpolate, interpolate)</span> {</span>
    <span class="keyword">var</span> u = [], i = [], j = <span class="number">0</span>, k = Math.min(domain.length, range.length) - <span class="number">1</span>;
    <span class="keyword">if</span> (domain[k] &lt; domain[<span class="number">0</span>]) {
      domain = domain.slice().reverse();
      range = range.slice().reverse();
    }
    <span class="keyword">while</span> (++j &lt;= k) {
      u.push(uninterpolate(domain[j - <span class="number">1</span>], domain[j]));
      i.push(interpolate(range[j - <span class="number">1</span>], range[j]));
    }
    <span class="keyword">return</span> <span class="keyword">function</span>(x) {
      <span class="keyword">var</span> j = d3.bisect(domain, x, <span class="number">1</span>, k) - <span class="number">1</span>;
      <span class="keyword">return</span> i[j](u[j](x));
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_log</span><span class="params">(linear, log)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">scale</span><span class="params">(x)</span> {</span>
      <span class="keyword">return</span> linear(log(x));
    }
    <span class="keyword">var</span> pow = log.pow;
    scale.invert = <span class="keyword">function</span>(x) {
      <span class="keyword">return</span> pow(linear.invert(x));
    };
    scale.domain = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> linear.domain().map(pow);
      log = x[<span class="number">0</span>] &lt; <span class="number">0</span> ? d3_scale_logn : d3_scale_logp;
      pow = log.pow;
      linear.domain(x.map(log));
      <span class="keyword">return</span> scale;
    };
    scale.nice = <span class="keyword">function</span>() {
      linear.domain(d3_scale_nice(linear.domain(), d3_scale_niceDefault));
      <span class="keyword">return</span> scale;
    };
    scale.ticks = <span class="keyword">function</span>() {
      <span class="keyword">var</span> extent = d3_scaleExtent(linear.domain()), ticks = [];
      <span class="keyword">if</span> (extent.every(isFinite)) {
        <span class="keyword">var</span> i = Math.floor(extent[<span class="number">0</span>]), j = Math.ceil(extent[<span class="number">1</span>]), u = pow(extent[<span class="number">0</span>]), v = pow(extent[<span class="number">1</span>]);
        <span class="keyword">if</span> (log === d3_scale_logn) {
          ticks.push(pow(i));
          <span class="keyword">for</span> (; i++ &lt; j; ) <span class="keyword">for</span> (<span class="keyword">var</span> k = <span class="number">9</span>; k > <span class="number">0</span>; k--) ticks.push(pow(i) * k);
        } <span class="keyword">else</span> {
          <span class="keyword">for</span> (; i &lt; j; i++) <span class="keyword">for</span> (<span class="keyword">var</span> k = <span class="number">1</span>; k &lt; <span class="number">10</span>; k++) ticks.push(pow(i) * k);
          ticks.push(pow(i));
        }
        <span class="keyword">for</span> (i = <span class="number">0</span>; ticks[i] &lt; u; i++) {}
        <span class="keyword">for</span> (j = ticks.length; ticks[j - <span class="number">1</span>] > v; j--) {}
        ticks = ticks.slice(i, j);
      }
      <span class="keyword">return</span> ticks;
    };
    scale.tickFormat = <span class="keyword">function</span>(n, format) {
      <span class="keyword">if</span> (arguments.length &lt; <span class="number">2</span>) format = d3_scale_logFormat;
      <span class="keyword">if</span> (arguments.length &lt; <span class="number">1</span>) <span class="keyword">return</span> format;
      <span class="keyword">var</span> k = Math.max(<span class="number">.1</span>, n / scale.ticks().length), f = log === d3_scale_logn ? (e = -<span class="number">1e-12</span>, Math.floor) : (e = <span class="number">1e-12</span>, Math.ceil), e;
      <span class="keyword">return</span> <span class="keyword">function</span>(d) {
        <span class="keyword">return</span> d / pow(f(log(d) + e)) &lt;= k ? format(d) : <span class="string">""</span>;
      };
    };
    scale.copy = <span class="keyword">function</span>() {
      <span class="keyword">return</span> d3_scale_log(linear.copy(), log);
    };
    <span class="keyword">return</span> d3_scale_linearRebind(scale, linear);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_logp</span><span class="params">(x)</span> {</span>
    <span class="keyword">return</span> Math.log(x &lt; <span class="number">0</span> ? <span class="number">0</span> : x) / Math.LN10;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_logn</span><span class="params">(x)</span> {</span>
    <span class="keyword">return</span> -Math.log(x > <span class="number">0</span> ? <span class="number">0</span> : -x) / Math.LN10;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_pow</span><span class="params">(linear, exponent)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">scale</span><span class="params">(x)</span> {</span>
      <span class="keyword">return</span> linear(powp(x));
    }
    <span class="keyword">var</span> powp = d3_scale_powPow(exponent), powb = d3_scale_powPow(<span class="number">1</span> / exponent);
    scale.invert = <span class="keyword">function</span>(x) {
      <span class="keyword">return</span> powb(linear.invert(x));
    };
    scale.domain = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> linear.domain().map(powb);
      linear.domain(x.map(powp));
      <span class="keyword">return</span> scale;
    };
    scale.ticks = <span class="keyword">function</span>(m) {
      <span class="keyword">return</span> d3_scale_linearTicks(scale.domain(), m);
    };
    scale.tickFormat = <span class="keyword">function</span>(m) {
      <span class="keyword">return</span> d3_scale_linearTickFormat(scale.domain(), m);
    };
    scale.nice = <span class="keyword">function</span>() {
      <span class="keyword">return</span> scale.domain(d3_scale_nice(scale.domain(), d3_scale_linearNice));
    };
    scale.exponent = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> exponent;
      <span class="keyword">var</span> domain = scale.domain();
      powp = d3_scale_powPow(exponent = x);
      powb = d3_scale_powPow(<span class="number">1</span> / exponent);
      <span class="keyword">return</span> scale.domain(domain);
    };
    scale.copy = <span class="keyword">function</span>() {
      <span class="keyword">return</span> d3_scale_pow(linear.copy(), exponent);
    };
    <span class="keyword">return</span> d3_scale_linearRebind(scale, linear);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_powPow</span><span class="params">(e)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">function</span>(x) {
      <span class="keyword">return</span> x &lt; <span class="number">0</span> ? -Math.pow(-x, e) : Math.pow(x, e);
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_ordinal</span><span class="params">(domain, ranger)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">scale</span><span class="params">(x)</span> {</span>
      <span class="keyword">return</span> range[((index.get(x) || index.set(x, domain.push(x))) - <span class="number">1</span>) % range.length];
    }
    <span class="function"><span class="keyword">function</span> <span class="title">steps</span><span class="params">(start, step)</span> {</span>
      <span class="keyword">return</span> d3.range(domain.length).map(<span class="keyword">function</span>(i) {
        <span class="keyword">return</span> start + step * i;
      });
    }
    <span class="keyword">var</span> index, range, rangeBand;
    scale.domain = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> domain;
      domain = [];
      index = <span class="keyword">new</span> d3_Map;
      <span class="keyword">var</span> i = -<span class="number">1</span>, n = x.length, xi;
      <span class="keyword">while</span> (++i &lt; n) <span class="keyword">if</span> (!index.has(xi = x[i])) index.set(xi, domain.push(xi));
      <span class="keyword">return</span> scale[ranger.t].apply(scale, ranger.a);
    };
    scale.range = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> range;
      range = x;
      rangeBand = <span class="number">0</span>;
      ranger = {
        t: <span class="string">"range"</span>,
        a: arguments
      };
      <span class="keyword">return</span> scale;
    };
    scale.rangePoints = <span class="keyword">function</span>(x, padding) {
      <span class="keyword">if</span> (arguments.length &lt; <span class="number">2</span>) padding = <span class="number">0</span>;
      <span class="keyword">var</span> start = x[<span class="number">0</span>], stop = x[<span class="number">1</span>], step = (stop - start) / (Math.max(<span class="number">1</span>, domain.length - <span class="number">1</span>) + padding);
      range = steps(domain.length &lt; <span class="number">2</span> ? (start + stop) / <span class="number">2</span> : start + step * padding / <span class="number">2</span>, step);
      rangeBand = <span class="number">0</span>;
      ranger = {
        t: <span class="string">"rangePoints"</span>,
        a: arguments
      };
      <span class="keyword">return</span> scale;
    };
    scale.rangeBands = <span class="keyword">function</span>(x, padding, outerPadding) {
      <span class="keyword">if</span> (arguments.length &lt; <span class="number">2</span>) padding = <span class="number">0</span>;
      <span class="keyword">if</span> (arguments.length &lt; <span class="number">3</span>) outerPadding = padding;
      <span class="keyword">var</span> reverse = x[<span class="number">1</span>] &lt; x[<span class="number">0</span>], start = x[reverse - <span class="number">0</span>], stop = x[<span class="number">1</span> - reverse], step = (stop - start) / (domain.length - padding + <span class="number">2</span> * outerPadding);
      range = steps(start + step * outerPadding, step);
      <span class="keyword">if</span> (reverse) range.reverse();
      rangeBand = step * (<span class="number">1</span> - padding);
      ranger = {
        t: <span class="string">"rangeBands"</span>,
        a: arguments
      };
      <span class="keyword">return</span> scale;
    };
    scale.rangeRoundBands = <span class="keyword">function</span>(x, padding, outerPadding) {
      <span class="keyword">if</span> (arguments.length &lt; <span class="number">2</span>) padding = <span class="number">0</span>;
      <span class="keyword">if</span> (arguments.length &lt; <span class="number">3</span>) outerPadding = padding;
      <span class="keyword">var</span> reverse = x[<span class="number">1</span>] &lt; x[<span class="number">0</span>], start = x[reverse - <span class="number">0</span>], stop = x[<span class="number">1</span> - reverse], step = Math.floor((stop - start) / (domain.length - padding + <span class="number">2</span> * outerPadding)), error = stop - start - (domain.length - padding) * step;
      range = steps(start + Math.round(error / <span class="number">2</span>), step);
      <span class="keyword">if</span> (reverse) range.reverse();
      rangeBand = Math.round(step * (<span class="number">1</span> - padding));
      ranger = {
        t: <span class="string">"rangeRoundBands"</span>,
        a: arguments
      };
      <span class="keyword">return</span> scale;
    };
    scale.rangeBand = <span class="keyword">function</span>() {
      <span class="keyword">return</span> rangeBand;
    };
    scale.rangeExtent = <span class="keyword">function</span>() {
      <span class="keyword">return</span> d3_scaleExtent(ranger.a[<span class="number">0</span>]);
    };
    scale.copy = <span class="keyword">function</span>() {
      <span class="keyword">return</span> d3_scale_ordinal(domain, ranger);
    };
    <span class="keyword">return</span> scale.domain(domain);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_quantile</span><span class="params">(domain, range)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">rescale</span><span class="params">()</span> {</span>
      <span class="keyword">var</span> k = <span class="number">0</span>, n = domain.length, q = range.length;
      thresholds = [];
      <span class="keyword">while</span> (++k &lt; q) thresholds[k - <span class="number">1</span>] = d3.quantile(domain, k / q);
      <span class="keyword">return</span> scale;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">scale</span><span class="params">(x)</span> {</span>
      <span class="keyword">if</span> (isNaN(x = +x)) <span class="keyword">return</span> <span class="literal">NaN</span>;
      <span class="keyword">return</span> range[d3.bisect(thresholds, x)];
    }
    <span class="keyword">var</span> thresholds;
    scale.domain = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> domain;
      domain = x.filter(<span class="keyword">function</span>(d) {
        <span class="keyword">return</span> !isNaN(d);
      }).sort(d3.ascending);
      <span class="keyword">return</span> rescale();
    };
    scale.range = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> range;
      range = x;
      <span class="keyword">return</span> rescale();
    };
    scale.quantiles = <span class="keyword">function</span>() {
      <span class="keyword">return</span> thresholds;
    };
    scale.copy = <span class="keyword">function</span>() {
      <span class="keyword">return</span> d3_scale_quantile(domain, range);
    };
    <span class="keyword">return</span> rescale();
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_quantize</span><span class="params">(x0, x1, range)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">scale</span><span class="params">(x)</span> {</span>
      <span class="keyword">return</span> range[Math.max(<span class="number">0</span>, Math.min(i, Math.floor(kx * (x - x0))))];
    }
    <span class="function"><span class="keyword">function</span> <span class="title">rescale</span><span class="params">()</span> {</span>
      kx = range.length / (x1 - x0);
      i = range.length - <span class="number">1</span>;
      <span class="keyword">return</span> scale;
    }
    <span class="keyword">var</span> kx, i;
    scale.domain = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> [ x0, x1 ];
      x0 = +x[<span class="number">0</span>];
      x1 = +x[x.length - <span class="number">1</span>];
      <span class="keyword">return</span> rescale();
    };
    scale.range = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> range;
      range = x;
      <span class="keyword">return</span> rescale();
    };
    scale.copy = <span class="keyword">function</span>() {
      <span class="keyword">return</span> d3_scale_quantize(x0, x1, range);
    };
    <span class="keyword">return</span> rescale();
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_threshold</span><span class="params">(domain, range)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">scale</span><span class="params">(x)</span> {</span>
      <span class="keyword">return</span> range[d3.bisect(domain, x)];
    }
    scale.domain = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> domain;
      domain = _;
      <span class="keyword">return</span> scale;
    };
    scale.range = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> range;
      range = _;
      <span class="keyword">return</span> scale;
    };
    scale.copy = <span class="keyword">function</span>() {
      <span class="keyword">return</span> d3_scale_threshold(domain, range);
    };
    <span class="keyword">return</span> scale;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_scale_identity</span><span class="params">(domain)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">identity</span><span class="params">(x)</span> {</span>
      <span class="keyword">return</span> +x;
    }
    identity.invert = identity;
    identity.domain = identity.range = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> domain;
      domain = x.map(identity);
      <span class="keyword">return</span> identity;
    };
    identity.ticks = <span class="keyword">function</span>(m) {
      <span class="keyword">return</span> d3_scale_linearTicks(domain, m);
    };
    identity.tickFormat = <span class="keyword">function</span>(m) {
      <span class="keyword">return</span> d3_scale_linearTickFormat(domain, m);
    };
    identity.copy = <span class="keyword">function</span>() {
      <span class="keyword">return</span> d3_scale_identity(domain);
    };
    <span class="keyword">return</span> identity;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_arcInnerRadius</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d.innerRadius;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_arcOuterRadius</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d.outerRadius;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_arcStartAngle</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d.startAngle;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_arcEndAngle</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d.endAngle;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_line</span><span class="params">(projection)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">line</span><span class="params">(data)</span> {</span>
      <span class="function"><span class="keyword">function</span> <span class="title">segment</span><span class="params">()</span> {</span>
        segments.push(<span class="string">"M"</span>, interpolate(projection(points), tension));
      }
      <span class="keyword">var</span> segments = [], points = [], i = -<span class="number">1</span>, n = data.length, d, fx = d3_functor(x), fy = d3_functor(y);
      <span class="keyword">while</span> (++i &lt; n) {
        <span class="keyword">if</span> (defined.call(<span class="keyword">this</span>, d = data[i], i)) {
          points.push([ +fx.call(<span class="keyword">this</span>, d, i), +fy.call(<span class="keyword">this</span>, d, i) ]);
        } <span class="keyword">else</span> <span class="keyword">if</span> (points.length) {
          segment();
          points = [];
        }
      }
      <span class="keyword">if</span> (points.length) segment();
      <span class="keyword">return</span> segments.length ? segments.join(<span class="string">""</span>) : <span class="literal">null</span>;
    }
    <span class="keyword">var</span> x = d3_svg_lineX, y = d3_svg_lineY, defined = d3_true, interpolate = d3_svg_lineLinear, interpolateKey = interpolate.key, tension = <span class="number">.7</span>;
    line.x = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> x;
      x = _;
      <span class="keyword">return</span> line;
    };
    line.y = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> y;
      y = _;
      <span class="keyword">return</span> line;
    };
    line.defined = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> defined;
      defined = _;
      <span class="keyword">return</span> line;
    };
    line.interpolate = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> interpolateKey;
      <span class="keyword">if</span> (<span class="keyword">typeof</span> _ === <span class="string">"function"</span>) interpolateKey = interpolate = _; <span class="keyword">else</span> interpolateKey = (interpolate = d3_svg_lineInterpolators.get(_) || d3_svg_lineLinear).key;
      <span class="keyword">return</span> line;
    };
    line.tension = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> tension;
      tension = _;
      <span class="keyword">return</span> line;
    };
    <span class="keyword">return</span> line;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineX</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d[<span class="number">0</span>];
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineY</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d[<span class="number">1</span>];
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineLinear</span><span class="params">(points)</span> {</span>
    <span class="keyword">return</span> points.join(<span class="string">"L"</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineLinearClosed</span><span class="params">(points)</span> {</span>
    <span class="keyword">return</span> d3_svg_lineLinear(points) + <span class="string">"Z"</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineStepBefore</span><span class="params">(points)</span> {</span>
    <span class="keyword">var</span> i = <span class="number">0</span>, n = points.length, p = points[<span class="number">0</span>], path = [ p[<span class="number">0</span>], <span class="string">","</span>, p[<span class="number">1</span>] ];
    <span class="keyword">while</span> (++i &lt; n) path.push(<span class="string">"V"</span>, (p = points[i])[<span class="number">1</span>], <span class="string">"H"</span>, p[<span class="number">0</span>]);
    <span class="keyword">return</span> path.join(<span class="string">""</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineStepAfter</span><span class="params">(points)</span> {</span>
    <span class="keyword">var</span> i = <span class="number">0</span>, n = points.length, p = points[<span class="number">0</span>], path = [ p[<span class="number">0</span>], <span class="string">","</span>, p[<span class="number">1</span>] ];
    <span class="keyword">while</span> (++i &lt; n) path.push(<span class="string">"H"</span>, (p = points[i])[<span class="number">0</span>], <span class="string">"V"</span>, p[<span class="number">1</span>]);
    <span class="keyword">return</span> path.join(<span class="string">""</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineCardinalOpen</span><span class="params">(points, tension)</span> {</span>
    <span class="keyword">return</span> points.length &lt; <span class="number">4</span> ? d3_svg_lineLinear(points) : points[<span class="number">1</span>] + d3_svg_lineHermite(points.slice(<span class="number">1</span>, points.length - <span class="number">1</span>), d3_svg_lineCardinalTangents(points, tension));
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineCardinalClosed</span><span class="params">(points, tension)</span> {</span>
    <span class="keyword">return</span> points.length &lt; <span class="number">3</span> ? d3_svg_lineLinear(points) : points[<span class="number">0</span>] + d3_svg_lineHermite((points.push(points[<span class="number">0</span>]), points), d3_svg_lineCardinalTangents([ points[points.length - <span class="number">2</span>] ].concat(points, [ points[<span class="number">1</span>] ]), tension));
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineCardinal</span><span class="params">(points, tension, closed)</span> {</span>
    <span class="keyword">return</span> points.length &lt; <span class="number">3</span> ? d3_svg_lineLinear(points) : points[<span class="number">0</span>] + d3_svg_lineHermite(points, d3_svg_lineCardinalTangents(points, tension));
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineHermite</span><span class="params">(points, tangents)</span> {</span>
    <span class="keyword">if</span> (tangents.length &lt; <span class="number">1</span> || points.length != tangents.length &amp;&amp; points.length != tangents.length + <span class="number">2</span>) {
      <span class="keyword">return</span> d3_svg_lineLinear(points);
    }
    <span class="keyword">var</span> quad = points.length != tangents.length, path = <span class="string">""</span>, p0 = points[<span class="number">0</span>], p = points[<span class="number">1</span>], t0 = tangents[<span class="number">0</span>], t = t0, pi = <span class="number">1</span>;
    <span class="keyword">if</span> (quad) {
      path += <span class="string">"Q"</span> + (p[<span class="number">0</span>] - t0[<span class="number">0</span>] * <span class="number">2</span> / <span class="number">3</span>) + <span class="string">","</span> + (p[<span class="number">1</span>] - t0[<span class="number">1</span>] * <span class="number">2</span> / <span class="number">3</span>) + <span class="string">","</span> + p[<span class="number">0</span>] + <span class="string">","</span> + p[<span class="number">1</span>];
      p0 = points[<span class="number">1</span>];
      pi = <span class="number">2</span>;
    }
    <span class="keyword">if</span> (tangents.length > <span class="number">1</span>) {
      t = tangents[<span class="number">1</span>];
      p = points[pi];
      pi++;
      path += <span class="string">"C"</span> + (p0[<span class="number">0</span>] + t0[<span class="number">0</span>]) + <span class="string">","</span> + (p0[<span class="number">1</span>] + t0[<span class="number">1</span>]) + <span class="string">","</span> + (p[<span class="number">0</span>] - t[<span class="number">0</span>]) + <span class="string">","</span> + (p[<span class="number">1</span>] - t[<span class="number">1</span>]) + <span class="string">","</span> + p[<span class="number">0</span>] + <span class="string">","</span> + p[<span class="number">1</span>];
      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">2</span>; i &lt; tangents.length; i++, pi++) {
        p = points[pi];
        t = tangents[i];
        path += <span class="string">"S"</span> + (p[<span class="number">0</span>] - t[<span class="number">0</span>]) + <span class="string">","</span> + (p[<span class="number">1</span>] - t[<span class="number">1</span>]) + <span class="string">","</span> + p[<span class="number">0</span>] + <span class="string">","</span> + p[<span class="number">1</span>];
      }
    }
    <span class="keyword">if</span> (quad) {
      <span class="keyword">var</span> lp = points[pi];
      path += <span class="string">"Q"</span> + (p[<span class="number">0</span>] + t[<span class="number">0</span>] * <span class="number">2</span> / <span class="number">3</span>) + <span class="string">","</span> + (p[<span class="number">1</span>] + t[<span class="number">1</span>] * <span class="number">2</span> / <span class="number">3</span>) + <span class="string">","</span> + lp[<span class="number">0</span>] + <span class="string">","</span> + lp[<span class="number">1</span>];
    }
    <span class="keyword">return</span> path;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineCardinalTangents</span><span class="params">(points, tension)</span> {</span>
    <span class="keyword">var</span> tangents = [], a = (<span class="number">1</span> - tension) / <span class="number">2</span>, p0, p1 = points[<span class="number">0</span>], p2 = points[<span class="number">1</span>], i = <span class="number">1</span>, n = points.length;
    <span class="keyword">while</span> (++i &lt; n) {
      p0 = p1;
      p1 = p2;
      p2 = points[i];
      tangents.push([ a * (p2[<span class="number">0</span>] - p0[<span class="number">0</span>]), a * (p2[<span class="number">1</span>] - p0[<span class="number">1</span>]) ]);
    }
    <span class="keyword">return</span> tangents;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineBasis</span><span class="params">(points)</span> {</span>
    <span class="keyword">if</span> (points.length &lt; <span class="number">3</span>) <span class="keyword">return</span> d3_svg_lineLinear(points);
    <span class="keyword">var</span> i = <span class="number">1</span>, n = points.length, pi = points[<span class="number">0</span>], x0 = pi[<span class="number">0</span>], y0 = pi[<span class="number">1</span>], px = [ x0, x0, x0, (pi = points[<span class="number">1</span>])[<span class="number">0</span>] ], py = [ y0, y0, y0, pi[<span class="number">1</span>] ], path = [ x0, <span class="string">","</span>, y0 ];
    d3_svg_lineBasisBezier(path, px, py);
    <span class="keyword">while</span> (++i &lt; n) {
      pi = points[i];
      px.shift();
      px.push(pi[<span class="number">0</span>]);
      py.shift();
      py.push(pi[<span class="number">1</span>]);
      d3_svg_lineBasisBezier(path, px, py);
    }
    i = -<span class="number">1</span>;
    <span class="keyword">while</span> (++i &lt; <span class="number">2</span>) {
      px.shift();
      px.push(pi[<span class="number">0</span>]);
      py.shift();
      py.push(pi[<span class="number">1</span>]);
      d3_svg_lineBasisBezier(path, px, py);
    }
    <span class="keyword">return</span> path.join(<span class="string">""</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineBasisOpen</span><span class="params">(points)</span> {</span>
    <span class="keyword">if</span> (points.length &lt; <span class="number">4</span>) <span class="keyword">return</span> d3_svg_lineLinear(points);
    <span class="keyword">var</span> path = [], i = -<span class="number">1</span>, n = points.length, pi, px = [ <span class="number">0</span> ], py = [ <span class="number">0</span> ];
    <span class="keyword">while</span> (++i &lt; <span class="number">3</span>) {
      pi = points[i];
      px.push(pi[<span class="number">0</span>]);
      py.push(pi[<span class="number">1</span>]);
    }
    path.push(d3_svg_lineDot4(d3_svg_lineBasisBezier3, px) + <span class="string">","</span> + d3_svg_lineDot4(d3_svg_lineBasisBezier3, py));
    --i;
    <span class="keyword">while</span> (++i &lt; n) {
      pi = points[i];
      px.shift();
      px.push(pi[<span class="number">0</span>]);
      py.shift();
      py.push(pi[<span class="number">1</span>]);
      d3_svg_lineBasisBezier(path, px, py);
    }
    <span class="keyword">return</span> path.join(<span class="string">""</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineBasisClosed</span><span class="params">(points)</span> {</span>
    <span class="keyword">var</span> path, i = -<span class="number">1</span>, n = points.length, m = n + <span class="number">4</span>, pi, px = [], py = [];
    <span class="keyword">while</span> (++i &lt; <span class="number">4</span>) {
      pi = points[i % n];
      px.push(pi[<span class="number">0</span>]);
      py.push(pi[<span class="number">1</span>]);
    }
    path = [ d3_svg_lineDot4(d3_svg_lineBasisBezier3, px), <span class="string">","</span>, d3_svg_lineDot4(d3_svg_lineBasisBezier3, py) ];
    --i;
    <span class="keyword">while</span> (++i &lt; m) {
      pi = points[i % n];
      px.shift();
      px.push(pi[<span class="number">0</span>]);
      py.shift();
      py.push(pi[<span class="number">1</span>]);
      d3_svg_lineBasisBezier(path, px, py);
    }
    <span class="keyword">return</span> path.join(<span class="string">""</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineBundle</span><span class="params">(points, tension)</span> {</span>
    <span class="keyword">var</span> n = points.length - <span class="number">1</span>;
    <span class="keyword">if</span> (n) {
      <span class="keyword">var</span> x0 = points[<span class="number">0</span>][<span class="number">0</span>], y0 = points[<span class="number">0</span>][<span class="number">1</span>], dx = points[n][<span class="number">0</span>] - x0, dy = points[n][<span class="number">1</span>] - y0, i = -<span class="number">1</span>, p, t;
      <span class="keyword">while</span> (++i &lt;= n) {
        p = points[i];
        t = i / n;
        p[<span class="number">0</span>] = tension * p[<span class="number">0</span>] + (<span class="number">1</span> - tension) * (x0 + t * dx);
        p[<span class="number">1</span>] = tension * p[<span class="number">1</span>] + (<span class="number">1</span> - tension) * (y0 + t * dy);
      }
    }
    <span class="keyword">return</span> d3_svg_lineBasis(points);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineDot4</span><span class="params">(a, b)</span> {</span>
    <span class="keyword">return</span> a[<span class="number">0</span>] * b[<span class="number">0</span>] + a[<span class="number">1</span>] * b[<span class="number">1</span>] + a[<span class="number">2</span>] * b[<span class="number">2</span>] + a[<span class="number">3</span>] * b[<span class="number">3</span>];
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineBasisBezier</span><span class="params">(path, x, y)</span> {</span>
    path.push(<span class="string">"C"</span>, d3_svg_lineDot4(d3_svg_lineBasisBezier1, x), <span class="string">","</span>, d3_svg_lineDot4(d3_svg_lineBasisBezier1, y), <span class="string">","</span>, d3_svg_lineDot4(d3_svg_lineBasisBezier2, x), <span class="string">","</span>, d3_svg_lineDot4(d3_svg_lineBasisBezier2, y), <span class="string">","</span>, d3_svg_lineDot4(d3_svg_lineBasisBezier3, x), <span class="string">","</span>, d3_svg_lineDot4(d3_svg_lineBasisBezier3, y));
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineSlope</span><span class="params">(p0, p1)</span> {</span>
    <span class="keyword">return</span> (p1[<span class="number">1</span>] - p0[<span class="number">1</span>]) / (p1[<span class="number">0</span>] - p0[<span class="number">0</span>]);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineFiniteDifferences</span><span class="params">(points)</span> {</span>
    <span class="keyword">var</span> i = <span class="number">0</span>, j = points.length - <span class="number">1</span>, m = [], p0 = points[<span class="number">0</span>], p1 = points[<span class="number">1</span>], d = m[<span class="number">0</span>] = d3_svg_lineSlope(p0, p1);
    <span class="keyword">while</span> (++i &lt; j) {
      m[i] = (d + (d = d3_svg_lineSlope(p0 = p1, p1 = points[i + <span class="number">1</span>]))) / <span class="number">2</span>;
    }
    m[i] = d;
    <span class="keyword">return</span> m;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineMonotoneTangents</span><span class="params">(points)</span> {</span>
    <span class="keyword">var</span> tangents = [], d, a, b, s, m = d3_svg_lineFiniteDifferences(points), i = -<span class="number">1</span>, j = points.length - <span class="number">1</span>;
    <span class="keyword">while</span> (++i &lt; j) {
      d = d3_svg_lineSlope(points[i], points[i + <span class="number">1</span>]);
      <span class="keyword">if</span> (Math.abs(d) &lt; <span class="number">1e-6</span>) {
        m[i] = m[i + <span class="number">1</span>] = <span class="number">0</span>;
      } <span class="keyword">else</span> {
        a = m[i] / d;
        b = m[i + <span class="number">1</span>] / d;
        s = a * a + b * b;
        <span class="keyword">if</span> (s > <span class="number">9</span>) {
          s = d * <span class="number">3</span> / Math.sqrt(s);
          m[i] = s * a;
          m[i + <span class="number">1</span>] = s * b;
        }
      }
    }
    i = -<span class="number">1</span>;
    <span class="keyword">while</span> (++i &lt;= j) {
      s = (points[Math.min(j, i + <span class="number">1</span>)][<span class="number">0</span>] - points[Math.max(<span class="number">0</span>, i - <span class="number">1</span>)][<span class="number">0</span>]) / (<span class="number">6</span> * (<span class="number">1</span> + m[i] * m[i]));
      tangents.push([ s || <span class="number">0</span>, m[i] * s || <span class="number">0</span> ]);
    }
    <span class="keyword">return</span> tangents;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineMonotone</span><span class="params">(points)</span> {</span>
    <span class="keyword">return</span> points.length &lt; <span class="number">3</span> ? d3_svg_lineLinear(points) : points[<span class="number">0</span>] + d3_svg_lineHermite(points, d3_svg_lineMonotoneTangents(points));
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_lineRadial</span><span class="params">(points)</span> {</span>
    <span class="keyword">var</span> point, i = -<span class="number">1</span>, n = points.length, r, a;
    <span class="keyword">while</span> (++i &lt; n) {
      point = points[i];
      r = point[<span class="number">0</span>];
      a = point[<span class="number">1</span>] + d3_svg_arcOffset;
      point[<span class="number">0</span>] = r * Math.cos(a);
      point[<span class="number">1</span>] = r * Math.sin(a);
    }
    <span class="keyword">return</span> points;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_area</span><span class="params">(projection)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">area</span><span class="params">(data)</span> {</span>
      <span class="function"><span class="keyword">function</span> <span class="title">segment</span><span class="params">()</span> {</span>
        segments.push(<span class="string">"M"</span>, interpolate(projection(points1), tension), L, interpolateReverse(projection(points0.reverse()), tension), <span class="string">"Z"</span>);
      }
      <span class="keyword">var</span> segments = [], points0 = [], points1 = [], i = -<span class="number">1</span>, n = data.length, d, fx0 = d3_functor(x0), fy0 = d3_functor(y0), fx1 = x0 === x1 ? <span class="keyword">function</span>() {
        <span class="keyword">return</span> x;
      } : d3_functor(x1), fy1 = y0 === y1 ? <span class="keyword">function</span>() {
        <span class="keyword">return</span> y;
      } : d3_functor(y1), x, y;
      <span class="keyword">while</span> (++i &lt; n) {
        <span class="keyword">if</span> (defined.call(<span class="keyword">this</span>, d = data[i], i)) {
          points0.push([ x = +fx0.call(<span class="keyword">this</span>, d, i), y = +fy0.call(<span class="keyword">this</span>, d, i) ]);
          points1.push([ +fx1.call(<span class="keyword">this</span>, d, i), +fy1.call(<span class="keyword">this</span>, d, i) ]);
        } <span class="keyword">else</span> <span class="keyword">if</span> (points0.length) {
          segment();
          points0 = [];
          points1 = [];
        }
      }
      <span class="keyword">if</span> (points0.length) segment();
      <span class="keyword">return</span> segments.length ? segments.join(<span class="string">""</span>) : <span class="literal">null</span>;
    }
    <span class="keyword">var</span> x0 = d3_svg_lineX, x1 = d3_svg_lineX, y0 = <span class="number">0</span>, y1 = d3_svg_lineY, defined = d3_true, interpolate = d3_svg_lineLinear, interpolateKey = interpolate.key, interpolateReverse = interpolate, L = <span class="string">"L"</span>, tension = <span class="number">.7</span>;
    area.x = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> x1;
      x0 = x1 = _;
      <span class="keyword">return</span> area;
    };
    area.x0 = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> x0;
      x0 = _;
      <span class="keyword">return</span> area;
    };
    area.x1 = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> x1;
      x1 = _;
      <span class="keyword">return</span> area;
    };
    area.y = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> y1;
      y0 = y1 = _;
      <span class="keyword">return</span> area;
    };
    area.y0 = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> y0;
      y0 = _;
      <span class="keyword">return</span> area;
    };
    area.y1 = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> y1;
      y1 = _;
      <span class="keyword">return</span> area;
    };
    area.defined = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> defined;
      defined = _;
      <span class="keyword">return</span> area;
    };
    area.interpolate = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> interpolateKey;
      <span class="keyword">if</span> (<span class="keyword">typeof</span> _ === <span class="string">"function"</span>) interpolateKey = interpolate = _; <span class="keyword">else</span> interpolateKey = (interpolate = d3_svg_lineInterpolators.get(_) || d3_svg_lineLinear).key;
      interpolateReverse = interpolate.reverse || interpolate;
      L = interpolate.closed ? <span class="string">"M"</span> : <span class="string">"L"</span>;
      <span class="keyword">return</span> area;
    };
    area.tension = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> tension;
      tension = _;
      <span class="keyword">return</span> area;
    };
    <span class="keyword">return</span> area;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_chordSource</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d.source;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_chordTarget</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d.target;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_chordRadius</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d.radius;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_chordStartAngle</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d.startAngle;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_chordEndAngle</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d.endAngle;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_diagonalProjection</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> [ d.x, d.y ];
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_diagonalRadialProjection</span><span class="params">(projection)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">function</span>() {
      <span class="keyword">var</span> d = projection.apply(<span class="keyword">this</span>, arguments), r = d[<span class="number">0</span>], a = d[<span class="number">1</span>] + d3_svg_arcOffset;
      <span class="keyword">return</span> [ r * Math.cos(a), r * Math.sin(a) ];
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_symbolSize</span><span class="params">()</span> {</span>
    <span class="keyword">return</span> <span class="number">64</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_symbolType</span><span class="params">()</span> {</span>
    <span class="keyword">return</span> <span class="string">"circle"</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_symbolCircle</span><span class="params">(size)</span> {</span>
    <span class="keyword">var</span> r = Math.sqrt(size / Math.PI);
    <span class="keyword">return</span> <span class="string">"M0,"</span> + r + <span class="string">"A"</span> + r + <span class="string">","</span> + r + <span class="string">" 0 1,1 0,"</span> + -r + <span class="string">"A"</span> + r + <span class="string">","</span> + r + <span class="string">" 0 1,1 0,"</span> + r + <span class="string">"Z"</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_axisX</span><span class="params">(selection, x)</span> {</span>
    selection.attr(<span class="string">"transform"</span>, <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> <span class="string">"translate("</span> + x(d) + <span class="string">",0)"</span>;
    });
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_axisY</span><span class="params">(selection, y)</span> {</span>
    selection.attr(<span class="string">"transform"</span>, <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> <span class="string">"translate(0,"</span> + y(d) + <span class="string">")"</span>;
    });
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_svg_axisSubdivide</span><span class="params">(scale, ticks, m)</span> {</span>
    subticks = [];
    <span class="keyword">if</span> (m &amp;&amp; ticks.length > <span class="number">1</span>) {
      <span class="keyword">var</span> extent = d3_scaleExtent(scale.domain()), subticks, i = -<span class="number">1</span>, n = ticks.length, d = (ticks[<span class="number">1</span>] - ticks[<span class="number">0</span>]) / ++m, j, v;
      <span class="keyword">while</span> (++i &lt; n) {
        <span class="keyword">for</span> (j = m; --j > <span class="number">0</span>; ) {
          <span class="keyword">if</span> ((v = +ticks[i] - j * d) >= extent[<span class="number">0</span>]) {
            subticks.push(v);
          }
        }
      }
      <span class="keyword">for</span> (--i, j = <span class="number">0</span>; ++j &lt; m &amp;&amp; (v = +ticks[i] + j * d) &lt; extent[<span class="number">1</span>]; ) {
        subticks.push(v);
      }
    }
    <span class="keyword">return</span> subticks;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_behavior_zoomDelta</span><span class="params">()</span> {</span>
    <span class="keyword">if</span> (!d3_behavior_zoomDiv) {
      d3_behavior_zoomDiv = d3.select(<span class="string">"body"</span>).append(<span class="string">"div"</span>).style(<span class="string">"visibility"</span>, <span class="string">"hidden"</span>).style(<span class="string">"top"</span>, <span class="number">0</span>).style(<span class="string">"height"</span>, <span class="number">0</span>).style(<span class="string">"width"</span>, <span class="number">0</span>).style(<span class="string">"overflow-y"</span>, <span class="string">"scroll"</span>).append(<span class="string">"div"</span>).style(<span class="string">"height"</span>, <span class="string">"2000px"</span>).node().parentNode;
    }
    <span class="keyword">var</span> e = d3.event, delta;
    <span class="keyword">try</span> {
      d3_behavior_zoomDiv.scrollTop = <span class="number">1e3</span>;
      d3_behavior_zoomDiv.dispatchEvent(e);
      delta = <span class="number">1e3</span> - d3_behavior_zoomDiv.scrollTop;
    } <span class="keyword">catch</span> (error) {
      delta = e.wheelDelta || -e.detail * <span class="number">5</span>;
    }
    <span class="keyword">return</span> delta;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_bundlePath</span><span class="params">(link)</span> {</span>
    <span class="keyword">var</span> start = link.source, end = link.target, lca = d3_layout_bundleLeastCommonAncestor(start, end), points = [ start ];
    <span class="keyword">while</span> (start !== lca) {
      start = start.parent;
      points.push(start);
    }
    <span class="keyword">var</span> k = points.length;
    <span class="keyword">while</span> (end !== lca) {
      points.splice(k, <span class="number">0</span>, end);
      end = end.parent;
    }
    <span class="keyword">return</span> points;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_bundleAncestors</span><span class="params">(node)</span> {</span>
    <span class="keyword">var</span> ancestors = [], parent = node.parent;
    <span class="keyword">while</span> (parent != <span class="literal">null</span>) {
      ancestors.push(node);
      node = parent;
      parent = parent.parent;
    }
    ancestors.push(node);
    <span class="keyword">return</span> ancestors;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_bundleLeastCommonAncestor</span><span class="params">(a, b)</span> {</span>
    <span class="keyword">if</span> (a === b) <span class="keyword">return</span> a;
    <span class="keyword">var</span> aNodes = d3_layout_bundleAncestors(a), bNodes = d3_layout_bundleAncestors(b), aNode = aNodes.pop(), bNode = bNodes.pop(), sharedNode = <span class="literal">null</span>;
    <span class="keyword">while</span> (aNode === bNode) {
      sharedNode = aNode;
      aNode = aNodes.pop();
      bNode = bNodes.pop();
    }
    <span class="keyword">return</span> sharedNode;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_forceDragstart</span><span class="params">(d)</span> {</span>
    d.fixed |= <span class="number">2</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_forceDragend</span><span class="params">(d)</span> {</span>
    d.fixed &amp;= <span class="number">1</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_forceMouseover</span><span class="params">(d)</span> {</span>
    d.fixed |= <span class="number">4</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_forceMouseout</span><span class="params">(d)</span> {</span>
    d.fixed &amp;= <span class="number">3</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_forceAccumulate</span><span class="params">(quad, alpha, charges)</span> {</span>
    <span class="keyword">var</span> cx = <span class="number">0</span>, cy = <span class="number">0</span>;
    quad.charge = <span class="number">0</span>;
    <span class="keyword">if</span> (!quad.leaf) {
      <span class="keyword">var</span> nodes = quad.nodes, n = nodes.length, i = -<span class="number">1</span>, c;
      <span class="keyword">while</span> (++i &lt; n) {
        c = nodes[i];
        <span class="keyword">if</span> (c == <span class="literal">null</span>) <span class="keyword">continue</span>;
        d3_layout_forceAccumulate(c, alpha, charges);
        quad.charge += c.charge;
        cx += c.charge * c.cx;
        cy += c.charge * c.cy;
      }
    }
    <span class="keyword">if</span> (quad.point) {
      <span class="keyword">if</span> (!quad.leaf) {
        quad.point.x += Math.random() - <span class="number">.5</span>;
        quad.point.y += Math.random() - <span class="number">.5</span>;
      }
      <span class="keyword">var</span> k = alpha * charges[quad.point.index];
      quad.charge += quad.pointCharge = k;
      cx += k * quad.point.x;
      cy += k * quad.point.y;
    }
    quad.cx = cx / quad.charge;
    quad.cy = cy / quad.charge;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_forceLinkDistance</span><span class="params">(link)</span> {</span>
    <span class="keyword">return</span> <span class="number">20</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_forceLinkStrength</span><span class="params">(link)</span> {</span>
    <span class="keyword">return</span> <span class="number">1</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_stackX</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d.x;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_stackY</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d.y;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_stackOut</span><span class="params">(d, y0, y)</span> {</span>
    d.y0 = y0;
    d.y = y;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_stackOrderDefault</span><span class="params">(data)</span> {</span>
    <span class="keyword">return</span> d3.range(data.length);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_stackOffsetZero</span><span class="params">(data)</span> {</span>
    <span class="keyword">var</span> j = -<span class="number">1</span>, m = data[<span class="number">0</span>].length, y0 = [];
    <span class="keyword">while</span> (++j &lt; m) y0[j] = <span class="number">0</span>;
    <span class="keyword">return</span> y0;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_stackMaxIndex</span><span class="params">(array)</span> {</span>
    <span class="keyword">var</span> i = <span class="number">1</span>, j = <span class="number">0</span>, v = array[<span class="number">0</span>][<span class="number">1</span>], k, n = array.length;
    <span class="keyword">for</span> (; i &lt; n; ++i) {
      <span class="keyword">if</span> ((k = array[i][<span class="number">1</span>]) > v) {
        j = i;
        v = k;
      }
    }
    <span class="keyword">return</span> j;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_stackReduceSum</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d.reduce(d3_layout_stackSum, <span class="number">0</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_stackSum</span><span class="params">(p, d)</span> {</span>
    <span class="keyword">return</span> p + d[<span class="number">1</span>];
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_histogramBinSturges</span><span class="params">(range, values)</span> {</span>
    <span class="keyword">return</span> d3_layout_histogramBinFixed(range, Math.ceil(Math.log(values.length) / Math.LN2 + <span class="number">1</span>));
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_histogramBinFixed</span><span class="params">(range, n)</span> {</span>
    <span class="keyword">var</span> x = -<span class="number">1</span>, b = +range[<span class="number">0</span>], m = (range[<span class="number">1</span>] - b) / n, f = [];
    <span class="keyword">while</span> (++x &lt;= n) f[x] = m * x + b;
    <span class="keyword">return</span> f;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_histogramRange</span><span class="params">(values)</span> {</span>
    <span class="keyword">return</span> [ d3.min(values), d3.max(values) ];
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_hierarchyRebind</span><span class="params">(object, hierarchy)</span> {</span>
    d3.rebind(object, hierarchy, <span class="string">"sort"</span>, <span class="string">"children"</span>, <span class="string">"value"</span>);
    object.links = d3_layout_hierarchyLinks;
    object.nodes = <span class="keyword">function</span>(d) {
      d3_layout_hierarchyInline = <span class="literal">true</span>;
      <span class="keyword">return</span> (object.nodes = object)(d);
    };
    <span class="keyword">return</span> object;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_hierarchyChildren</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d.children;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_hierarchyValue</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d.value;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_hierarchySort</span><span class="params">(a, b)</span> {</span>
    <span class="keyword">return</span> b.value - a.value;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_hierarchyLinks</span><span class="params">(nodes)</span> {</span>
    <span class="keyword">return</span> d3.merge(nodes.map(<span class="keyword">function</span>(parent) {
      <span class="keyword">return</span> (parent.children || []).map(<span class="keyword">function</span>(child) {
        <span class="keyword">return</span> {
          source: parent,
          target: child
        };
      });
    }));
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_packSort</span><span class="params">(a, b)</span> {</span>
    <span class="keyword">return</span> a.value - b.value;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_packInsert</span><span class="params">(a, b)</span> {</span>
    <span class="keyword">var</span> c = a._pack_next;
    a._pack_next = b;
    b._pack_prev = a;
    b._pack_next = c;
    c._pack_prev = b;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_packSplice</span><span class="params">(a, b)</span> {</span>
    a._pack_next = b;
    b._pack_prev = a;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_packIntersects</span><span class="params">(a, b)</span> {</span>
    <span class="keyword">var</span> dx = b.x - a.x, dy = b.y - a.y, dr = a.r + b.r;
    <span class="keyword">return</span> dr * dr - dx * dx - dy * dy > <span class="number">.001</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_packSiblings</span><span class="params">(node)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">bound</span><span class="params">(node)</span> {</span>
      xMin = Math.min(node.x - node.r, xMin);
      xMax = Math.max(node.x + node.r, xMax);
      yMin = Math.min(node.y - node.r, yMin);
      yMax = Math.max(node.y + node.r, yMax);
    }
    <span class="keyword">if</span> (!(nodes = node.children) || !(n = nodes.length)) <span class="keyword">return</span>;
    <span class="keyword">var</span> nodes, xMin = <span class="literal">Infinity</span>, xMax = -<span class="literal">Infinity</span>, yMin = <span class="literal">Infinity</span>, yMax = -<span class="literal">Infinity</span>, a, b, c, i, j, k, n;
    nodes.forEach(d3_layout_packLink);
    a = nodes[<span class="number">0</span>];
    a.x = -a.r;
    a.y = <span class="number">0</span>;
    bound(a);
    <span class="keyword">if</span> (n > <span class="number">1</span>) {
      b = nodes[<span class="number">1</span>];
      b.x = b.r;
      b.y = <span class="number">0</span>;
      bound(b);
      <span class="keyword">if</span> (n > <span class="number">2</span>) {
        c = nodes[<span class="number">2</span>];
        d3_layout_packPlace(a, b, c);
        bound(c);
        d3_layout_packInsert(a, c);
        a._pack_prev = c;
        d3_layout_packInsert(c, b);
        b = a._pack_next;
        <span class="keyword">for</span> (i = <span class="number">3</span>; i &lt; n; i++) {
          d3_layout_packPlace(a, b, c = nodes[i]);
          <span class="keyword">var</span> isect = <span class="number">0</span>, s1 = <span class="number">1</span>, s2 = <span class="number">1</span>;
          <span class="keyword">for</span> (j = b._pack_next; j !== b; j = j._pack_next, s1++) {
            <span class="keyword">if</span> (d3_layout_packIntersects(j, c)) {
              isect = <span class="number">1</span>;
              <span class="keyword">break</span>;
            }
          }
          <span class="keyword">if</span> (isect == <span class="number">1</span>) {
            <span class="keyword">for</span> (k = a._pack_prev; k !== j._pack_prev; k = k._pack_prev, s2++) {
              <span class="keyword">if</span> (d3_layout_packIntersects(k, c)) {
                <span class="keyword">break</span>;
              }
            }
          }
          <span class="keyword">if</span> (isect) {
            <span class="keyword">if</span> (s1 &lt; s2 || s1 == s2 &amp;&amp; b.r &lt; a.r) d3_layout_packSplice(a, b = j); <span class="keyword">else</span> d3_layout_packSplice(a = k, b);
            i--;
          } <span class="keyword">else</span> {
            d3_layout_packInsert(a, c);
            b = c;
            bound(c);
          }
        }
      }
    }
    <span class="keyword">var</span> cx = (xMin + xMax) / <span class="number">2</span>, cy = (yMin + yMax) / <span class="number">2</span>, cr = <span class="number">0</span>;
    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++) {
      c = nodes[i];
      c.x -= cx;
      c.y -= cy;
      cr = Math.max(cr, c.r + Math.sqrt(c.x * c.x + c.y * c.y));
    }
    node.r = cr;
    nodes.forEach(d3_layout_packUnlink);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_packLink</span><span class="params">(node)</span> {</span>
    node._pack_next = node._pack_prev = node;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_packUnlink</span><span class="params">(node)</span> {</span>
    <span class="keyword">delete</span> node._pack_next;
    <span class="keyword">delete</span> node._pack_prev;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_packTransform</span><span class="params">(node, x, y, k)</span> {</span>
    <span class="keyword">var</span> children = node.children;
    node.x = x += k * node.x;
    node.y = y += k * node.y;
    node.r *= k;
    <span class="keyword">if</span> (children) {
      <span class="keyword">var</span> i = -<span class="number">1</span>, n = children.length;
      <span class="keyword">while</span> (++i &lt; n) d3_layout_packTransform(children[i], x, y, k);
    }
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_packPlace</span><span class="params">(a, b, c)</span> {</span>
    <span class="keyword">var</span> db = a.r + c.r, dx = b.x - a.x, dy = b.y - a.y;
    <span class="keyword">if</span> (db &amp;&amp; (dx || dy)) {
      <span class="keyword">var</span> da = b.r + c.r, dc = dx * dx + dy * dy;
      da *= da;
      db *= db;
      <span class="keyword">var</span> x = <span class="number">.5</span> + (db - da) / (<span class="number">2</span> * dc), y = Math.sqrt(Math.max(<span class="number">0</span>, <span class="number">2</span> * da * (db + dc) - (db -= dc) * db - da * da)) / (<span class="number">2</span> * dc);
      c.x = a.x + x * dx + y * dy;
      c.y = a.y + x * dy - y * dx;
    } <span class="keyword">else</span> {
      c.x = a.x + db;
      c.y = a.y;
    }
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_clusterY</span><span class="params">(children)</span> {</span>
    <span class="keyword">return</span> <span class="number">1</span> + d3.max(children, <span class="keyword">function</span>(child) {
      <span class="keyword">return</span> child.y;
    });
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_clusterX</span><span class="params">(children)</span> {</span>
    <span class="keyword">return</span> children.reduce(<span class="keyword">function</span>(x, child) {
      <span class="keyword">return</span> x + child.x;
    }, <span class="number">0</span>) / children.length;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_clusterLeft</span><span class="params">(node)</span> {</span>
    <span class="keyword">var</span> children = node.children;
    <span class="keyword">return</span> children &amp;&amp; children.length ? d3_layout_clusterLeft(children[<span class="number">0</span>]) : node;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_clusterRight</span><span class="params">(node)</span> {</span>
    <span class="keyword">var</span> children = node.children, n;
    <span class="keyword">return</span> children &amp;&amp; (n = children.length) ? d3_layout_clusterRight(children[n - <span class="number">1</span>]) : node;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_treeSeparation</span><span class="params">(a, b)</span> {</span>
    <span class="keyword">return</span> a.parent == b.parent ? <span class="number">1</span> : <span class="number">2</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_treeLeft</span><span class="params">(node)</span> {</span>
    <span class="keyword">var</span> children = node.children;
    <span class="keyword">return</span> children &amp;&amp; children.length ? children[<span class="number">0</span>] : node._tree.thread;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_treeRight</span><span class="params">(node)</span> {</span>
    <span class="keyword">var</span> children = node.children, n;
    <span class="keyword">return</span> children &amp;&amp; (n = children.length) ? children[n - <span class="number">1</span>] : node._tree.thread;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_treeSearch</span><span class="params">(node, compare)</span> {</span>
    <span class="keyword">var</span> children = node.children;
    <span class="keyword">if</span> (children &amp;&amp; (n = children.length)) {
      <span class="keyword">var</span> child, n, i = -<span class="number">1</span>;
      <span class="keyword">while</span> (++i &lt; n) {
        <span class="keyword">if</span> (compare(child = d3_layout_treeSearch(children[i], compare), node) > <span class="number">0</span>) {
          node = child;
        }
      }
    }
    <span class="keyword">return</span> node;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_treeRightmost</span><span class="params">(a, b)</span> {</span>
    <span class="keyword">return</span> a.x - b.x;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_treeLeftmost</span><span class="params">(a, b)</span> {</span>
    <span class="keyword">return</span> b.x - a.x;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_treeDeepest</span><span class="params">(a, b)</span> {</span>
    <span class="keyword">return</span> a.depth - b.depth;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_treeVisitAfter</span><span class="params">(node, callback)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">visit</span><span class="params">(node, previousSibling)</span> {</span>
      <span class="keyword">var</span> children = node.children;
      <span class="keyword">if</span> (children &amp;&amp; (n = children.length)) {
        <span class="keyword">var</span> child, previousChild = <span class="literal">null</span>, i = -<span class="number">1</span>, n;
        <span class="keyword">while</span> (++i &lt; n) {
          child = children[i];
          visit(child, previousChild);
          previousChild = child;
        }
      }
      callback(node, previousSibling);
    }
    visit(node, <span class="literal">null</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_treeShift</span><span class="params">(node)</span> {</span>
    <span class="keyword">var</span> shift = <span class="number">0</span>, change = <span class="number">0</span>, children = node.children, i = children.length, child;
    <span class="keyword">while</span> (--i >= <span class="number">0</span>) {
      child = children[i]._tree;
      child.prelim += shift;
      child.mod += shift;
      shift += child.shift + (change += child.change);
    }
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_treeMove</span><span class="params">(ancestor, node, shift)</span> {</span>
    ancestor = ancestor._tree;
    node = node._tree;
    <span class="keyword">var</span> change = shift / (node.number - ancestor.number);
    ancestor.change += change;
    node.change -= change;
    node.shift += shift;
    node.prelim += shift;
    node.mod += shift;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_treeAncestor</span><span class="params">(vim, node, ancestor)</span> {</span>
    <span class="keyword">return</span> vim._tree.ancestor.parent == node.parent ? vim._tree.ancestor : ancestor;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_treemapPadNull</span><span class="params">(node)</span> {</span>
    <span class="keyword">return</span> {
      x: node.x,
      y: node.y,
      dx: node.dx,
      dy: node.dy
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_layout_treemapPad</span><span class="params">(node, padding)</span> {</span>
    <span class="keyword">var</span> x = node.x + padding[<span class="number">3</span>], y = node.y + padding[<span class="number">0</span>], dx = node.dx - padding[<span class="number">1</span>] - padding[<span class="number">3</span>], dy = node.dy - padding[<span class="number">0</span>] - padding[<span class="number">2</span>];
    <span class="keyword">if</span> (dx &lt; <span class="number">0</span>) {
      x += dx / <span class="number">2</span>;
      dx = <span class="number">0</span>;
    }
    <span class="keyword">if</span> (dy &lt; <span class="number">0</span>) {
      y += dy / <span class="number">2</span>;
      dy = <span class="number">0</span>;
    }
    <span class="keyword">return</span> {
      x: x,
      y: y,
      dx: dx,
      dy: dy
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_dsv</span><span class="params">(delimiter, mimeType)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">dsv</span><span class="params">(url, callback)</span> {</span>
      d3.text(url, mimeType, <span class="keyword">function</span>(text) {
        callback(text &amp;&amp; dsv.parse(text));
      });
    }
    <span class="function"><span class="keyword">function</span> <span class="title">formatRow</span><span class="params">(row)</span> {</span>
      <span class="keyword">return</span> row.map(formatValue).join(delimiter);
    }
    <span class="function"><span class="keyword">function</span> <span class="title">formatValue</span><span class="params">(text)</span> {</span>
      <span class="keyword">return</span> reFormat.test(text) ? <span class="string">'"'</span> + text.replace(<span class="regexp">/\"/g</span>, <span class="string">'""'</span>) + <span class="string">'"'</span> : text;
    }
    <span class="keyword">var</span> reParse = <span class="keyword">new</span> RegExp(<span class="string">"\r\n|["</span> + delimiter + <span class="string">"\r\n]"</span>, <span class="string">"g"</span>), reFormat = <span class="keyword">new</span> RegExp(<span class="string">'["'</span> + delimiter + <span class="string">"\n]"</span>), delimiterCode = delimiter.charCodeAt(<span class="number">0</span>);
    dsv.parse = <span class="keyword">function</span>(text) {
      <span class="keyword">var</span> header;
      <span class="keyword">return</span> dsv.parseRows(text, <span class="keyword">function</span>(row, i) {
        <span class="keyword">if</span> (i) {
          <span class="keyword">var</span> o = {}, j = -<span class="number">1</span>, m = header.length;
          <span class="keyword">while</span> (++j &lt; m) o[header[j]] = row[j];
          <span class="keyword">return</span> o;
        } <span class="keyword">else</span> {
          header = row;
          <span class="keyword">return</span> <span class="literal">null</span>;
        }
      });
    };
    dsv.parseRows = <span class="keyword">function</span>(text, f) {
      <span class="function"><span class="keyword">function</span> <span class="title">token</span><span class="params">()</span> {</span>
        <span class="keyword">if</span> (reParse.lastIndex >= text.length) <span class="keyword">return</span> EOF;
        <span class="keyword">if</span> (eol) {
          eol = <span class="literal">false</span>;
          <span class="keyword">return</span> EOL;
        }
        <span class="keyword">var</span> j = reParse.lastIndex;
        <span class="keyword">if</span> (text.charCodeAt(j) === <span class="number">34</span>) {
          <span class="keyword">var</span> i = j;
          <span class="keyword">while</span> (i++ &lt; text.length) {
            <span class="keyword">if</span> (text.charCodeAt(i) === <span class="number">34</span>) {
              <span class="keyword">if</span> (text.charCodeAt(i + <span class="number">1</span>) !== <span class="number">34</span>) <span class="keyword">break</span>;
              i++;
            }
          }
          reParse.lastIndex = i + <span class="number">2</span>;
          <span class="keyword">var</span> c = text.charCodeAt(i + <span class="number">1</span>);
          <span class="keyword">if</span> (c === <span class="number">13</span>) {
            eol = <span class="literal">true</span>;
            <span class="keyword">if</span> (text.charCodeAt(i + <span class="number">2</span>) === <span class="number">10</span>) reParse.lastIndex++;
          } <span class="keyword">else</span> <span class="keyword">if</span> (c === <span class="number">10</span>) {
            eol = <span class="literal">true</span>;
          }
          <span class="keyword">return</span> text.substring(j + <span class="number">1</span>, i).replace(<span class="regexp">/""/g</span>, <span class="string">'"'</span>);
        }
        <span class="keyword">var</span> m = reParse.exec(text);
        <span class="keyword">if</span> (m) {
          eol = m[<span class="number">0</span>].charCodeAt(<span class="number">0</span>) !== delimiterCode;
          <span class="keyword">return</span> text.substring(j, m.index);
        }
        reParse.lastIndex = text.length;
        <span class="keyword">return</span> text.substring(j);
      }
      <span class="keyword">var</span> EOL = {}, EOF = {}, rows = [], n = <span class="number">0</span>, t, eol;
      reParse.lastIndex = <span class="number">0</span>;
      <span class="keyword">while</span> ((t = token()) !== EOF) {
        <span class="keyword">var</span> a = [];
        <span class="keyword">while</span> (t !== EOL &amp;&amp; t !== EOF) {
          a.push(t);
          t = token();
        }
        <span class="keyword">if</span> (f &amp;&amp; !(a = f(a, n++))) <span class="keyword">continue</span>;
        rows.push(a);
      }
      <span class="keyword">return</span> rows;
    };
    dsv.format = <span class="keyword">function</span>(rows) {
      <span class="keyword">return</span> rows.map(formatRow).join(<span class="string">"\n"</span>);
    };
    <span class="keyword">return</span> dsv;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geo_type</span><span class="params">(types, defaultValue)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">function</span>(object) {
      <span class="keyword">return</span> object &amp;&amp; types.hasOwnProperty(object.type) ? types[object.type](object) : defaultValue;
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_path_circle</span><span class="params">(radius)</span> {</span>
    <span class="keyword">return</span> <span class="string">"m0,"</span> + radius + <span class="string">"a"</span> + radius + <span class="string">","</span> + radius + <span class="string">" 0 1,1 0,"</span> + -<span class="number">2</span> * radius + <span class="string">"a"</span> + radius + <span class="string">","</span> + radius + <span class="string">" 0 1,1 0,"</span> + +<span class="number">2</span> * radius + <span class="string">"z"</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geo_bounds</span><span class="params">(o, f)</span> {</span>
    <span class="keyword">if</span> (d3_geo_boundsTypes.hasOwnProperty(o.type)) d3_geo_boundsTypes[o.type](o, f);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geo_boundsFeature</span><span class="params">(o, f)</span> {</span>
    d3_geo_bounds(o.geometry, f);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geo_boundsFeatureCollection</span><span class="params">(o, f)</span> {</span>
    <span class="keyword">for</span> (<span class="keyword">var</span> a = o.features, i = <span class="number">0</span>, n = a.length; i &lt; n; i++) {
      d3_geo_bounds(a[i].geometry, f);
    }
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geo_boundsGeometryCollection</span><span class="params">(o, f)</span> {</span>
    <span class="keyword">for</span> (<span class="keyword">var</span> a = o.geometries, i = <span class="number">0</span>, n = a.length; i &lt; n; i++) {
      d3_geo_bounds(a[i], f);
    }
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geo_boundsLineString</span><span class="params">(o, f)</span> {</span>
    <span class="keyword">for</span> (<span class="keyword">var</span> a = o.coordinates, i = <span class="number">0</span>, n = a.length; i &lt; n; i++) {
      f.apply(<span class="literal">null</span>, a[i]);
    }
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geo_boundsMultiLineString</span><span class="params">(o, f)</span> {</span>
    <span class="keyword">for</span> (<span class="keyword">var</span> a = o.coordinates, i = <span class="number">0</span>, n = a.length; i &lt; n; i++) {
      <span class="keyword">for</span> (<span class="keyword">var</span> b = a[i], j = <span class="number">0</span>, m = b.length; j &lt; m; j++) {
        f.apply(<span class="literal">null</span>, b[j]);
      }
    }
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geo_boundsMultiPolygon</span><span class="params">(o, f)</span> {</span>
    <span class="keyword">for</span> (<span class="keyword">var</span> a = o.coordinates, i = <span class="number">0</span>, n = a.length; i &lt; n; i++) {
      <span class="keyword">for</span> (<span class="keyword">var</span> b = a[i][<span class="number">0</span>], j = <span class="number">0</span>, m = b.length; j &lt; m; j++) {
        f.apply(<span class="literal">null</span>, b[j]);
      }
    }
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geo_boundsPoint</span><span class="params">(o, f)</span> {</span>
    f.apply(<span class="literal">null</span>, o.coordinates);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geo_boundsPolygon</span><span class="params">(o, f)</span> {</span>
    <span class="keyword">for</span> (<span class="keyword">var</span> a = o.coordinates[<span class="number">0</span>], i = <span class="number">0</span>, n = a.length; i &lt; n; i++) {
      f.apply(<span class="literal">null</span>, a[i]);
    }
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geo_greatArcSource</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d.source;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geo_greatArcTarget</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d.target;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geo_greatArcInterpolator</span><span class="params">()</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">interpolate</span><span class="params">(t)</span> {</span>
      <span class="keyword">var</span> B = Math.sin(t *= d) * k, A = Math.sin(d - t) * k, x = A * kx0 + B * kx1, y = A * ky0 + B * ky1, z = A * sy0 + B * sy1;
      <span class="keyword">return</span> [ Math.atan2(y, x) / d3_geo_radians, Math.atan2(z, Math.sqrt(x * x + y * y)) / d3_geo_radians ];
    }
    <span class="keyword">var</span> x0, y0, cy0, sy0, kx0, ky0, x1, y1, cy1, sy1, kx1, ky1, d, k;
    interpolate.distance = <span class="keyword">function</span>() {
      <span class="keyword">if</span> (d == <span class="literal">null</span>) k = <span class="number">1</span> / Math.sin(d = Math.acos(Math.max(-<span class="number">1</span>, Math.min(<span class="number">1</span>, sy0 * sy1 + cy0 * cy1 * Math.cos(x1 - x0)))));
      <span class="keyword">return</span> d;
    };
    interpolate.source = <span class="keyword">function</span>(_) {
      <span class="keyword">var</span> cx0 = Math.cos(x0 = _[<span class="number">0</span>] * d3_geo_radians), sx0 = Math.sin(x0);
      cy0 = Math.cos(y0 = _[<span class="number">1</span>] * d3_geo_radians);
      sy0 = Math.sin(y0);
      kx0 = cy0 * cx0;
      ky0 = cy0 * sx0;
      d = <span class="literal">null</span>;
      <span class="keyword">return</span> interpolate;
    };
    interpolate.target = <span class="keyword">function</span>(_) {
      <span class="keyword">var</span> cx1 = Math.cos(x1 = _[<span class="number">0</span>] * d3_geo_radians), sx1 = Math.sin(x1);
      cy1 = Math.cos(y1 = _[<span class="number">1</span>] * d3_geo_radians);
      sy1 = Math.sin(y1);
      kx1 = cy1 * cx1;
      ky1 = cy1 * sx1;
      d = <span class="literal">null</span>;
      <span class="keyword">return</span> interpolate;
    };
    <span class="keyword">return</span> interpolate;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geo_greatArcInterpolate</span><span class="params">(a, b)</span> {</span>
    <span class="keyword">var</span> i = d3_geo_greatArcInterpolator().source(a).target(b);
    i.distance();
    <span class="keyword">return</span> i;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geom_contourStart</span><span class="params">(grid)</span> {</span>
    <span class="keyword">var</span> x = <span class="number">0</span>, y = <span class="number">0</span>;
    <span class="keyword">while</span> (<span class="literal">true</span>) {
      <span class="keyword">if</span> (grid(x, y)) {
        <span class="keyword">return</span> [ x, y ];
      }
      <span class="keyword">if</span> (x === <span class="number">0</span>) {
        x = y + <span class="number">1</span>;
        y = <span class="number">0</span>;
      } <span class="keyword">else</span> {
        x = x - <span class="number">1</span>;
        y = y + <span class="number">1</span>;
      }
    }
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geom_hullCCW</span><span class="params">(i1, i2, i3, v)</span> {</span>
    <span class="keyword">var</span> t, a, b, c, d, e, f;
    t = v[i1];
    a = t[<span class="number">0</span>];
    b = t[<span class="number">1</span>];
    t = v[i2];
    c = t[<span class="number">0</span>];
    d = t[<span class="number">1</span>];
    t = v[i3];
    e = t[<span class="number">0</span>];
    f = t[<span class="number">1</span>];
    <span class="keyword">return</span> (f - b) * (c - a) - (d - b) * (e - a) > <span class="number">0</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geom_polygonInside</span><span class="params">(p, a, b)</span> {</span>
    <span class="keyword">return</span> (b[<span class="number">0</span>] - a[<span class="number">0</span>]) * (p[<span class="number">1</span>] - a[<span class="number">1</span>]) &lt; (b[<span class="number">1</span>] - a[<span class="number">1</span>]) * (p[<span class="number">0</span>] - a[<span class="number">0</span>]);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geom_polygonIntersect</span><span class="params">(c, d, a, b)</span> {</span>
    <span class="keyword">var</span> x1 = c[<span class="number">0</span>], x2 = d[<span class="number">0</span>], x3 = a[<span class="number">0</span>], x4 = b[<span class="number">0</span>], y1 = c[<span class="number">1</span>], y2 = d[<span class="number">1</span>], y3 = a[<span class="number">1</span>], y4 = b[<span class="number">1</span>], x13 = x1 - x3, x21 = x2 - x1, x43 = x4 - x3, y13 = y1 - y3, y21 = y2 - y1, y43 = y4 - y3, ua = (x43 * y13 - y43 * x13) / (y43 * x21 - x43 * y21);
    <span class="keyword">return</span> [ x1 + ua * x21, y1 + ua * y21 ];
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_voronoi_tessellate</span><span class="params">(vertices, callback)</span> {</span>
    <span class="keyword">var</span> Sites = {
      list: vertices.map(<span class="keyword">function</span>(v, i) {
        <span class="keyword">return</span> {
          index: i,
          x: v[<span class="number">0</span>],
          y: v[<span class="number">1</span>]
        };
      }).sort(<span class="keyword">function</span>(a, b) {
        <span class="keyword">return</span> a.y &lt; b.y ? -<span class="number">1</span> : a.y > b.y ? <span class="number">1</span> : a.x &lt; b.x ? -<span class="number">1</span> : a.x > b.x ? <span class="number">1</span> : <span class="number">0</span>;
      }),
      bottomSite: <span class="literal">null</span>
    };
    <span class="keyword">var</span> EdgeList = {
      list: [],
      leftEnd: <span class="literal">null</span>,
      rightEnd: <span class="literal">null</span>,
      init: <span class="keyword">function</span>() {
        EdgeList.leftEnd = EdgeList.createHalfEdge(<span class="literal">null</span>, <span class="string">"l"</span>);
        EdgeList.rightEnd = EdgeList.createHalfEdge(<span class="literal">null</span>, <span class="string">"l"</span>);
        EdgeList.leftEnd.r = EdgeList.rightEnd;
        EdgeList.rightEnd.l = EdgeList.leftEnd;
        EdgeList.list.unshift(EdgeList.leftEnd, EdgeList.rightEnd);
      },
      createHalfEdge: <span class="keyword">function</span>(edge, side) {
        <span class="keyword">return</span> {
          edge: edge,
          side: side,
          vertex: <span class="literal">null</span>,
          l: <span class="literal">null</span>,
          r: <span class="literal">null</span>
        };
      },
      insert: <span class="keyword">function</span>(lb, he) {
        he.l = lb;
        he.r = lb.r;
        lb.r.l = he;
        lb.r = he;
      },
      leftBound: <span class="keyword">function</span>(p) {
        <span class="keyword">var</span> he = EdgeList.leftEnd;
        <span class="keyword">do</span> {
          he = he.r;
        } <span class="keyword">while</span> (he != EdgeList.rightEnd &amp;&amp; Geom.rightOf(he, p));
        he = he.l;
        <span class="keyword">return</span> he;
      },
      del: <span class="keyword">function</span>(he) {
        he.l.r = he.r;
        he.r.l = he.l;
        he.edge = <span class="literal">null</span>;
      },
      right: <span class="keyword">function</span>(he) {
        <span class="keyword">return</span> he.r;
      },
      left: <span class="keyword">function</span>(he) {
        <span class="keyword">return</span> he.l;
      },
      leftRegion: <span class="keyword">function</span>(he) {
        <span class="keyword">return</span> he.edge == <span class="literal">null</span> ? Sites.bottomSite : he.edge.region[he.side];
      },
      rightRegion: <span class="keyword">function</span>(he) {
        <span class="keyword">return</span> he.edge == <span class="literal">null</span> ? Sites.bottomSite : he.edge.region[d3_voronoi_opposite[he.side]];
      }
    };
    <span class="keyword">var</span> Geom = {
      bisect: <span class="keyword">function</span>(s1, s2) {
        <span class="keyword">var</span> newEdge = {
          region: {
            l: s1,
            r: s2
          },
          ep: {
            l: <span class="literal">null</span>,
            r: <span class="literal">null</span>
          }
        };
        <span class="keyword">var</span> dx = s2.x - s1.x, dy = s2.y - s1.y, adx = dx > <span class="number">0</span> ? dx : -dx, ady = dy > <span class="number">0</span> ? dy : -dy;
        newEdge.c = s1.x * dx + s1.y * dy + (dx * dx + dy * dy) * <span class="number">.5</span>;
        <span class="keyword">if</span> (adx > ady) {
          newEdge.a = <span class="number">1</span>;
          newEdge.b = dy / dx;
          newEdge.c /= dx;
        } <span class="keyword">else</span> {
          newEdge.b = <span class="number">1</span>;
          newEdge.a = dx / dy;
          newEdge.c /= dy;
        }
        <span class="keyword">return</span> newEdge;
      },
      intersect: <span class="keyword">function</span>(el1, el2) {
        <span class="keyword">var</span> e1 = el1.edge, e2 = el2.edge;
        <span class="keyword">if</span> (!e1 || !e2 || e1.region.r == e2.region.r) {
          <span class="keyword">return</span> <span class="literal">null</span>;
        }
        <span class="keyword">var</span> d = e1.a * e2.b - e1.b * e2.a;
        <span class="keyword">if</span> (Math.abs(d) &lt; <span class="number">1e-10</span>) {
          <span class="keyword">return</span> <span class="literal">null</span>;
        }
        <span class="keyword">var</span> xint = (e1.c * e2.b - e2.c * e1.b) / d, yint = (e2.c * e1.a - e1.c * e2.a) / d, e1r = e1.region.r, e2r = e2.region.r, el, e;
        <span class="keyword">if</span> (e1r.y &lt; e2r.y || e1r.y == e2r.y &amp;&amp; e1r.x &lt; e2r.x) {
          el = el1;
          e = e1;
        } <span class="keyword">else</span> {
          el = el2;
          e = e2;
        }
        <span class="keyword">var</span> rightOfSite = xint >= e.region.r.x;
        <span class="keyword">if</span> (rightOfSite &amp;&amp; el.side === <span class="string">"l"</span> || !rightOfSite &amp;&amp; el.side === <span class="string">"r"</span>) {
          <span class="keyword">return</span> <span class="literal">null</span>;
        }
        <span class="keyword">return</span> {
          x: xint,
          y: yint
        };
      },
      rightOf: <span class="keyword">function</span>(he, p) {
        <span class="keyword">var</span> e = he.edge, topsite = e.region.r, rightOfSite = p.x > topsite.x;
        <span class="keyword">if</span> (rightOfSite &amp;&amp; he.side === <span class="string">"l"</span>) {
          <span class="keyword">return</span> <span class="number">1</span>;
        }
        <span class="keyword">if</span> (!rightOfSite &amp;&amp; he.side === <span class="string">"r"</span>) {
          <span class="keyword">return</span> <span class="number">0</span>;
        }
        <span class="keyword">if</span> (e.a === <span class="number">1</span>) {
          <span class="keyword">var</span> dyp = p.y - topsite.y, dxp = p.x - topsite.x, fast = <span class="number">0</span>, above = <span class="number">0</span>;
          <span class="keyword">if</span> (!rightOfSite &amp;&amp; e.b &lt; <span class="number">0</span> || rightOfSite &amp;&amp; e.b >= <span class="number">0</span>) {
            above = fast = dyp >= e.b * dxp;
          } <span class="keyword">else</span> {
            above = p.x + p.y * e.b > e.c;
            <span class="keyword">if</span> (e.b &lt; <span class="number">0</span>) {
              above = !above;
            }
            <span class="keyword">if</span> (!above) {
              fast = <span class="number">1</span>;
            }
          }
          <span class="keyword">if</span> (!fast) {
            <span class="keyword">var</span> dxs = topsite.x - e.region.l.x;
            above = e.b * (dxp * dxp - dyp * dyp) &lt; dxs * dyp * (<span class="number">1</span> + <span class="number">2</span> * dxp / dxs + e.b * e.b);
            <span class="keyword">if</span> (e.b &lt; <span class="number">0</span>) {
              above = !above;
            }
          }
        } <span class="keyword">else</span> {
          <span class="keyword">var</span> yl = e.c - e.a * p.x, t1 = p.y - yl, t2 = p.x - topsite.x, t3 = yl - topsite.y;
          above = t1 * t1 > t2 * t2 + t3 * t3;
        }
        <span class="keyword">return</span> he.side === <span class="string">"l"</span> ? above : !above;
      },
      endPoint: <span class="keyword">function</span>(edge, side, site) {
        edge.ep[side] = site;
        <span class="keyword">if</span> (!edge.ep[d3_voronoi_opposite[side]]) <span class="keyword">return</span>;
        callback(edge);
      },
      distance: <span class="keyword">function</span>(s, t) {
        <span class="keyword">var</span> dx = s.x - t.x, dy = s.y - t.y;
        <span class="keyword">return</span> Math.sqrt(dx * dx + dy * dy);
      }
    };
    <span class="keyword">var</span> EventQueue = {
      list: [],
      insert: <span class="keyword">function</span>(he, site, offset) {
        he.vertex = site;
        he.ystar = site.y + offset;
        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, list = EventQueue.list, l = list.length; i &lt; l; i++) {
          <span class="keyword">var</span> next = list[i];
          <span class="keyword">if</span> (he.ystar > next.ystar || he.ystar == next.ystar &amp;&amp; site.x > next.vertex.x) {
            <span class="keyword">continue</span>;
          } <span class="keyword">else</span> {
            <span class="keyword">break</span>;
          }
        }
        list.splice(i, <span class="number">0</span>, he);
      },
      del: <span class="keyword">function</span>(he) {
        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, ls = EventQueue.list, l = ls.length; i &lt; l &amp;&amp; ls[i] != he; ++i) {}
        ls.splice(i, <span class="number">1</span>);
      },
      empty: <span class="keyword">function</span>() {
        <span class="keyword">return</span> EventQueue.list.length === <span class="number">0</span>;
      },
      nextEvent: <span class="keyword">function</span>(he) {
        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, ls = EventQueue.list, l = ls.length; i &lt; l; ++i) {
          <span class="keyword">if</span> (ls[i] == he) <span class="keyword">return</span> ls[i + <span class="number">1</span>];
        }
        <span class="keyword">return</span> <span class="literal">null</span>;
      },
      min: <span class="keyword">function</span>() {
        <span class="keyword">var</span> elem = EventQueue.list[<span class="number">0</span>];
        <span class="keyword">return</span> {
          x: elem.vertex.x,
          y: elem.ystar
        };
      },
      extractMin: <span class="keyword">function</span>() {
        <span class="keyword">return</span> EventQueue.list.shift();
      }
    };
    EdgeList.init();
    Sites.bottomSite = Sites.list.shift();
    <span class="keyword">var</span> newSite = Sites.list.shift(), newIntStar;
    <span class="keyword">var</span> lbnd, rbnd, llbnd, rrbnd, bisector;
    <span class="keyword">var</span> bot, top, temp, p, v;
    <span class="keyword">var</span> e, pm;
    <span class="keyword">while</span> (<span class="literal">true</span>) {
      <span class="keyword">if</span> (!EventQueue.empty()) {
        newIntStar = EventQueue.min();
      }
      <span class="keyword">if</span> (newSite &amp;&amp; (EventQueue.empty() || newSite.y &lt; newIntStar.y || newSite.y == newIntStar.y &amp;&amp; newSite.x &lt; newIntStar.x)) {
        lbnd = EdgeList.leftBound(newSite);
        rbnd = EdgeList.right(lbnd);
        bot = EdgeList.rightRegion(lbnd);
        e = Geom.bisect(bot, newSite);
        bisector = EdgeList.createHalfEdge(e, <span class="string">"l"</span>);
        EdgeList.insert(lbnd, bisector);
        p = Geom.intersect(lbnd, bisector);
        <span class="keyword">if</span> (p) {
          EventQueue.del(lbnd);
          EventQueue.insert(lbnd, p, Geom.distance(p, newSite));
        }
        lbnd = bisector;
        bisector = EdgeList.createHalfEdge(e, <span class="string">"r"</span>);
        EdgeList.insert(lbnd, bisector);
        p = Geom.intersect(bisector, rbnd);
        <span class="keyword">if</span> (p) {
          EventQueue.insert(bisector, p, Geom.distance(p, newSite));
        }
        newSite = Sites.list.shift();
      } <span class="keyword">else</span> <span class="keyword">if</span> (!EventQueue.empty()) {
        lbnd = EventQueue.extractMin();
        llbnd = EdgeList.left(lbnd);
        rbnd = EdgeList.right(lbnd);
        rrbnd = EdgeList.right(rbnd);
        bot = EdgeList.leftRegion(lbnd);
        top = EdgeList.rightRegion(rbnd);
        v = lbnd.vertex;
        Geom.endPoint(lbnd.edge, lbnd.side, v);
        Geom.endPoint(rbnd.edge, rbnd.side, v);
        EdgeList.del(lbnd);
        EventQueue.del(rbnd);
        EdgeList.del(rbnd);
        pm = <span class="string">"l"</span>;
        <span class="keyword">if</span> (bot.y > top.y) {
          temp = bot;
          bot = top;
          top = temp;
          pm = <span class="string">"r"</span>;
        }
        e = Geom.bisect(bot, top);
        bisector = EdgeList.createHalfEdge(e, pm);
        EdgeList.insert(llbnd, bisector);
        Geom.endPoint(e, d3_voronoi_opposite[pm], v);
        p = Geom.intersect(llbnd, bisector);
        <span class="keyword">if</span> (p) {
          EventQueue.del(llbnd);
          EventQueue.insert(llbnd, p, Geom.distance(p, bot));
        }
        p = Geom.intersect(bisector, rrbnd);
        <span class="keyword">if</span> (p) {
          EventQueue.insert(bisector, p, Geom.distance(p, bot));
        }
      } <span class="keyword">else</span> {
        <span class="keyword">break</span>;
      }
    }
    <span class="keyword">for</span> (lbnd = EdgeList.right(EdgeList.leftEnd); lbnd != EdgeList.rightEnd; lbnd = EdgeList.right(lbnd)) {
      callback(lbnd.edge);
    }
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geom_quadtreeNode</span><span class="params">()</span> {</span>
    <span class="keyword">return</span> {
      leaf: <span class="literal">true</span>,
      nodes: [],
      point: <span class="literal">null</span>
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geom_quadtreeVisit</span><span class="params">(f, node, x1, y1, x2, y2)</span> {</span>
    <span class="keyword">if</span> (!f(node, x1, y1, x2, y2)) {
      <span class="keyword">var</span> sx = (x1 + x2) * <span class="number">.5</span>, sy = (y1 + y2) * <span class="number">.5</span>, children = node.nodes;
      <span class="keyword">if</span> (children[<span class="number">0</span>]) d3_geom_quadtreeVisit(f, children[<span class="number">0</span>], x1, y1, sx, sy);
      <span class="keyword">if</span> (children[<span class="number">1</span>]) d3_geom_quadtreeVisit(f, children[<span class="number">1</span>], sx, y1, x2, sy);
      <span class="keyword">if</span> (children[<span class="number">2</span>]) d3_geom_quadtreeVisit(f, children[<span class="number">2</span>], x1, sy, sx, y2);
      <span class="keyword">if</span> (children[<span class="number">3</span>]) d3_geom_quadtreeVisit(f, children[<span class="number">3</span>], sx, sy, x2, y2);
    }
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_geom_quadtreePoint</span><span class="params">(p)</span> {</span>
    <span class="keyword">return</span> {
      x: p[<span class="number">0</span>],
      y: p[<span class="number">1</span>]
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_utc</span><span class="params">()</span> {</span>
    <span class="keyword">this</span>._ = <span class="keyword">new</span> Date(arguments.length > <span class="number">1</span> ? Date.UTC.apply(<span class="keyword">this</span>, arguments) : arguments[<span class="number">0</span>]);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_formatAbbreviate</span><span class="params">(name)</span> {</span>
    <span class="keyword">return</span> name.substring(<span class="number">0</span>, <span class="number">3</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_parse</span><span class="params">(date, template, string, j)</span> {</span>
    <span class="keyword">var</span> c, p, i = <span class="number">0</span>, n = template.length, m = string.length;
    <span class="keyword">while</span> (i &lt; n) {
      <span class="keyword">if</span> (j >= m) <span class="keyword">return</span> -<span class="number">1</span>;
      c = template.charCodeAt(i++);
      <span class="keyword">if</span> (c == <span class="number">37</span>) {
        p = d3_time_parsers[template.charAt(i++)];
        <span class="keyword">if</span> (!p || (j = p(date, string, j)) &lt; <span class="number">0</span>) <span class="keyword">return</span> -<span class="number">1</span>;
      } <span class="keyword">else</span> <span class="keyword">if</span> (c != string.charCodeAt(j++)) {
        <span class="keyword">return</span> -<span class="number">1</span>;
      }
    }
    <span class="keyword">return</span> j;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_formatRe</span><span class="params">(names)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">new</span> RegExp(<span class="string">"^(?:"</span> + names.map(d3.requote).join(<span class="string">"|"</span>) + <span class="string">")"</span>, <span class="string">"i"</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_formatLookup</span><span class="params">(names)</span> {</span>
    <span class="keyword">var</span> map = <span class="keyword">new</span> d3_Map, i = -<span class="number">1</span>, n = names.length;
    <span class="keyword">while</span> (++i &lt; n) map.set(names[i].toLowerCase(), i);
    <span class="keyword">return</span> map;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_parseWeekdayAbbrev</span><span class="params">(date, string, i)</span> {</span>
    d3_time_dayAbbrevRe.lastIndex = <span class="number">0</span>;
    <span class="keyword">var</span> n = d3_time_dayAbbrevRe.exec(string.substring(i));
    <span class="keyword">return</span> n ? i += n[<span class="number">0</span>].length : -<span class="number">1</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_parseWeekday</span><span class="params">(date, string, i)</span> {</span>
    d3_time_dayRe.lastIndex = <span class="number">0</span>;
    <span class="keyword">var</span> n = d3_time_dayRe.exec(string.substring(i));
    <span class="keyword">return</span> n ? i += n[<span class="number">0</span>].length : -<span class="number">1</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_parseMonthAbbrev</span><span class="params">(date, string, i)</span> {</span>
    d3_time_monthAbbrevRe.lastIndex = <span class="number">0</span>;
    <span class="keyword">var</span> n = d3_time_monthAbbrevRe.exec(string.substring(i));
    <span class="keyword">return</span> n ? (date.m = d3_time_monthAbbrevLookup.get(n[<span class="number">0</span>].toLowerCase()), i += n[<span class="number">0</span>].length) : -<span class="number">1</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_parseMonth</span><span class="params">(date, string, i)</span> {</span>
    d3_time_monthRe.lastIndex = <span class="number">0</span>;
    <span class="keyword">var</span> n = d3_time_monthRe.exec(string.substring(i));
    <span class="keyword">return</span> n ? (date.m = d3_time_monthLookup.get(n[<span class="number">0</span>].toLowerCase()), i += n[<span class="number">0</span>].length) : -<span class="number">1</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_parseLocaleFull</span><span class="params">(date, string, i)</span> {</span>
    <span class="keyword">return</span> d3_time_parse(date, d3_time_formats.c.toString(), string, i);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_parseLocaleDate</span><span class="params">(date, string, i)</span> {</span>
    <span class="keyword">return</span> d3_time_parse(date, d3_time_formats.x.toString(), string, i);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_parseLocaleTime</span><span class="params">(date, string, i)</span> {</span>
    <span class="keyword">return</span> d3_time_parse(date, d3_time_formats.X.toString(), string, i);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_parseFullYear</span><span class="params">(date, string, i)</span> {</span>
    d3_time_numberRe.lastIndex = <span class="number">0</span>;
    <span class="keyword">var</span> n = d3_time_numberRe.exec(string.substring(i, i + <span class="number">4</span>));
    <span class="keyword">return</span> n ? (date.y = +n[<span class="number">0</span>], i += n[<span class="number">0</span>].length) : -<span class="number">1</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_parseYear</span><span class="params">(date, string, i)</span> {</span>
    d3_time_numberRe.lastIndex = <span class="number">0</span>;
    <span class="keyword">var</span> n = d3_time_numberRe.exec(string.substring(i, i + <span class="number">2</span>));
    <span class="keyword">return</span> n ? (date.y = d3_time_expandYear(+n[<span class="number">0</span>]), i += n[<span class="number">0</span>].length) : -<span class="number">1</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_expandYear</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d + (d > <span class="number">68</span> ? <span class="number">1900</span> : <span class="number">2e3</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_parseMonthNumber</span><span class="params">(date, string, i)</span> {</span>
    d3_time_numberRe.lastIndex = <span class="number">0</span>;
    <span class="keyword">var</span> n = d3_time_numberRe.exec(string.substring(i, i + <span class="number">2</span>));
    <span class="keyword">return</span> n ? (date.m = n[<span class="number">0</span>] - <span class="number">1</span>, i += n[<span class="number">0</span>].length) : -<span class="number">1</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_parseDay</span><span class="params">(date, string, i)</span> {</span>
    d3_time_numberRe.lastIndex = <span class="number">0</span>;
    <span class="keyword">var</span> n = d3_time_numberRe.exec(string.substring(i, i + <span class="number">2</span>));
    <span class="keyword">return</span> n ? (date.d = +n[<span class="number">0</span>], i += n[<span class="number">0</span>].length) : -<span class="number">1</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_parseHour24</span><span class="params">(date, string, i)</span> {</span>
    d3_time_numberRe.lastIndex = <span class="number">0</span>;
    <span class="keyword">var</span> n = d3_time_numberRe.exec(string.substring(i, i + <span class="number">2</span>));
    <span class="keyword">return</span> n ? (date.H = +n[<span class="number">0</span>], i += n[<span class="number">0</span>].length) : -<span class="number">1</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_parseMinutes</span><span class="params">(date, string, i)</span> {</span>
    d3_time_numberRe.lastIndex = <span class="number">0</span>;
    <span class="keyword">var</span> n = d3_time_numberRe.exec(string.substring(i, i + <span class="number">2</span>));
    <span class="keyword">return</span> n ? (date.M = +n[<span class="number">0</span>], i += n[<span class="number">0</span>].length) : -<span class="number">1</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_parseSeconds</span><span class="params">(date, string, i)</span> {</span>
    d3_time_numberRe.lastIndex = <span class="number">0</span>;
    <span class="keyword">var</span> n = d3_time_numberRe.exec(string.substring(i, i + <span class="number">2</span>));
    <span class="keyword">return</span> n ? (date.S = +n[<span class="number">0</span>], i += n[<span class="number">0</span>].length) : -<span class="number">1</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_parseMilliseconds</span><span class="params">(date, string, i)</span> {</span>
    d3_time_numberRe.lastIndex = <span class="number">0</span>;
    <span class="keyword">var</span> n = d3_time_numberRe.exec(string.substring(i, i + <span class="number">3</span>));
    <span class="keyword">return</span> n ? (date.L = +n[<span class="number">0</span>], i += n[<span class="number">0</span>].length) : -<span class="number">1</span>;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_parseAmPm</span><span class="params">(date, string, i)</span> {</span>
    <span class="keyword">var</span> n = d3_time_amPmLookup.get(string.substring(i, i += <span class="number">2</span>).toLowerCase());
    <span class="keyword">return</span> n == <span class="literal">null</span> ? -<span class="number">1</span> : (date.p = n, i);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_zone</span><span class="params">(d)</span> {</span>
    <span class="keyword">var</span> z = d.getTimezoneOffset(), zs = z > <span class="number">0</span> ? <span class="string">"-"</span> : <span class="string">"+"</span>, zh = ~~(Math.abs(z) / <span class="number">60</span>), zm = Math.abs(z) % <span class="number">60</span>;
    <span class="keyword">return</span> zs + d3_time_zfill2(zh) + d3_time_zfill2(zm);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_formatIsoNative</span><span class="params">(date)</span> {</span>
    <span class="keyword">return</span> date.toISOString();
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_interval</span><span class="params">(local, step, number)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">round</span><span class="params">(date)</span> {</span>
      <span class="keyword">var</span> d0 = local(date), d1 = offset(d0, <span class="number">1</span>);
      <span class="keyword">return</span> date - d0 &lt; d1 - date ? d0 : d1;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">ceil</span><span class="params">(date)</span> {</span>
      step(date = local(<span class="keyword">new</span> d3_time(date - <span class="number">1</span>)), <span class="number">1</span>);
      <span class="keyword">return</span> date;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">offset</span><span class="params">(date, k)</span> {</span>
      step(date = <span class="keyword">new</span> d3_time(+date), k);
      <span class="keyword">return</span> date;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">range</span><span class="params">(t0, t1, dt)</span> {</span>
      <span class="keyword">var</span> time = ceil(t0), times = [];
      <span class="keyword">if</span> (dt > <span class="number">1</span>) {
        <span class="keyword">while</span> (time &lt; t1) {
          <span class="keyword">if</span> (!(number(time) % dt)) times.push(<span class="keyword">new</span> Date(+time));
          step(time, <span class="number">1</span>);
        }
      } <span class="keyword">else</span> {
        <span class="keyword">while</span> (time &lt; t1) times.push(<span class="keyword">new</span> Date(+time)), step(time, <span class="number">1</span>);
      }
      <span class="keyword">return</span> times;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">range_utc</span><span class="params">(t0, t1, dt)</span> {</span>
      <span class="keyword">try</span> {
        d3_time = d3_time_utc;
        <span class="keyword">var</span> utc = <span class="keyword">new</span> d3_time_utc;
        utc._ = t0;
        <span class="keyword">return</span> range(utc, t1, dt);
      } <span class="keyword">finally</span> {
        d3_time = Date;
      }
    }
    local.floor = local;
    local.round = round;
    local.ceil = ceil;
    local.offset = offset;
    local.range = range;
    <span class="keyword">var</span> utc = local.utc = d3_time_interval_utc(local);
    utc.floor = utc;
    utc.round = d3_time_interval_utc(round);
    utc.ceil = d3_time_interval_utc(ceil);
    utc.offset = d3_time_interval_utc(offset);
    utc.range = range_utc;
    <span class="keyword">return</span> local;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_interval_utc</span><span class="params">(method)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">function</span>(date, k) {
      <span class="keyword">try</span> {
        d3_time = d3_time_utc;
        <span class="keyword">var</span> utc = <span class="keyword">new</span> d3_time_utc;
        utc._ = date;
        <span class="keyword">return</span> method(utc, k)._;
      } <span class="keyword">finally</span> {
        d3_time = Date;
      }
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_scale</span><span class="params">(linear, methods, format)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">scale</span><span class="params">(x)</span> {</span>
      <span class="keyword">return</span> linear(x);
    }
    scale.invert = <span class="keyword">function</span>(x) {
      <span class="keyword">return</span> d3_time_scaleDate(linear.invert(x));
    };
    scale.domain = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> linear.domain().map(d3_time_scaleDate);
      linear.domain(x);
      <span class="keyword">return</span> scale;
    };
    scale.nice = <span class="keyword">function</span>(m) {
      <span class="keyword">return</span> scale.domain(d3_scale_nice(scale.domain(), <span class="keyword">function</span>() {
        <span class="keyword">return</span> m;
      }));
    };
    scale.ticks = <span class="keyword">function</span>(m, k) {
      <span class="keyword">var</span> extent = d3_time_scaleExtent(scale.domain());
      <span class="keyword">if</span> (<span class="keyword">typeof</span> m !== <span class="string">"function"</span>) {
        <span class="keyword">var</span> span = extent[<span class="number">1</span>] - extent[<span class="number">0</span>], target = span / m, i = d3.bisect(d3_time_scaleSteps, target);
        <span class="keyword">if</span> (i == d3_time_scaleSteps.length) <span class="keyword">return</span> methods.year(extent, m);
        <span class="keyword">if</span> (!i) <span class="keyword">return</span> linear.ticks(m).map(d3_time_scaleDate);
        <span class="keyword">if</span> (Math.log(target / d3_time_scaleSteps[i - <span class="number">1</span>]) &lt; Math.log(d3_time_scaleSteps[i] / target)) --i;
        m = methods[i];
        k = m[<span class="number">1</span>];
        m = m[<span class="number">0</span>].range;
      }
      <span class="keyword">return</span> m(extent[<span class="number">0</span>], <span class="keyword">new</span> Date(+extent[<span class="number">1</span>] + <span class="number">1</span>), k);
    };
    scale.tickFormat = <span class="keyword">function</span>() {
      <span class="keyword">return</span> format;
    };
    scale.copy = <span class="keyword">function</span>() {
      <span class="keyword">return</span> d3_time_scale(linear.copy(), methods, format);
    };
    <span class="keyword">return</span> d3.rebind(scale, linear, <span class="string">"range"</span>, <span class="string">"rangeRound"</span>, <span class="string">"interpolate"</span>, <span class="string">"clamp"</span>);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_scaleExtent</span><span class="params">(domain)</span> {</span>
    <span class="keyword">var</span> start = domain[<span class="number">0</span>], stop = domain[domain.length - <span class="number">1</span>];
    <span class="keyword">return</span> start &lt; stop ? [ start, stop ] : [ stop, start ];
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_scaleDate</span><span class="params">(t)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">new</span> Date(t);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_scaleFormat</span><span class="params">(formats)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">function</span>(date) {
      <span class="keyword">var</span> i = formats.length - <span class="number">1</span>, f = formats[i];
      <span class="keyword">while</span> (!f[<span class="number">1</span>](date)) f = formats[--i];
      <span class="keyword">return</span> f[<span class="number">0</span>](date);
    };
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_scaleSetYear</span><span class="params">(y)</span> {</span>
    <span class="keyword">var</span> d = <span class="keyword">new</span> Date(y, <span class="number">0</span>, <span class="number">1</span>);
    d.setFullYear(y);
    <span class="keyword">return</span> d;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_scaleGetYear</span><span class="params">(d)</span> {</span>
    <span class="keyword">var</span> y = d.getFullYear(), d0 = d3_time_scaleSetYear(y), d1 = d3_time_scaleSetYear(y + <span class="number">1</span>);
    <span class="keyword">return</span> y + (d - d0) / (d1 - d0);
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_scaleUTCSetYear</span><span class="params">(y)</span> {</span>
    <span class="keyword">var</span> d = <span class="keyword">new</span> Date(Date.UTC(y, <span class="number">0</span>, <span class="number">1</span>));
    d.setUTCFullYear(y);
    <span class="keyword">return</span> d;
  }
  <span class="function"><span class="keyword">function</span> <span class="title">d3_time_scaleUTCGetYear</span><span class="params">(d)</span> {</span>
    <span class="keyword">var</span> y = d.getUTCFullYear(), d0 = d3_time_scaleUTCSetYear(y), d1 = d3_time_scaleUTCSetYear(y + <span class="number">1</span>);
    <span class="keyword">return</span> y + (d - d0) / (d1 - d0);
  }
  <span class="keyword">if</span> (!Date.now) Date.now = <span class="keyword">function</span>() {
    <span class="keyword">return</span> +(<span class="keyword">new</span> Date);
  };
  <span class="keyword">try</span> {
    document.createElement(<span class="string">"div"</span>).style.setProperty(<span class="string">"opacity"</span>, <span class="number">0</span>, <span class="string">""</span>);
  } <span class="keyword">catch</span> (error) {
    <span class="keyword">var</span> d3_style_prototype = CSSStyleDeclaration.prototype, d3_style_setProperty = d3_style_prototype.setProperty;
    d3_style_prototype.setProperty = <span class="keyword">function</span>(name, value, priority) {
      d3_style_setProperty.call(<span class="keyword">this</span>, name, value + <span class="string">""</span>, priority);
    };
  }
  d3 = {
    version: <span class="string">"2.10.3"</span>
  };
  <span class="keyword">var</span> d3_array = d3_arraySlice;
  <span class="keyword">try</span> {
    d3_array(document.documentElement.childNodes)[<span class="number">0</span>].nodeType;
  } <span class="keyword">catch</span> (e) {
    d3_array = d3_arrayCopy;
  }
  <span class="keyword">var</span> d3_arraySubclass = [].__proto__ ? <span class="keyword">function</span>(array, prototype) {
    array.__proto__ = prototype;
  } : <span class="keyword">function</span>(array, prototype) {
    <span class="keyword">for</span> (<span class="keyword">var</span> property <span class="keyword">in</span> prototype) array[property] = prototype[property];
  };
  d3.map = <span class="keyword">function</span>(object) {
    <span class="keyword">var</span> map = <span class="keyword">new</span> d3_Map;
    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> object) map.set(key, object[key]);
    <span class="keyword">return</span> map;
  };
  d3_class(d3_Map, {
    has: <span class="keyword">function</span>(key) {
      <span class="keyword">return</span> d3_map_prefix + key <span class="keyword">in</span> <span class="keyword">this</span>;
    },
    get: <span class="keyword">function</span>(key) {
      <span class="keyword">return</span> <span class="keyword">this</span>[d3_map_prefix + key];
    },
    set: <span class="keyword">function</span>(key, value) {
      <span class="keyword">return</span> <span class="keyword">this</span>[d3_map_prefix + key] = value;
    },
    remove: <span class="keyword">function</span>(key) {
      key = d3_map_prefix + key;
      <span class="keyword">return</span> key <span class="keyword">in</span> <span class="keyword">this</span> &amp;&amp; <span class="keyword">delete</span> <span class="keyword">this</span>[key];
    },
    keys: <span class="keyword">function</span>() {
      <span class="keyword">var</span> keys = [];
      <span class="keyword">this</span>.forEach(<span class="keyword">function</span>(key) {
        keys.push(key);
      });
      <span class="keyword">return</span> keys;
    },
    values: <span class="keyword">function</span>() {
      <span class="keyword">var</span> values = [];
      <span class="keyword">this</span>.forEach(<span class="keyword">function</span>(key, value) {
        values.push(value);
      });
      <span class="keyword">return</span> values;
    },
    entries: <span class="keyword">function</span>() {
      <span class="keyword">var</span> entries = [];
      <span class="keyword">this</span>.forEach(<span class="keyword">function</span>(key, value) {
        entries.push({
          key: key,
          value: value
        });
      });
      <span class="keyword">return</span> entries;
    },
    forEach: <span class="keyword">function</span>(f) {
      <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> <span class="keyword">this</span>) {
        <span class="keyword">if</span> (key.charCodeAt(<span class="number">0</span>) === d3_map_prefixCode) {
          f.call(<span class="keyword">this</span>, key.substring(<span class="number">1</span>), <span class="keyword">this</span>[key]);
        }
      }
    }
  });
  <span class="keyword">var</span> d3_map_prefix = <span class="string">"\0"</span>, d3_map_prefixCode = d3_map_prefix.charCodeAt(<span class="number">0</span>);
  d3.functor = d3_functor;
  d3.rebind = <span class="keyword">function</span>(target, source) {
    <span class="keyword">var</span> i = <span class="number">1</span>, n = arguments.length, method;
    <span class="keyword">while</span> (++i &lt; n) target[method = arguments[i]] = d3_rebind(target, source, source[method]);
    <span class="keyword">return</span> target;
  };
  d3.ascending = <span class="keyword">function</span>(a, b) {
    <span class="keyword">return</span> a &lt; b ? -<span class="number">1</span> : a > b ? <span class="number">1</span> : a >= b ? <span class="number">0</span> : <span class="literal">NaN</span>;
  };
  d3.descending = <span class="keyword">function</span>(a, b) {
    <span class="keyword">return</span> b &lt; a ? -<span class="number">1</span> : b > a ? <span class="number">1</span> : b >= a ? <span class="number">0</span> : <span class="literal">NaN</span>;
  };
  d3.mean = <span class="keyword">function</span>(array, f) {
    <span class="keyword">var</span> n = array.length, a, m = <span class="number">0</span>, i = -<span class="number">1</span>, j = <span class="number">0</span>;
    <span class="keyword">if</span> (arguments.length === <span class="number">1</span>) {
      <span class="keyword">while</span> (++i &lt; n) <span class="keyword">if</span> (d3_number(a = array[i])) m += (a - m) / ++j;
    } <span class="keyword">else</span> {
      <span class="keyword">while</span> (++i &lt; n) <span class="keyword">if</span> (d3_number(a = f.call(array, array[i], i))) m += (a - m) / ++j;
    }
    <span class="keyword">return</span> j ? m : <span class="literal">undefined</span>;
  };
  d3.median = <span class="keyword">function</span>(array, f) {
    <span class="keyword">if</span> (arguments.length > <span class="number">1</span>) array = array.map(f);
    array = array.filter(d3_number);
    <span class="keyword">return</span> array.length ? d3.quantile(array.sort(d3.ascending), <span class="number">.5</span>) : <span class="literal">undefined</span>;
  };
  d3.min = <span class="keyword">function</span>(array, f) {
    <span class="keyword">var</span> i = -<span class="number">1</span>, n = array.length, a, b;
    <span class="keyword">if</span> (arguments.length === <span class="number">1</span>) {
      <span class="keyword">while</span> (++i &lt; n &amp;&amp; ((a = array[i]) == <span class="literal">null</span> || a != a)) a = <span class="literal">undefined</span>;
      <span class="keyword">while</span> (++i &lt; n) <span class="keyword">if</span> ((b = array[i]) != <span class="literal">null</span> &amp;&amp; a > b) a = b;
    } <span class="keyword">else</span> {
      <span class="keyword">while</span> (++i &lt; n &amp;&amp; ((a = f.call(array, array[i], i)) == <span class="literal">null</span> || a != a)) a = <span class="literal">undefined</span>;
      <span class="keyword">while</span> (++i &lt; n) <span class="keyword">if</span> ((b = f.call(array, array[i], i)) != <span class="literal">null</span> &amp;&amp; a > b) a = b;
    }
    <span class="keyword">return</span> a;
  };
  d3.max = <span class="keyword">function</span>(array, f) {
    <span class="keyword">var</span> i = -<span class="number">1</span>, n = array.length, a, b;
    <span class="keyword">if</span> (arguments.length === <span class="number">1</span>) {
      <span class="keyword">while</span> (++i &lt; n &amp;&amp; ((a = array[i]) == <span class="literal">null</span> || a != a)) a = <span class="literal">undefined</span>;
      <span class="keyword">while</span> (++i &lt; n) <span class="keyword">if</span> ((b = array[i]) != <span class="literal">null</span> &amp;&amp; b > a) a = b;
    } <span class="keyword">else</span> {
      <span class="keyword">while</span> (++i &lt; n &amp;&amp; ((a = f.call(array, array[i], i)) == <span class="literal">null</span> || a != a)) a = <span class="literal">undefined</span>;
      <span class="keyword">while</span> (++i &lt; n) <span class="keyword">if</span> ((b = f.call(array, array[i], i)) != <span class="literal">null</span> &amp;&amp; b > a) a = b;
    }
    <span class="keyword">return</span> a;
  };
  d3.extent = <span class="keyword">function</span>(array, f) {
    <span class="keyword">var</span> i = -<span class="number">1</span>, n = array.length, a, b, c;
    <span class="keyword">if</span> (arguments.length === <span class="number">1</span>) {
      <span class="keyword">while</span> (++i &lt; n &amp;&amp; ((a = c = array[i]) == <span class="literal">null</span> || a != a)) a = c = <span class="literal">undefined</span>;
      <span class="keyword">while</span> (++i &lt; n) <span class="keyword">if</span> ((b = array[i]) != <span class="literal">null</span>) {
        <span class="keyword">if</span> (a > b) a = b;
        <span class="keyword">if</span> (c &lt; b) c = b;
      }
    } <span class="keyword">else</span> {
      <span class="keyword">while</span> (++i &lt; n &amp;&amp; ((a = c = f.call(array, array[i], i)) == <span class="literal">null</span> || a != a)) a = <span class="literal">undefined</span>;
      <span class="keyword">while</span> (++i &lt; n) <span class="keyword">if</span> ((b = f.call(array, array[i], i)) != <span class="literal">null</span>) {
        <span class="keyword">if</span> (a > b) a = b;
        <span class="keyword">if</span> (c &lt; b) c = b;
      }
    }
    <span class="keyword">return</span> [ a, c ];
  };
  d3.random = {
    normal: <span class="keyword">function</span>(, ) {
      <span class="keyword">var</span> n = arguments.length;
      <span class="keyword">if</span> (n &lt; <span class="number">2</span>)  = <span class="number">1</span>;
      <span class="keyword">if</span> (n &lt; <span class="number">1</span>)  = <span class="number">0</span>;
      <span class="keyword">return</span> <span class="keyword">function</span>() {
        <span class="keyword">var</span> x, y, r;
        <span class="keyword">do</span> {
          x = Math.random() * <span class="number">2</span> - <span class="number">1</span>;
          y = Math.random() * <span class="number">2</span> - <span class="number">1</span>;
          r = x * x + y * y;
        } <span class="keyword">while</span> (!r || r > <span class="number">1</span>);
        <span class="keyword">return</span>  +  * x * Math.sqrt(-<span class="number">2</span> * Math.log(r) / r);
      };
    },
    logNormal: <span class="keyword">function</span>(, ) {
      <span class="keyword">var</span> n = arguments.length;
      <span class="keyword">if</span> (n &lt; <span class="number">2</span>)  = <span class="number">1</span>;
      <span class="keyword">if</span> (n &lt; <span class="number">1</span>)  = <span class="number">0</span>;
      <span class="keyword">var</span> random = d3.random.normal();
      <span class="keyword">return</span> <span class="keyword">function</span>() {
        <span class="keyword">return</span> Math.exp( +  * random());
      };
    },
    irwinHall: <span class="keyword">function</span>(m) {
      <span class="keyword">return</span> <span class="keyword">function</span>() {
        <span class="keyword">for</span> (<span class="keyword">var</span> s = <span class="number">0</span>, j = <span class="number">0</span>; j &lt; m; j++) s += Math.random();
        <span class="keyword">return</span> s / m;
      };
    }
  };
  d3.sum = <span class="keyword">function</span>(array, f) {
    <span class="keyword">var</span> s = <span class="number">0</span>, n = array.length, a, i = -<span class="number">1</span>;
    <span class="keyword">if</span> (arguments.length === <span class="number">1</span>) {
      <span class="keyword">while</span> (++i &lt; n) <span class="keyword">if</span> (!isNaN(a = +array[i])) s += a;
    } <span class="keyword">else</span> {
      <span class="keyword">while</span> (++i &lt; n) <span class="keyword">if</span> (!isNaN(a = +f.call(array, array[i], i))) s += a;
    }
    <span class="keyword">return</span> s;
  };
  d3.quantile = <span class="keyword">function</span>(values, p) {
    <span class="keyword">var</span> H = (values.length - <span class="number">1</span>) * p + <span class="number">1</span>, h = Math.floor(H), v = values[h - <span class="number">1</span>], e = H - h;
    <span class="keyword">return</span> e ? v + e * (values[h] - v) : v;
  };
  d3.transpose = <span class="keyword">function</span>(matrix) {
    <span class="keyword">return</span> d3.zip.apply(d3, matrix);
  };
  d3.zip = <span class="keyword">function</span>() {
    <span class="keyword">if</span> (!(n = arguments.length)) <span class="keyword">return</span> [];
    <span class="keyword">for</span> (<span class="keyword">var</span> i = -<span class="number">1</span>, m = d3.min(arguments, d3_zipLength), zips = <span class="keyword">new</span> Array(m); ++i &lt; m; ) {
      <span class="keyword">for</span> (<span class="keyword">var</span> j = -<span class="number">1</span>, n, zip = zips[i] = <span class="keyword">new</span> Array(n); ++j &lt; n; ) {
        zip[j] = arguments[j][i];
      }
    }
    <span class="keyword">return</span> zips;
  };
  d3.bisector = <span class="keyword">function</span>(f) {
    <span class="keyword">return</span> {
      left: <span class="keyword">function</span>(a, x, lo, hi) {
        <span class="keyword">if</span> (arguments.length &lt; <span class="number">3</span>) lo = <span class="number">0</span>;
        <span class="keyword">if</span> (arguments.length &lt; <span class="number">4</span>) hi = a.length;
        <span class="keyword">while</span> (lo &lt; hi) {
          <span class="keyword">var</span> mid = lo + hi >>> <span class="number">1</span>;
          <span class="keyword">if</span> (f.call(a, a[mid], mid) &lt; x) lo = mid + <span class="number">1</span>; <span class="keyword">else</span> hi = mid;
        }
        <span class="keyword">return</span> lo;
      },
      right: <span class="keyword">function</span>(a, x, lo, hi) {
        <span class="keyword">if</span> (arguments.length &lt; <span class="number">3</span>) lo = <span class="number">0</span>;
        <span class="keyword">if</span> (arguments.length &lt; <span class="number">4</span>) hi = a.length;
        <span class="keyword">while</span> (lo &lt; hi) {
          <span class="keyword">var</span> mid = lo + hi >>> <span class="number">1</span>;
          <span class="keyword">if</span> (x &lt; f.call(a, a[mid], mid)) hi = mid; <span class="keyword">else</span> lo = mid + <span class="number">1</span>;
        }
        <span class="keyword">return</span> lo;
      }
    };
  };
  <span class="keyword">var</span> d3_bisector = d3.bisector(<span class="keyword">function</span>(d) {
    <span class="keyword">return</span> d;
  });
  d3.bisectLeft = d3_bisector.left;
  d3.bisect = d3.bisectRight = d3_bisector.right;
  d3.first = <span class="keyword">function</span>(array, f) {
    <span class="keyword">var</span> i = <span class="number">0</span>, n = array.length, a = array[<span class="number">0</span>], b;
    <span class="keyword">if</span> (arguments.length === <span class="number">1</span>) f = d3.ascending;
    <span class="keyword">while</span> (++i &lt; n) {
      <span class="keyword">if</span> (f.call(array, a, b = array[i]) > <span class="number">0</span>) {
        a = b;
      }
    }
    <span class="keyword">return</span> a;
  };
  d3.last = <span class="keyword">function</span>(array, f) {
    <span class="keyword">var</span> i = <span class="number">0</span>, n = array.length, a = array[<span class="number">0</span>], b;
    <span class="keyword">if</span> (arguments.length === <span class="number">1</span>) f = d3.ascending;
    <span class="keyword">while</span> (++i &lt; n) {
      <span class="keyword">if</span> (f.call(array, a, b = array[i]) &lt;= <span class="number">0</span>) {
        a = b;
      }
    }
    <span class="keyword">return</span> a;
  };
  d3.nest = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">map</span><span class="params">(array, depth)</span> {</span>
      <span class="keyword">if</span> (depth >= keys.length) <span class="keyword">return</span> rollup ? rollup.call(nest, array) : sortValues ? array.sort(sortValues) : array;
      <span class="keyword">var</span> i = -<span class="number">1</span>, n = array.length, key = keys[depth++], keyValue, object, valuesByKey = <span class="keyword">new</span> d3_Map, values, o = {};
      <span class="keyword">while</span> (++i &lt; n) {
        <span class="keyword">if</span> (values = valuesByKey.get(keyValue = key(object = array[i]))) {
          values.push(object);
        } <span class="keyword">else</span> {
          valuesByKey.set(keyValue, [ object ]);
        }
      }
      valuesByKey.forEach(<span class="keyword">function</span>(keyValue, values) {
        o[keyValue] = map(values, depth);
      });
      <span class="keyword">return</span> o;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">entries</span><span class="params">(map, depth)</span> {</span>
      <span class="keyword">if</span> (depth >= keys.length) <span class="keyword">return</span> map;
      <span class="keyword">var</span> a = [], sortKey = sortKeys[depth++], key;
      <span class="keyword">for</span> (key <span class="keyword">in</span> map) {
        a.push({
          key: key,
          values: entries(map[key], depth)
        });
      }
      <span class="keyword">if</span> (sortKey) a.sort(<span class="keyword">function</span>(a, b) {
        <span class="keyword">return</span> sortKey(a.key, b.key);
      });
      <span class="keyword">return</span> a;
    }
    <span class="keyword">var</span> nest = {}, keys = [], sortKeys = [], sortValues, rollup;
    nest.map = <span class="keyword">function</span>(array) {
      <span class="keyword">return</span> map(array, <span class="number">0</span>);
    };
    nest.entries = <span class="keyword">function</span>(array) {
      <span class="keyword">return</span> entries(map(array, <span class="number">0</span>), <span class="number">0</span>);
    };
    nest.key = <span class="keyword">function</span>(d) {
      keys.push(d);
      <span class="keyword">return</span> nest;
    };
    nest.sortKeys = <span class="keyword">function</span>(order) {
      sortKeys[keys.length - <span class="number">1</span>] = order;
      <span class="keyword">return</span> nest;
    };
    nest.sortValues = <span class="keyword">function</span>(order) {
      sortValues = order;
      <span class="keyword">return</span> nest;
    };
    nest.rollup = <span class="keyword">function</span>(f) {
      rollup = f;
      <span class="keyword">return</span> nest;
    };
    <span class="keyword">return</span> nest;
  };
  d3.keys = <span class="keyword">function</span>(map) {
    <span class="keyword">var</span> keys = [];
    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> map) keys.push(key);
    <span class="keyword">return</span> keys;
  };
  d3.values = <span class="keyword">function</span>(map) {
    <span class="keyword">var</span> values = [];
    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> map) values.push(map[key]);
    <span class="keyword">return</span> values;
  };
  d3.entries = <span class="keyword">function</span>(map) {
    <span class="keyword">var</span> entries = [];
    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> map) entries.push({
      key: key,
      value: map[key]
    });
    <span class="keyword">return</span> entries;
  };
  d3.permute = <span class="keyword">function</span>(array, indexes) {
    <span class="keyword">var</span> permutes = [], i = -<span class="number">1</span>, n = indexes.length;
    <span class="keyword">while</span> (++i &lt; n) permutes[i] = array[indexes[i]];
    <span class="keyword">return</span> permutes;
  };
  d3.merge = <span class="keyword">function</span>(arrays) {
    <span class="keyword">return</span> Array.prototype.concat.apply([], arrays);
  };
  d3.split = <span class="keyword">function</span>(array, f) {
    <span class="keyword">var</span> arrays = [], values = [], value, i = -<span class="number">1</span>, n = array.length;
    <span class="keyword">if</span> (arguments.length &lt; <span class="number">2</span>) f = d3_splitter;
    <span class="keyword">while</span> (++i &lt; n) {
      <span class="keyword">if</span> (f.call(values, value = array[i], i)) {
        values = [];
      } <span class="keyword">else</span> {
        <span class="keyword">if</span> (!values.length) arrays.push(values);
        values.push(value);
      }
    }
    <span class="keyword">return</span> arrays;
  };
  d3.range = <span class="keyword">function</span>(start, stop, step) {
    <span class="keyword">if</span> (arguments.length &lt; <span class="number">3</span>) {
      step = <span class="number">1</span>;
      <span class="keyword">if</span> (arguments.length &lt; <span class="number">2</span>) {
        stop = start;
        start = <span class="number">0</span>;
      }
    }
    <span class="keyword">if</span> ((stop - start) / step === <span class="literal">Infinity</span>) <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">"infinite range"</span>);
    <span class="keyword">var</span> range = [], k = d3_range_integerScale(Math.abs(step)), i = -<span class="number">1</span>, j;
    start *= k, stop *= k, step *= k;
    <span class="keyword">if</span> (step &lt; <span class="number">0</span>) <span class="keyword">while</span> ((j = start + step * ++i) > stop) range.push(j / k); <span class="keyword">else</span> <span class="keyword">while</span> ((j = start + step * ++i) &lt; stop) range.push(j / k);
    <span class="keyword">return</span> range;
  };
  d3.requote = <span class="keyword">function</span>(s) {
    <span class="keyword">return</span> s.replace(d3_requote_re, <span class="string">"\\$&amp;"</span>);
  };
  <span class="keyword">var</span> d3_requote_re = <span class="regexp">/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g</span>;
  d3.round = <span class="keyword">function</span>(x, n) {
    <span class="keyword">return</span> n ? Math.round(x * (n = Math.pow(<span class="number">10</span>, n))) / n : Math.round(x);
  };
  d3.xhr = <span class="keyword">function</span>(url, mime, callback) {
    <span class="keyword">var</span> req = <span class="keyword">new</span> XMLHttpRequest;
    <span class="keyword">if</span> (arguments.length &lt; <span class="number">3</span>) callback = mime, mime = <span class="literal">null</span>; <span class="keyword">else</span> <span class="keyword">if</span> (mime &amp;&amp; req.overrideMimeType) req.overrideMimeType(mime);
    req.open(<span class="string">"GET"</span>, url, <span class="literal">true</span>);
    <span class="keyword">if</span> (mime) req.setRequestHeader(<span class="string">"Accept"</span>, mime);
    req.onreadystatechange = <span class="keyword">function</span>() {
      <span class="keyword">if</span> (req.readyState === <span class="number">4</span>) {
        <span class="keyword">var</span> s = req.status;
        callback(!s &amp;&amp; req.response || s >= <span class="number">200</span> &amp;&amp; s &lt; <span class="number">300</span> || s === <span class="number">304</span> ? req : <span class="literal">null</span>);
      }
    };
    req.send(<span class="literal">null</span>);
  };
  d3.text = <span class="keyword">function</span>(url, mime, callback) {
    <span class="function"><span class="keyword">function</span> <span class="title">ready</span><span class="params">(req)</span> {</span>
      callback(req &amp;&amp; req.responseText);
    }
    <span class="keyword">if</span> (arguments.length &lt; <span class="number">3</span>) {
      callback = mime;
      mime = <span class="literal">null</span>;
    }
    d3.xhr(url, mime, ready);
  };
  d3.json = <span class="keyword">function</span>(url, callback) {
    d3.text(url, <span class="string">"application/json"</span>, <span class="keyword">function</span>(text) {
      callback(text ? JSON.parse(text) : <span class="literal">null</span>);
    });
  };
  d3.html = <span class="keyword">function</span>(url, callback) {
    d3.text(url, <span class="string">"text/html"</span>, <span class="keyword">function</span>(text) {
      <span class="keyword">if</span> (text != <span class="literal">null</span>) {
        <span class="keyword">var</span> range = document.createRange();
        range.selectNode(document.body);
        text = range.createContextualFragment(text);
      }
      callback(text);
    });
  };
  d3.xml = <span class="keyword">function</span>(url, mime, callback) {
    <span class="function"><span class="keyword">function</span> <span class="title">ready</span><span class="params">(req)</span> {</span>
      callback(req &amp;&amp; req.responseXML);
    }
    <span class="keyword">if</span> (arguments.length &lt; <span class="number">3</span>) {
      callback = mime;
      mime = <span class="literal">null</span>;
    }
    d3.xhr(url, mime, ready);
  };
  <span class="keyword">var</span> d3_nsPrefix = {
    svg: <span class="string">"http://www.w3.org/2000/svg"</span>,
    xhtml: <span class="string">"http://www.w3.org/1999/xhtml"</span>,
    xlink: <span class="string">"http://www.w3.org/1999/xlink"</span>,
    xml: <span class="string">"http://www.w3.org/XML/1998/namespace"</span>,
    xmlns: <span class="string">"http://www.w3.org/2000/xmlns/"</span>
  };
  d3.ns = {
    prefix: d3_nsPrefix,
    qualify: <span class="keyword">function</span>(name) {
      <span class="keyword">var</span> i = name.indexOf(<span class="string">":"</span>), prefix = name;
      <span class="keyword">if</span> (i >= <span class="number">0</span>) {
        prefix = name.substring(<span class="number">0</span>, i);
        name = name.substring(i + <span class="number">1</span>);
      }
      <span class="keyword">return</span> d3_nsPrefix.hasOwnProperty(prefix) ? {
        space: d3_nsPrefix[prefix],
        local: name
      } : name;
    }
  };
  d3.dispatch = <span class="keyword">function</span>() {
    <span class="keyword">var</span> dispatch = <span class="keyword">new</span> d3_dispatch, i = -<span class="number">1</span>, n = arguments.length;
    <span class="keyword">while</span> (++i &lt; n) dispatch[arguments[i]] = d3_dispatch_event(dispatch);
    <span class="keyword">return</span> dispatch;
  };
  d3_dispatch.prototype.on = <span class="keyword">function</span>(type, listener) {
    <span class="keyword">var</span> i = type.indexOf(<span class="string">"."</span>), name = <span class="string">""</span>;
    <span class="keyword">if</span> (i > <span class="number">0</span>) {
      name = type.substring(i + <span class="number">1</span>);
      type = type.substring(<span class="number">0</span>, i);
    }
    <span class="keyword">return</span> arguments.length &lt; <span class="number">2</span> ? <span class="keyword">this</span>[type].on(name) : <span class="keyword">this</span>[type].on(name, listener);
  };
  d3.format = <span class="keyword">function</span>(specifier) {
    <span class="keyword">var</span> match = d3_format_re.exec(specifier), fill = match[<span class="number">1</span>] || <span class="string">" "</span>, sign = match[<span class="number">3</span>] || <span class="string">""</span>, zfill = match[<span class="number">5</span>], width = +match[<span class="number">6</span>], comma = match[<span class="number">7</span>], precision = match[<span class="number">8</span>], type = match[<span class="number">9</span>], scale = <span class="number">1</span>, suffix = <span class="string">""</span>, integer = <span class="literal">false</span>;
    <span class="keyword">if</span> (precision) precision = +precision.substring(<span class="number">1</span>);
    <span class="keyword">if</span> (zfill) {
      fill = <span class="string">"0"</span>;
      <span class="keyword">if</span> (comma) width -= Math.floor((width - <span class="number">1</span>) / <span class="number">4</span>);
    }
    <span class="keyword">switch</span> (type) {
     <span class="keyword">case</span> <span class="string">"n"</span>:
      comma = <span class="literal">true</span>;
      type = <span class="string">"g"</span>;
      <span class="keyword">break</span>;
     <span class="keyword">case</span> <span class="string">"%"</span>:
      scale = <span class="number">100</span>;
      suffix = <span class="string">"%"</span>;
      type = <span class="string">"f"</span>;
      <span class="keyword">break</span>;
     <span class="keyword">case</span> <span class="string">"p"</span>:
      scale = <span class="number">100</span>;
      suffix = <span class="string">"%"</span>;
      type = <span class="string">"r"</span>;
      <span class="keyword">break</span>;
     <span class="keyword">case</span> <span class="string">"d"</span>:
      integer = <span class="literal">true</span>;
      precision = <span class="number">0</span>;
      <span class="keyword">break</span>;
     <span class="keyword">case</span> <span class="string">"s"</span>:
      scale = -<span class="number">1</span>;
      type = <span class="string">"r"</span>;
      <span class="keyword">break</span>;
    }
    <span class="keyword">if</span> (type == <span class="string">"r"</span> &amp;&amp; !precision) type = <span class="string">"g"</span>;
    type = d3_format_types.get(type) || d3_format_typeDefault;
    <span class="keyword">return</span> <span class="keyword">function</span>(value) {
      <span class="keyword">if</span> (integer &amp;&amp; value % <span class="number">1</span>) <span class="keyword">return</span> <span class="string">""</span>;
      <span class="keyword">var</span> negative = value &lt; <span class="number">0</span> &amp;&amp; (value = -value) ? <span class="string">"-"</span> : sign;
      <span class="keyword">if</span> (scale &lt; <span class="number">0</span>) {
        <span class="keyword">var</span> prefix = d3.formatPrefix(value, precision);
        value = prefix.scale(value);
        suffix = prefix.symbol;
      } <span class="keyword">else</span> {
        value *= scale;
      }
      value = type(value, precision);
      <span class="keyword">if</span> (zfill) {
        <span class="keyword">var</span> length = value.length + negative.length;
        <span class="keyword">if</span> (length &lt; width) value = (<span class="keyword">new</span> Array(width - length + <span class="number">1</span>)).join(fill) + value;
        <span class="keyword">if</span> (comma) value = d3_format_group(value);
        value = negative + value;
      } <span class="keyword">else</span> {
        <span class="keyword">if</span> (comma) value = d3_format_group(value);
        value = negative + value;
        <span class="keyword">var</span> length = value.length;
        <span class="keyword">if</span> (length &lt; width) value = (<span class="keyword">new</span> Array(width - length + <span class="number">1</span>)).join(fill) + value;
      }
      <span class="keyword">return</span> value + suffix;
    };
  };
  <span class="keyword">var</span> d3_format_re = <span class="regexp">/(?:([^{])?([&lt;>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/</span>;
  <span class="keyword">var</span> d3_format_types = d3.map({
    g: <span class="keyword">function</span>(x, p) {
      <span class="keyword">return</span> x.toPrecision(p);
    },
    e: <span class="keyword">function</span>(x, p) {
      <span class="keyword">return</span> x.toExponential(p);
    },
    f: <span class="keyword">function</span>(x, p) {
      <span class="keyword">return</span> x.toFixed(p);
    },
    r: <span class="keyword">function</span>(x, p) {
      <span class="keyword">return</span> d3.round(x, p = d3_format_precision(x, p)).toFixed(Math.max(<span class="number">0</span>, Math.min(<span class="number">20</span>, p)));
    }
  });
  <span class="keyword">var</span> d3_formatPrefixes = [ <span class="string">"y"</span>, <span class="string">"z"</span>, <span class="string">"a"</span>, <span class="string">"f"</span>, <span class="string">"p"</span>, <span class="string">"n"</span>, <span class="string">""</span>, <span class="string">"m"</span>, <span class="string">""</span>, <span class="string">"k"</span>, <span class="string">"M"</span>, <span class="string">"G"</span>, <span class="string">"T"</span>, <span class="string">"P"</span>, <span class="string">"E"</span>, <span class="string">"Z"</span>, <span class="string">"Y"</span> ].map(d3_formatPrefix);
  d3.formatPrefix = <span class="keyword">function</span>(value, precision) {
    <span class="keyword">var</span> i = <span class="number">0</span>;
    <span class="keyword">if</span> (value) {
      <span class="keyword">if</span> (value &lt; <span class="number">0</span>) value *= -<span class="number">1</span>;
      <span class="keyword">if</span> (precision) value = d3.round(value, d3_format_precision(value, precision));
      i = <span class="number">1</span> + Math.floor(<span class="number">1e-12</span> + Math.log(value) / Math.LN10);
      i = Math.max(-<span class="number">24</span>, Math.min(<span class="number">24</span>, Math.floor((i &lt;= <span class="number">0</span> ? i + <span class="number">1</span> : i - <span class="number">1</span>) / <span class="number">3</span>) * <span class="number">3</span>));
    }
    <span class="keyword">return</span> d3_formatPrefixes[<span class="number">8</span> + i / <span class="number">3</span>];
  };
  <span class="keyword">var</span> d3_ease_quad = d3_ease_poly(<span class="number">2</span>), d3_ease_cubic = d3_ease_poly(<span class="number">3</span>), d3_ease_default = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3_ease_identity;
  };
  <span class="keyword">var</span> d3_ease = d3.map({
    linear: d3_ease_default,
    poly: d3_ease_poly,
    quad: <span class="keyword">function</span>() {
      <span class="keyword">return</span> d3_ease_quad;
    },
    cubic: <span class="keyword">function</span>() {
      <span class="keyword">return</span> d3_ease_cubic;
    },
    sin: <span class="keyword">function</span>() {
      <span class="keyword">return</span> d3_ease_sin;
    },
    exp: <span class="keyword">function</span>() {
      <span class="keyword">return</span> d3_ease_exp;
    },
    circle: <span class="keyword">function</span>() {
      <span class="keyword">return</span> d3_ease_circle;
    },
    elastic: d3_ease_elastic,
    back: d3_ease_back,
    bounce: <span class="keyword">function</span>() {
      <span class="keyword">return</span> d3_ease_bounce;
    }
  });
  <span class="keyword">var</span> d3_ease_mode = d3.map({
    <span class="string">"in"</span>: d3_ease_identity,
    out: d3_ease_reverse,
    <span class="string">"in-out"</span>: d3_ease_reflect,
    <span class="string">"out-in"</span>: <span class="keyword">function</span>(f) {
      <span class="keyword">return</span> d3_ease_reflect(d3_ease_reverse(f));
    }
  });
  d3.ease = <span class="keyword">function</span>(name) {
    <span class="keyword">var</span> i = name.indexOf(<span class="string">"-"</span>), t = i >= <span class="number">0</span> ? name.substring(<span class="number">0</span>, i) : name, m = i >= <span class="number">0</span> ? name.substring(i + <span class="number">1</span>) : <span class="string">"in"</span>;
    t = d3_ease.get(t) || d3_ease_default;
    m = d3_ease_mode.get(m) || d3_ease_identity;
    <span class="keyword">return</span> d3_ease_clamp(m(t.apply(<span class="literal">null</span>, Array.prototype.slice.call(arguments, <span class="number">1</span>))));
  };
  d3.event = <span class="literal">null</span>;
  d3.transform = <span class="keyword">function</span>(string) {
    <span class="keyword">var</span> g = document.createElementNS(d3.ns.prefix.svg, <span class="string">"g"</span>);
    <span class="keyword">return</span> (d3.transform = <span class="keyword">function</span>(string) {
      g.setAttribute(<span class="string">"transform"</span>, string);
      <span class="keyword">var</span> t = g.transform.baseVal.consolidate();
      <span class="keyword">return</span> <span class="keyword">new</span> d3_transform(t ? t.matrix : d3_transformIdentity);
    })(string);
  };
  d3_transform.prototype.toString = <span class="keyword">function</span>() {
    <span class="keyword">return</span> <span class="string">"translate("</span> + <span class="keyword">this</span>.translate + <span class="string">")rotate("</span> + <span class="keyword">this</span>.rotate + <span class="string">")skewX("</span> + <span class="keyword">this</span>.skew + <span class="string">")scale("</span> + <span class="keyword">this</span>.scale + <span class="string">")"</span>;
  };
  <span class="keyword">var</span> d3_transformDegrees = <span class="number">180</span> / Math.PI, d3_transformIdentity = {
    a: <span class="number">1</span>,
    b: <span class="number">0</span>,
    c: <span class="number">0</span>,
    d: <span class="number">1</span>,
    e: <span class="number">0</span>,
    f: <span class="number">0</span>
  };
  d3.interpolate = <span class="keyword">function</span>(a, b) {
    <span class="keyword">var</span> i = d3.interpolators.length, f;
    <span class="keyword">while</span> (--i >= <span class="number">0</span> &amp;&amp; !(f = d3.interpolators[i](a, b))) ;
    <span class="keyword">return</span> f;
  };
  d3.interpolateNumber = <span class="keyword">function</span>(a, b) {
    b -= a;
    <span class="keyword">return</span> <span class="keyword">function</span>(t) {
      <span class="keyword">return</span> a + b * t;
    };
  };
  d3.interpolateRound = <span class="keyword">function</span>(a, b) {
    b -= a;
    <span class="keyword">return</span> <span class="keyword">function</span>(t) {
      <span class="keyword">return</span> Math.round(a + b * t);
    };
  };
  d3.interpolateString = <span class="keyword">function</span>(a, b) {
    <span class="keyword">var</span> m, i, j, s0 = <span class="number">0</span>, s1 = <span class="number">0</span>, s = [], q = [], n, o;
    d3_interpolate_number.lastIndex = <span class="number">0</span>;
    <span class="keyword">for</span> (i = <span class="number">0</span>; m = d3_interpolate_number.exec(b); ++i) {
      <span class="keyword">if</span> (m.index) s.push(b.substring(s0, s1 = m.index));
      q.push({
        i: s.length,
        x: m[<span class="number">0</span>]
      });
      s.push(<span class="literal">null</span>);
      s0 = d3_interpolate_number.lastIndex;
    }
    <span class="keyword">if</span> (s0 &lt; b.length) s.push(b.substring(s0));
    <span class="keyword">for</span> (i = <span class="number">0</span>, n = q.length; (m = d3_interpolate_number.exec(a)) &amp;&amp; i &lt; n; ++i) {
      o = q[i];
      <span class="keyword">if</span> (o.x == m[<span class="number">0</span>]) {
        <span class="keyword">if</span> (o.i) {
          <span class="keyword">if</span> (s[o.i + <span class="number">1</span>] == <span class="literal">null</span>) {
            s[o.i - <span class="number">1</span>] += o.x;
            s.splice(o.i, <span class="number">1</span>);
            <span class="keyword">for</span> (j = i + <span class="number">1</span>; j &lt; n; ++j) q[j].i--;
          } <span class="keyword">else</span> {
            s[o.i - <span class="number">1</span>] += o.x + s[o.i + <span class="number">1</span>];
            s.splice(o.i, <span class="number">2</span>);
            <span class="keyword">for</span> (j = i + <span class="number">1</span>; j &lt; n; ++j) q[j].i -= <span class="number">2</span>;
          }
        } <span class="keyword">else</span> {
          <span class="keyword">if</span> (s[o.i + <span class="number">1</span>] == <span class="literal">null</span>) {
            s[o.i] = o.x;
          } <span class="keyword">else</span> {
            s[o.i] = o.x + s[o.i + <span class="number">1</span>];
            s.splice(o.i + <span class="number">1</span>, <span class="number">1</span>);
            <span class="keyword">for</span> (j = i + <span class="number">1</span>; j &lt; n; ++j) q[j].i--;
          }
        }
        q.splice(i, <span class="number">1</span>);
        n--;
        i--;
      } <span class="keyword">else</span> {
        o.x = d3.interpolateNumber(parseFloat(m[<span class="number">0</span>]), parseFloat(o.x));
      }
    }
    <span class="keyword">while</span> (i &lt; n) {
      o = q.pop();
      <span class="keyword">if</span> (s[o.i + <span class="number">1</span>] == <span class="literal">null</span>) {
        s[o.i] = o.x;
      } <span class="keyword">else</span> {
        s[o.i] = o.x + s[o.i + <span class="number">1</span>];
        s.splice(o.i + <span class="number">1</span>, <span class="number">1</span>);
      }
      n--;
    }
    <span class="keyword">if</span> (s.length === <span class="number">1</span>) {
      <span class="keyword">return</span> s[<span class="number">0</span>] == <span class="literal">null</span> ? q[<span class="number">0</span>].x : <span class="keyword">function</span>() {
        <span class="keyword">return</span> b;
      };
    }
    <span class="keyword">return</span> <span class="keyword">function</span>(t) {
      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; ++i) s[(o = q[i]).i] = o.x(t);
      <span class="keyword">return</span> s.join(<span class="string">""</span>);
    };
  };
  d3.interpolateTransform = <span class="keyword">function</span>(a, b) {
    <span class="keyword">var</span> s = [], q = [], n, A = d3.transform(a), B = d3.transform(b), ta = A.translate, tb = B.translate, ra = A.rotate, rb = B.rotate, wa = A.skew, wb = B.skew, ka = A.scale, kb = B.scale;
    <span class="keyword">if</span> (ta[<span class="number">0</span>] != tb[<span class="number">0</span>] || ta[<span class="number">1</span>] != tb[<span class="number">1</span>]) {
      s.push(<span class="string">"translate("</span>, <span class="literal">null</span>, <span class="string">","</span>, <span class="literal">null</span>, <span class="string">")"</span>);
      q.push({
        i: <span class="number">1</span>,
        x: d3.interpolateNumber(ta[<span class="number">0</span>], tb[<span class="number">0</span>])
      }, {
        i: <span class="number">3</span>,
        x: d3.interpolateNumber(ta[<span class="number">1</span>], tb[<span class="number">1</span>])
      });
    } <span class="keyword">else</span> <span class="keyword">if</span> (tb[<span class="number">0</span>] || tb[<span class="number">1</span>]) {
      s.push(<span class="string">"translate("</span> + tb + <span class="string">")"</span>);
    } <span class="keyword">else</span> {
      s.push(<span class="string">""</span>);
    }
    <span class="keyword">if</span> (ra != rb) {
      <span class="keyword">if</span> (ra - rb > <span class="number">180</span>) rb += <span class="number">360</span>; <span class="keyword">else</span> <span class="keyword">if</span> (rb - ra > <span class="number">180</span>) ra += <span class="number">360</span>;
      q.push({
        i: s.push(s.pop() + <span class="string">"rotate("</span>, <span class="literal">null</span>, <span class="string">")"</span>) - <span class="number">2</span>,
        x: d3.interpolateNumber(ra, rb)
      });
    } <span class="keyword">else</span> <span class="keyword">if</span> (rb) {
      s.push(s.pop() + <span class="string">"rotate("</span> + rb + <span class="string">")"</span>);
    }
    <span class="keyword">if</span> (wa != wb) {
      q.push({
        i: s.push(s.pop() + <span class="string">"skewX("</span>, <span class="literal">null</span>, <span class="string">")"</span>) - <span class="number">2</span>,
        x: d3.interpolateNumber(wa, wb)
      });
    } <span class="keyword">else</span> <span class="keyword">if</span> (wb) {
      s.push(s.pop() + <span class="string">"skewX("</span> + wb + <span class="string">")"</span>);
    }
    <span class="keyword">if</span> (ka[<span class="number">0</span>] != kb[<span class="number">0</span>] || ka[<span class="number">1</span>] != kb[<span class="number">1</span>]) {
      n = s.push(s.pop() + <span class="string">"scale("</span>, <span class="literal">null</span>, <span class="string">","</span>, <span class="literal">null</span>, <span class="string">")"</span>);
      q.push({
        i: n - <span class="number">4</span>,
        x: d3.interpolateNumber(ka[<span class="number">0</span>], kb[<span class="number">0</span>])
      }, {
        i: n - <span class="number">2</span>,
        x: d3.interpolateNumber(ka[<span class="number">1</span>], kb[<span class="number">1</span>])
      });
    } <span class="keyword">else</span> <span class="keyword">if</span> (kb[<span class="number">0</span>] != <span class="number">1</span> || kb[<span class="number">1</span>] != <span class="number">1</span>) {
      s.push(s.pop() + <span class="string">"scale("</span> + kb + <span class="string">")"</span>);
    }
    n = q.length;
    <span class="keyword">return</span> <span class="keyword">function</span>(t) {
      <span class="keyword">var</span> i = -<span class="number">1</span>, o;
      <span class="keyword">while</span> (++i &lt; n) s[(o = q[i]).i] = o.x(t);
      <span class="keyword">return</span> s.join(<span class="string">""</span>);
    };
  };
  d3.interpolateRgb = <span class="keyword">function</span>(a, b) {
    a = d3.rgb(a);
    b = d3.rgb(b);
    <span class="keyword">var</span> ar = a.r, ag = a.g, ab = a.b, br = b.r - ar, bg = b.g - ag, bb = b.b - ab;
    <span class="keyword">return</span> <span class="keyword">function</span>(t) {
      <span class="keyword">return</span> <span class="string">"#"</span> + d3_rgb_hex(Math.round(ar + br * t)) + d3_rgb_hex(Math.round(ag + bg * t)) + d3_rgb_hex(Math.round(ab + bb * t));
    };
  };
  d3.interpolateHsl = <span class="keyword">function</span>(a, b) {
    a = d3.hsl(a);
    b = d3.hsl(b);
    <span class="keyword">var</span> h0 = a.h, s0 = a.s, l0 = a.l, h1 = b.h - h0, s1 = b.s - s0, l1 = b.l - l0;
    <span class="keyword">if</span> (h1 > <span class="number">180</span>) h1 -= <span class="number">360</span>; <span class="keyword">else</span> <span class="keyword">if</span> (h1 &lt; -<span class="number">180</span>) h1 += <span class="number">360</span>;
    <span class="keyword">return</span> <span class="keyword">function</span>(t) {
      <span class="keyword">return</span> d3_hsl_rgb(h0 + h1 * t, s0 + s1 * t, l0 + l1 * t) + <span class="string">""</span>;
    };
  };
  d3.interpolateLab = <span class="keyword">function</span>(a, b) {
    a = d3.lab(a);
    b = d3.lab(b);
    <span class="keyword">var</span> al = a.l, aa = a.a, ab = a.b, bl = b.l - al, ba = b.a - aa, bb = b.b - ab;
    <span class="keyword">return</span> <span class="keyword">function</span>(t) {
      <span class="keyword">return</span> d3_lab_rgb(al + bl * t, aa + ba * t, ab + bb * t) + <span class="string">""</span>;
    };
  };
  d3.interpolateHcl = <span class="keyword">function</span>(a, b) {
    a = d3.hcl(a);
    b = d3.hcl(b);
    <span class="keyword">var</span> ah = a.h, ac = a.c, al = a.l, bh = b.h - ah, bc = b.c - ac, bl = b.l - al;
    <span class="keyword">if</span> (bh > <span class="number">180</span>) bh -= <span class="number">360</span>; <span class="keyword">else</span> <span class="keyword">if</span> (bh &lt; -<span class="number">180</span>) bh += <span class="number">360</span>;
    <span class="keyword">return</span> <span class="keyword">function</span>(t) {
      <span class="keyword">return</span> d3_hcl_lab(ah + bh * t, ac + bc * t, al + bl * t) + <span class="string">""</span>;
    };
  };
  d3.interpolateArray = <span class="keyword">function</span>(a, b) {
    <span class="keyword">var</span> x = [], c = [], na = a.length, nb = b.length, n0 = Math.min(a.length, b.length), i;
    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n0; ++i) x.push(d3.interpolate(a[i], b[i]));
    <span class="keyword">for</span> (; i &lt; na; ++i) c[i] = a[i];
    <span class="keyword">for</span> (; i &lt; nb; ++i) c[i] = b[i];
    <span class="keyword">return</span> <span class="keyword">function</span>(t) {
      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n0; ++i) c[i] = x[i](t);
      <span class="keyword">return</span> c;
    };
  };
  d3.interpolateObject = <span class="keyword">function</span>(a, b) {
    <span class="keyword">var</span> i = {}, c = {}, k;
    <span class="keyword">for</span> (k <span class="keyword">in</span> a) {
      <span class="keyword">if</span> (k <span class="keyword">in</span> b) {
        i[k] = d3_interpolateByName(k)(a[k], b[k]);
      } <span class="keyword">else</span> {
        c[k] = a[k];
      }
    }
    <span class="keyword">for</span> (k <span class="keyword">in</span> b) {
      <span class="keyword">if</span> (!(k <span class="keyword">in</span> a)) {
        c[k] = b[k];
      }
    }
    <span class="keyword">return</span> <span class="keyword">function</span>(t) {
      <span class="keyword">for</span> (k <span class="keyword">in</span> i) c[k] = i[k](t);
      <span class="keyword">return</span> c;
    };
  };
  <span class="keyword">var</span> d3_interpolate_number = <span class="regexp">/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g</span>;
  d3.interpolators = [ d3.interpolateObject, <span class="keyword">function</span>(a, b) {
    <span class="keyword">return</span> b <span class="keyword">instanceof</span> Array &amp;&amp; d3.interpolateArray(a, b);
  }, <span class="keyword">function</span>(a, b) {
    <span class="keyword">return</span> (<span class="keyword">typeof</span> a === <span class="string">"string"</span> || <span class="keyword">typeof</span> b === <span class="string">"string"</span>) &amp;&amp; d3.interpolateString(a + <span class="string">""</span>, b + <span class="string">""</span>);
  }, <span class="keyword">function</span>(a, b) {
    <span class="keyword">return</span> (<span class="keyword">typeof</span> b === <span class="string">"string"</span> ? d3_rgb_names.has(b) || <span class="regexp">/^(#|rgb\(|hsl\()/</span>.test(b) : b <span class="keyword">instanceof</span> d3_Color) &amp;&amp; d3.interpolateRgb(a, b);
  }, <span class="keyword">function</span>(a, b) {
    <span class="keyword">return</span> !isNaN(a = +a) &amp;&amp; !isNaN(b = +b) &amp;&amp; d3.interpolateNumber(a, b);
  } ];
  d3_Color.prototype.toString = <span class="keyword">function</span>() {
    <span class="keyword">return</span> <span class="keyword">this</span>.rgb() + <span class="string">""</span>;
  };
  d3.rgb = <span class="keyword">function</span>(r, g, b) {
    <span class="keyword">return</span> arguments.length === <span class="number">1</span> ? r <span class="keyword">instanceof</span> d3_Rgb ? d3_rgb(r.r, r.g, r.b) : d3_rgb_parse(<span class="string">""</span> + r, d3_rgb, d3_hsl_rgb) : d3_rgb(~~r, ~~g, ~~b);
  };
  <span class="keyword">var</span> d3_rgbPrototype = d3_Rgb.prototype = <span class="keyword">new</span> d3_Color;
  d3_rgbPrototype.brighter = <span class="keyword">function</span>(k) {
    k = Math.pow(<span class="number">.7</span>, arguments.length ? k : <span class="number">1</span>);
    <span class="keyword">var</span> r = <span class="keyword">this</span>.r, g = <span class="keyword">this</span>.g, b = <span class="keyword">this</span>.b, i = <span class="number">30</span>;
    <span class="keyword">if</span> (!r &amp;&amp; !g &amp;&amp; !b) <span class="keyword">return</span> d3_rgb(i, i, i);
    <span class="keyword">if</span> (r &amp;&amp; r &lt; i) r = i;
    <span class="keyword">if</span> (g &amp;&amp; g &lt; i) g = i;
    <span class="keyword">if</span> (b &amp;&amp; b &lt; i) b = i;
    <span class="keyword">return</span> d3_rgb(Math.min(<span class="number">255</span>, Math.floor(r / k)), Math.min(<span class="number">255</span>, Math.floor(g / k)), Math.min(<span class="number">255</span>, Math.floor(b / k)));
  };
  d3_rgbPrototype.darker = <span class="keyword">function</span>(k) {
    k = Math.pow(<span class="number">.7</span>, arguments.length ? k : <span class="number">1</span>);
    <span class="keyword">return</span> d3_rgb(Math.floor(k * <span class="keyword">this</span>.r), Math.floor(k * <span class="keyword">this</span>.g), Math.floor(k * <span class="keyword">this</span>.b));
  };
  d3_rgbPrototype.hsl = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3_rgb_hsl(<span class="keyword">this</span>.r, <span class="keyword">this</span>.g, <span class="keyword">this</span>.b);
  };
  d3_rgbPrototype.toString = <span class="keyword">function</span>() {
    <span class="keyword">return</span> <span class="string">"#"</span> + d3_rgb_hex(<span class="keyword">this</span>.r) + d3_rgb_hex(<span class="keyword">this</span>.g) + d3_rgb_hex(<span class="keyword">this</span>.b);
  };
  <span class="keyword">var</span> d3_rgb_names = d3.map({
    aliceblue: <span class="string">"#f0f8ff"</span>,
    antiquewhite: <span class="string">"#faebd7"</span>,
    aqua: <span class="string">"#00ffff"</span>,
    aquamarine: <span class="string">"#7fffd4"</span>,
    azure: <span class="string">"#f0ffff"</span>,
    beige: <span class="string">"#f5f5dc"</span>,
    bisque: <span class="string">"#ffe4c4"</span>,
    black: <span class="string">"#000000"</span>,
    blanchedalmond: <span class="string">"#ffebcd"</span>,
    blue: <span class="string">"#0000ff"</span>,
    blueviolet: <span class="string">"#8a2be2"</span>,
    brown: <span class="string">"#a52a2a"</span>,
    burlywood: <span class="string">"#deb887"</span>,
    cadetblue: <span class="string">"#5f9ea0"</span>,
    chartreuse: <span class="string">"#7fff00"</span>,
    chocolate: <span class="string">"#d2691e"</span>,
    coral: <span class="string">"#ff7f50"</span>,
    cornflowerblue: <span class="string">"#6495ed"</span>,
    cornsilk: <span class="string">"#fff8dc"</span>,
    crimson: <span class="string">"#dc143c"</span>,
    cyan: <span class="string">"#00ffff"</span>,
    darkblue: <span class="string">"#00008b"</span>,
    darkcyan: <span class="string">"#008b8b"</span>,
    darkgoldenrod: <span class="string">"#b8860b"</span>,
    darkgray: <span class="string">"#a9a9a9"</span>,
    darkgreen: <span class="string">"#006400"</span>,
    darkgrey: <span class="string">"#a9a9a9"</span>,
    darkkhaki: <span class="string">"#bdb76b"</span>,
    darkmagenta: <span class="string">"#8b008b"</span>,
    darkolivegreen: <span class="string">"#556b2f"</span>,
    darkorange: <span class="string">"#ff8c00"</span>,
    darkorchid: <span class="string">"#9932cc"</span>,
    darkred: <span class="string">"#8b0000"</span>,
    darksalmon: <span class="string">"#e9967a"</span>,
    darkseagreen: <span class="string">"#8fbc8f"</span>,
    darkslateblue: <span class="string">"#483d8b"</span>,
    darkslategray: <span class="string">"#2f4f4f"</span>,
    darkslategrey: <span class="string">"#2f4f4f"</span>,
    darkturquoise: <span class="string">"#00ced1"</span>,
    darkviolet: <span class="string">"#9400d3"</span>,
    deeppink: <span class="string">"#ff1493"</span>,
    deepskyblue: <span class="string">"#00bfff"</span>,
    dimgray: <span class="string">"#696969"</span>,
    dimgrey: <span class="string">"#696969"</span>,
    dodgerblue: <span class="string">"#1e90ff"</span>,
    firebrick: <span class="string">"#b22222"</span>,
    floralwhite: <span class="string">"#fffaf0"</span>,
    forestgreen: <span class="string">"#228b22"</span>,
    fuchsia: <span class="string">"#ff00ff"</span>,
    gainsboro: <span class="string">"#dcdcdc"</span>,
    ghostwhite: <span class="string">"#f8f8ff"</span>,
    gold: <span class="string">"#ffd700"</span>,
    goldenrod: <span class="string">"#daa520"</span>,
    gray: <span class="string">"#808080"</span>,
    green: <span class="string">"#008000"</span>,
    greenyellow: <span class="string">"#adff2f"</span>,
    grey: <span class="string">"#808080"</span>,
    honeydew: <span class="string">"#f0fff0"</span>,
    hotpink: <span class="string">"#ff69b4"</span>,
    indianred: <span class="string">"#cd5c5c"</span>,
    indigo: <span class="string">"#4b0082"</span>,
    ivory: <span class="string">"#fffff0"</span>,
    khaki: <span class="string">"#f0e68c"</span>,
    lavender: <span class="string">"#e6e6fa"</span>,
    lavenderblush: <span class="string">"#fff0f5"</span>,
    lawngreen: <span class="string">"#7cfc00"</span>,
    lemonchiffon: <span class="string">"#fffacd"</span>,
    lightblue: <span class="string">"#add8e6"</span>,
    lightcoral: <span class="string">"#f08080"</span>,
    lightcyan: <span class="string">"#e0ffff"</span>,
    lightgoldenrodyellow: <span class="string">"#fafad2"</span>,
    lightgray: <span class="string">"#d3d3d3"</span>,
    lightgreen: <span class="string">"#90ee90"</span>,
    lightgrey: <span class="string">"#d3d3d3"</span>,
    lightpink: <span class="string">"#ffb6c1"</span>,
    lightsalmon: <span class="string">"#ffa07a"</span>,
    lightseagreen: <span class="string">"#20b2aa"</span>,
    lightskyblue: <span class="string">"#87cefa"</span>,
    lightslategray: <span class="string">"#778899"</span>,
    lightslategrey: <span class="string">"#778899"</span>,
    lightsteelblue: <span class="string">"#b0c4de"</span>,
    lightyellow: <span class="string">"#ffffe0"</span>,
    lime: <span class="string">"#00ff00"</span>,
    limegreen: <span class="string">"#32cd32"</span>,
    linen: <span class="string">"#faf0e6"</span>,
    magenta: <span class="string">"#ff00ff"</span>,
    maroon: <span class="string">"#800000"</span>,
    mediumaquamarine: <span class="string">"#66cdaa"</span>,
    mediumblue: <span class="string">"#0000cd"</span>,
    mediumorchid: <span class="string">"#ba55d3"</span>,
    mediumpurple: <span class="string">"#9370db"</span>,
    mediumseagreen: <span class="string">"#3cb371"</span>,
    mediumslateblue: <span class="string">"#7b68ee"</span>,
    mediumspringgreen: <span class="string">"#00fa9a"</span>,
    mediumturquoise: <span class="string">"#48d1cc"</span>,
    mediumvioletred: <span class="string">"#c71585"</span>,
    midnightblue: <span class="string">"#191970"</span>,
    mintcream: <span class="string">"#f5fffa"</span>,
    mistyrose: <span class="string">"#ffe4e1"</span>,
    moccasin: <span class="string">"#ffe4b5"</span>,
    navajowhite: <span class="string">"#ffdead"</span>,
    navy: <span class="string">"#000080"</span>,
    oldlace: <span class="string">"#fdf5e6"</span>,
    olive: <span class="string">"#808000"</span>,
    olivedrab: <span class="string">"#6b8e23"</span>,
    orange: <span class="string">"#ffa500"</span>,
    orangered: <span class="string">"#ff4500"</span>,
    orchid: <span class="string">"#da70d6"</span>,
    palegoldenrod: <span class="string">"#eee8aa"</span>,
    palegreen: <span class="string">"#98fb98"</span>,
    paleturquoise: <span class="string">"#afeeee"</span>,
    palevioletred: <span class="string">"#db7093"</span>,
    papayawhip: <span class="string">"#ffefd5"</span>,
    peachpuff: <span class="string">"#ffdab9"</span>,
    peru: <span class="string">"#cd853f"</span>,
    pink: <span class="string">"#ffc0cb"</span>,
    plum: <span class="string">"#dda0dd"</span>,
    powderblue: <span class="string">"#b0e0e6"</span>,
    purple: <span class="string">"#800080"</span>,
    red: <span class="string">"#ff0000"</span>,
    rosybrown: <span class="string">"#bc8f8f"</span>,
    royalblue: <span class="string">"#4169e1"</span>,
    saddlebrown: <span class="string">"#8b4513"</span>,
    salmon: <span class="string">"#fa8072"</span>,
    sandybrown: <span class="string">"#f4a460"</span>,
    seagreen: <span class="string">"#2e8b57"</span>,
    seashell: <span class="string">"#fff5ee"</span>,
    sienna: <span class="string">"#a0522d"</span>,
    silver: <span class="string">"#c0c0c0"</span>,
    skyblue: <span class="string">"#87ceeb"</span>,
    slateblue: <span class="string">"#6a5acd"</span>,
    slategray: <span class="string">"#708090"</span>,
    slategrey: <span class="string">"#708090"</span>,
    snow: <span class="string">"#fffafa"</span>,
    springgreen: <span class="string">"#00ff7f"</span>,
    steelblue: <span class="string">"#4682b4"</span>,
    tan: <span class="string">"#d2b48c"</span>,
    teal: <span class="string">"#008080"</span>,
    thistle: <span class="string">"#d8bfd8"</span>,
    tomato: <span class="string">"#ff6347"</span>,
    turquoise: <span class="string">"#40e0d0"</span>,
    violet: <span class="string">"#ee82ee"</span>,
    wheat: <span class="string">"#f5deb3"</span>,
    white: <span class="string">"#ffffff"</span>,
    whitesmoke: <span class="string">"#f5f5f5"</span>,
    yellow: <span class="string">"#ffff00"</span>,
    yellowgreen: <span class="string">"#9acd32"</span>
  });
  d3_rgb_names.forEach(<span class="keyword">function</span>(key, value) {
    d3_rgb_names.set(key, d3_rgb_parse(value, d3_rgb, d3_hsl_rgb));
  });
  d3.hsl = <span class="keyword">function</span>(h, s, l) {
    <span class="keyword">return</span> arguments.length === <span class="number">1</span> ? h <span class="keyword">instanceof</span> d3_Hsl ? d3_hsl(h.h, h.s, h.l) : d3_rgb_parse(<span class="string">""</span> + h, d3_rgb_hsl, d3_hsl) : d3_hsl(+h, +s, +l);
  };
  <span class="keyword">var</span> d3_hslPrototype = d3_Hsl.prototype = <span class="keyword">new</span> d3_Color;
  d3_hslPrototype.brighter = <span class="keyword">function</span>(k) {
    k = Math.pow(<span class="number">.7</span>, arguments.length ? k : <span class="number">1</span>);
    <span class="keyword">return</span> d3_hsl(<span class="keyword">this</span>.h, <span class="keyword">this</span>.s, <span class="keyword">this</span>.l / k);
  };
  d3_hslPrototype.darker = <span class="keyword">function</span>(k) {
    k = Math.pow(<span class="number">.7</span>, arguments.length ? k : <span class="number">1</span>);
    <span class="keyword">return</span> d3_hsl(<span class="keyword">this</span>.h, <span class="keyword">this</span>.s, k * <span class="keyword">this</span>.l);
  };
  d3_hslPrototype.rgb = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3_hsl_rgb(<span class="keyword">this</span>.h, <span class="keyword">this</span>.s, <span class="keyword">this</span>.l);
  };
  d3.hcl = <span class="keyword">function</span>(h, c, l) {
    <span class="keyword">return</span> arguments.length === <span class="number">1</span> ? h <span class="keyword">instanceof</span> d3_Hcl ? d3_hcl(h.h, h.c, h.l) : h <span class="keyword">instanceof</span> d3_Lab ? d3_lab_hcl(h.l, h.a, h.b) : d3_lab_hcl((h = d3_rgb_lab((h = d3.rgb(h)).r, h.g, h.b)).l, h.a, h.b) : d3_hcl(+h, +c, +l);
  };
  <span class="keyword">var</span> d3_hclPrototype = d3_Hcl.prototype = <span class="keyword">new</span> d3_Color;
  d3_hclPrototype.brighter = <span class="keyword">function</span>(k) {
    <span class="keyword">return</span> d3_hcl(<span class="keyword">this</span>.h, <span class="keyword">this</span>.c, Math.min(<span class="number">100</span>, <span class="keyword">this</span>.l + d3_lab_K * (arguments.length ? k : <span class="number">1</span>)));
  };
  d3_hclPrototype.darker = <span class="keyword">function</span>(k) {
    <span class="keyword">return</span> d3_hcl(<span class="keyword">this</span>.h, <span class="keyword">this</span>.c, Math.max(<span class="number">0</span>, <span class="keyword">this</span>.l - d3_lab_K * (arguments.length ? k : <span class="number">1</span>)));
  };
  d3_hclPrototype.rgb = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3_hcl_lab(<span class="keyword">this</span>.h, <span class="keyword">this</span>.c, <span class="keyword">this</span>.l).rgb();
  };
  d3.lab = <span class="keyword">function</span>(l, a, b) {
    <span class="keyword">return</span> arguments.length === <span class="number">1</span> ? l <span class="keyword">instanceof</span> d3_Lab ? d3_lab(l.l, l.a, l.b) : l <span class="keyword">instanceof</span> d3_Hcl ? d3_hcl_lab(l.l, l.c, l.h) : d3_rgb_lab((l = d3.rgb(l)).r, l.g, l.b) : d3_lab(+l, +a, +b);
  };
  <span class="keyword">var</span> d3_lab_K = <span class="number">18</span>;
  <span class="keyword">var</span> d3_lab_X = <span class="number">.95047</span>, d3_lab_Y = <span class="number">1</span>, d3_lab_Z = <span class="number">1.08883</span>;
  <span class="keyword">var</span> d3_labPrototype = d3_Lab.prototype = <span class="keyword">new</span> d3_Color;
  d3_labPrototype.brighter = <span class="keyword">function</span>(k) {
    <span class="keyword">return</span> d3_lab(Math.min(<span class="number">100</span>, <span class="keyword">this</span>.l + d3_lab_K * (arguments.length ? k : <span class="number">1</span>)), <span class="keyword">this</span>.a, <span class="keyword">this</span>.b);
  };
  d3_labPrototype.darker = <span class="keyword">function</span>(k) {
    <span class="keyword">return</span> d3_lab(Math.max(<span class="number">0</span>, <span class="keyword">this</span>.l - d3_lab_K * (arguments.length ? k : <span class="number">1</span>)), <span class="keyword">this</span>.a, <span class="keyword">this</span>.b);
  };
  d3_labPrototype.rgb = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3_lab_rgb(<span class="keyword">this</span>.l, <span class="keyword">this</span>.a, <span class="keyword">this</span>.b);
  };
  <span class="keyword">var</span> d3_select = <span class="keyword">function</span>(s, n) {
    <span class="keyword">return</span> n.querySelector(s);
  }, d3_selectAll = <span class="keyword">function</span>(s, n) {
    <span class="keyword">return</span> n.querySelectorAll(s);
  }, d3_selectRoot = document.documentElement, d3_selectMatcher = d3_selectRoot.matchesSelector || d3_selectRoot.webkitMatchesSelector || d3_selectRoot.mozMatchesSelector || d3_selectRoot.msMatchesSelector || d3_selectRoot.oMatchesSelector, d3_selectMatches = <span class="keyword">function</span>(n, s) {
    <span class="keyword">return</span> d3_selectMatcher.call(n, s);
  };
  <span class="keyword">if</span> (<span class="keyword">typeof</span> Sizzle === <span class="string">"function"</span>) {
    d3_select = <span class="keyword">function</span>(s, n) {
      <span class="keyword">return</span> Sizzle(s, n)[<span class="number">0</span>] || <span class="literal">null</span>;
    };
    d3_selectAll = <span class="keyword">function</span>(s, n) {
      <span class="keyword">return</span> Sizzle.uniqueSort(Sizzle(s, n));
    };
    d3_selectMatches = Sizzle.matchesSelector;
  }
  <span class="keyword">var</span> d3_selectionPrototype = [];
  d3.selection = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3_selectionRoot;
  };
  d3.selection.prototype = d3_selectionPrototype;
  d3_selectionPrototype.select = <span class="keyword">function</span>(selector) {
    <span class="keyword">var</span> subgroups = [], subgroup, subnode, group, node;
    <span class="keyword">if</span> (<span class="keyword">typeof</span> selector !== <span class="string">"function"</span>) selector = d3_selection_selector(selector);
    <span class="keyword">for</span> (<span class="keyword">var</span> j = -<span class="number">1</span>, m = <span class="keyword">this</span>.length; ++j &lt; m; ) {
      subgroups.push(subgroup = []);
      subgroup.parentNode = (group = <span class="keyword">this</span>[j]).parentNode;
      <span class="keyword">for</span> (<span class="keyword">var</span> i = -<span class="number">1</span>, n = group.length; ++i &lt; n; ) {
        <span class="keyword">if</span> (node = group[i]) {
          subgroup.push(subnode = selector.call(node, node.__data__, i));
          <span class="keyword">if</span> (subnode &amp;&amp; <span class="string">"__data__"</span> <span class="keyword">in</span> node) subnode.__data__ = node.__data__;
        } <span class="keyword">else</span> {
          subgroup.push(<span class="literal">null</span>);
        }
      }
    }
    <span class="keyword">return</span> d3_selection(subgroups);
  };
  d3_selectionPrototype.selectAll = <span class="keyword">function</span>(selector) {
    <span class="keyword">var</span> subgroups = [], subgroup, node;
    <span class="keyword">if</span> (<span class="keyword">typeof</span> selector !== <span class="string">"function"</span>) selector = d3_selection_selectorAll(selector);
    <span class="keyword">for</span> (<span class="keyword">var</span> j = -<span class="number">1</span>, m = <span class="keyword">this</span>.length; ++j &lt; m; ) {
      <span class="keyword">for</span> (<span class="keyword">var</span> group = <span class="keyword">this</span>[j], i = -<span class="number">1</span>, n = group.length; ++i &lt; n; ) {
        <span class="keyword">if</span> (node = group[i]) {
          subgroups.push(subgroup = d3_array(selector.call(node, node.__data__, i)));
          subgroup.parentNode = node;
        }
      }
    }
    <span class="keyword">return</span> d3_selection(subgroups);
  };
  d3_selectionPrototype.attr = <span class="keyword">function</span>(name, value) {
    <span class="keyword">if</span> (arguments.length &lt; <span class="number">2</span>) {
      <span class="keyword">if</span> (<span class="keyword">typeof</span> name === <span class="string">"string"</span>) {
        <span class="keyword">var</span> node = <span class="keyword">this</span>.node();
        name = d3.ns.qualify(name);
        <span class="keyword">return</span> name.local ? node.getAttributeNS(name.space, name.local) : node.getAttribute(name);
      }
      <span class="keyword">for</span> (value <span class="keyword">in</span> name) <span class="keyword">this</span>.each(d3_selection_attr(value, name[value]));
      <span class="keyword">return</span> <span class="keyword">this</span>;
    }
    <span class="keyword">return</span> <span class="keyword">this</span>.each(d3_selection_attr(name, value));
  };
  d3_selectionPrototype.classed = <span class="keyword">function</span>(name, value) {
    <span class="keyword">if</span> (arguments.length &lt; <span class="number">2</span>) {
      <span class="keyword">if</span> (<span class="keyword">typeof</span> name === <span class="string">"string"</span>) {
        <span class="keyword">var</span> node = <span class="keyword">this</span>.node(), n = (name = name.trim().split(<span class="regexp">/^|\s+/g</span>)).length, i = -<span class="number">1</span>;
        <span class="keyword">if</span> (value = node.classList) {
          <span class="keyword">while</span> (++i &lt; n) <span class="keyword">if</span> (!value.contains(name[i])) <span class="keyword">return</span> <span class="literal">false</span>;
        } <span class="keyword">else</span> {
          value = node.className;
          <span class="keyword">if</span> (value.baseVal != <span class="literal">null</span>) value = value.baseVal;
          <span class="keyword">while</span> (++i &lt; n) <span class="keyword">if</span> (!d3_selection_classedRe(name[i]).test(value)) <span class="keyword">return</span> <span class="literal">false</span>;
        }
        <span class="keyword">return</span> <span class="literal">true</span>;
      }
      <span class="keyword">for</span> (value <span class="keyword">in</span> name) <span class="keyword">this</span>.each(d3_selection_classed(value, name[value]));
      <span class="keyword">return</span> <span class="keyword">this</span>;
    }
    <span class="keyword">return</span> <span class="keyword">this</span>.each(d3_selection_classed(name, value));
  };
  d3_selectionPrototype.style = <span class="keyword">function</span>(name, value, priority) {
    <span class="keyword">var</span> n = arguments.length;
    <span class="keyword">if</span> (n &lt; <span class="number">3</span>) {
      <span class="keyword">if</span> (<span class="keyword">typeof</span> name !== <span class="string">"string"</span>) {
        <span class="keyword">if</span> (n &lt; <span class="number">2</span>) value = <span class="string">""</span>;
        <span class="keyword">for</span> (priority <span class="keyword">in</span> name) <span class="keyword">this</span>.each(d3_selection_style(priority, name[priority], value));
        <span class="keyword">return</span> <span class="keyword">this</span>;
      }
      <span class="keyword">if</span> (n &lt; <span class="number">2</span>) <span class="keyword">return</span> window.getComputedStyle(<span class="keyword">this</span>.node(), <span class="literal">null</span>).getPropertyValue(name);
      priority = <span class="string">""</span>;
    }
    <span class="keyword">return</span> <span class="keyword">this</span>.each(d3_selection_style(name, value, priority));
  };
  d3_selectionPrototype.property = <span class="keyword">function</span>(name, value) {
    <span class="keyword">if</span> (arguments.length &lt; <span class="number">2</span>) {
      <span class="keyword">if</span> (<span class="keyword">typeof</span> name === <span class="string">"string"</span>) <span class="keyword">return</span> <span class="keyword">this</span>.node()[name];
      <span class="keyword">for</span> (value <span class="keyword">in</span> name) <span class="keyword">this</span>.each(d3_selection_property(value, name[value]));
      <span class="keyword">return</span> <span class="keyword">this</span>;
    }
    <span class="keyword">return</span> <span class="keyword">this</span>.each(d3_selection_property(name, value));
  };
  d3_selectionPrototype.text = <span class="keyword">function</span>(value) {
    <span class="keyword">return</span> arguments.length &lt; <span class="number">1</span> ? <span class="keyword">this</span>.node().textContent : <span class="keyword">this</span>.each(<span class="keyword">typeof</span> value === <span class="string">"function"</span> ? <span class="keyword">function</span>() {
      <span class="keyword">var</span> v = value.apply(<span class="keyword">this</span>, arguments);
      <span class="keyword">this</span>.textContent = v == <span class="literal">null</span> ? <span class="string">""</span> : v;
    } : value == <span class="literal">null</span> ? <span class="keyword">function</span>() {
      <span class="keyword">this</span>.textContent = <span class="string">""</span>;
    } : <span class="keyword">function</span>() {
      <span class="keyword">this</span>.textContent = value;
    });
  };
  d3_selectionPrototype.html = <span class="keyword">function</span>(value) {
    <span class="keyword">return</span> arguments.length &lt; <span class="number">1</span> ? <span class="keyword">this</span>.node().innerHTML : <span class="keyword">this</span>.each(<span class="keyword">typeof</span> value === <span class="string">"function"</span> ? <span class="keyword">function</span>() {
      <span class="keyword">var</span> v = value.apply(<span class="keyword">this</span>, arguments);
      <span class="keyword">this</span>.innerHTML = v == <span class="literal">null</span> ? <span class="string">""</span> : v;
    } : value == <span class="literal">null</span> ? <span class="keyword">function</span>() {
      <span class="keyword">this</span>.innerHTML = <span class="string">""</span>;
    } : <span class="keyword">function</span>() {
      <span class="keyword">this</span>.innerHTML = value;
    });
  };
  d3_selectionPrototype.append = <span class="keyword">function</span>(name) {
    <span class="function"><span class="keyword">function</span> <span class="title">append</span><span class="params">()</span> {</span>
      <span class="keyword">return</span> <span class="keyword">this</span>.appendChild(document.createElementNS(<span class="keyword">this</span>.namespaceURI, name));
    }
    <span class="function"><span class="keyword">function</span> <span class="title">appendNS</span><span class="params">()</span> {</span>
      <span class="keyword">return</span> <span class="keyword">this</span>.appendChild(document.createElementNS(name.space, name.local));
    }
    name = d3.ns.qualify(name);
    <span class="keyword">return</span> <span class="keyword">this</span>.select(name.local ? appendNS : append);
  };
  d3_selectionPrototype.insert = <span class="keyword">function</span>(name, before) {
    <span class="function"><span class="keyword">function</span> <span class="title">insert</span><span class="params">()</span> {</span>
      <span class="keyword">return</span> <span class="keyword">this</span>.insertBefore(document.createElementNS(<span class="keyword">this</span>.namespaceURI, name), d3_select(before, <span class="keyword">this</span>));
    }
    <span class="function"><span class="keyword">function</span> <span class="title">insertNS</span><span class="params">()</span> {</span>
      <span class="keyword">return</span> <span class="keyword">this</span>.insertBefore(document.createElementNS(name.space, name.local), d3_select(before, <span class="keyword">this</span>));
    }
    name = d3.ns.qualify(name);
    <span class="keyword">return</span> <span class="keyword">this</span>.select(name.local ? insertNS : insert);
  };
  d3_selectionPrototype.remove = <span class="keyword">function</span>() {
    <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="keyword">function</span>() {
      <span class="keyword">var</span> parent = <span class="keyword">this</span>.parentNode;
      <span class="keyword">if</span> (parent) parent.removeChild(<span class="keyword">this</span>);
    });
  };
  d3_selectionPrototype.data = <span class="keyword">function</span>(value, key) {
    <span class="function"><span class="keyword">function</span> <span class="title">bind</span><span class="params">(group, groupData)</span> {</span>
      <span class="keyword">var</span> i, n = group.length, m = groupData.length, n0 = Math.min(n, m), n1 = Math.max(n, m), updateNodes = [], enterNodes = [], exitNodes = [], node, nodeData;
      <span class="keyword">if</span> (key) {
        <span class="keyword">var</span> nodeByKeyValue = <span class="keyword">new</span> d3_Map, keyValues = [], keyValue, j = groupData.length;
        <span class="keyword">for</span> (i = -<span class="number">1</span>; ++i &lt; n; ) {
          keyValue = key.call(node = group[i], node.__data__, i);
          <span class="keyword">if</span> (nodeByKeyValue.has(keyValue)) {
            exitNodes[j++] = node;
          } <span class="keyword">else</span> {
            nodeByKeyValue.set(keyValue, node);
          }
          keyValues.push(keyValue);
        }
        <span class="keyword">for</span> (i = -<span class="number">1</span>; ++i &lt; m; ) {
          keyValue = key.call(groupData, nodeData = groupData[i], i);
          <span class="keyword">if</span> (nodeByKeyValue.has(keyValue)) {
            updateNodes[i] = node = nodeByKeyValue.get(keyValue);
            node.__data__ = nodeData;
            enterNodes[i] = exitNodes[i] = <span class="literal">null</span>;
          } <span class="keyword">else</span> {
            enterNodes[i] = d3_selection_dataNode(nodeData);
            updateNodes[i] = exitNodes[i] = <span class="literal">null</span>;
          }
          nodeByKeyValue.remove(keyValue);
        }
        <span class="keyword">for</span> (i = -<span class="number">1</span>; ++i &lt; n; ) {
          <span class="keyword">if</span> (nodeByKeyValue.has(keyValues[i])) {
            exitNodes[i] = group[i];
          }
        }
      } <span class="keyword">else</span> {
        <span class="keyword">for</span> (i = -<span class="number">1</span>; ++i &lt; n0; ) {
          node = group[i];
          nodeData = groupData[i];
          <span class="keyword">if</span> (node) {
            node.__data__ = nodeData;
            updateNodes[i] = node;
            enterNodes[i] = exitNodes[i] = <span class="literal">null</span>;
          } <span class="keyword">else</span> {
            enterNodes[i] = d3_selection_dataNode(nodeData);
            updateNodes[i] = exitNodes[i] = <span class="literal">null</span>;
          }
        }
        <span class="keyword">for</span> (; i &lt; m; ++i) {
          enterNodes[i] = d3_selection_dataNode(groupData[i]);
          updateNodes[i] = exitNodes[i] = <span class="literal">null</span>;
        }
        <span class="keyword">for</span> (; i &lt; n1; ++i) {
          exitNodes[i] = group[i];
          enterNodes[i] = updateNodes[i] = <span class="literal">null</span>;
        }
      }
      enterNodes.update = updateNodes;
      enterNodes.parentNode = updateNodes.parentNode = exitNodes.parentNode = group.parentNode;
      enter.push(enterNodes);
      update.push(updateNodes);
      exit.push(exitNodes);
    }
    <span class="keyword">var</span> i = -<span class="number">1</span>, n = <span class="keyword">this</span>.length, group, node;
    <span class="keyword">if</span> (!arguments.length) {
      value = <span class="keyword">new</span> Array(n = (group = <span class="keyword">this</span>[<span class="number">0</span>]).length);
      <span class="keyword">while</span> (++i &lt; n) {
        <span class="keyword">if</span> (node = group[i]) {
          value[i] = node.__data__;
        }
      }
      <span class="keyword">return</span> value;
    }
    <span class="keyword">var</span> enter = d3_selection_enter([]), update = d3_selection([]), exit = d3_selection([]);
    <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">"function"</span>) {
      <span class="keyword">while</span> (++i &lt; n) {
        bind(group = <span class="keyword">this</span>[i], value.call(group, group.parentNode.__data__, i));
      }
    } <span class="keyword">else</span> {
      <span class="keyword">while</span> (++i &lt; n) {
        bind(group = <span class="keyword">this</span>[i], value);
      }
    }
    update.enter = <span class="keyword">function</span>() {
      <span class="keyword">return</span> enter;
    };
    update.exit = <span class="keyword">function</span>() {
      <span class="keyword">return</span> exit;
    };
    <span class="keyword">return</span> update;
  };
  d3_selectionPrototype.datum = d3_selectionPrototype.map = <span class="keyword">function</span>(value) {
    <span class="keyword">return</span> arguments.length &lt; <span class="number">1</span> ? <span class="keyword">this</span>.property(<span class="string">"__data__"</span>) : <span class="keyword">this</span>.property(<span class="string">"__data__"</span>, value);
  };
  d3_selectionPrototype.filter = <span class="keyword">function</span>(filter) {
    <span class="keyword">var</span> subgroups = [], subgroup, group, node;
    <span class="keyword">if</span> (<span class="keyword">typeof</span> filter !== <span class="string">"function"</span>) filter = d3_selection_filter(filter);
    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>, m = <span class="keyword">this</span>.length; j &lt; m; j++) {
      subgroups.push(subgroup = []);
      subgroup.parentNode = (group = <span class="keyword">this</span>[j]).parentNode;
      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, n = group.length; i &lt; n; i++) {
        <span class="keyword">if</span> ((node = group[i]) &amp;&amp; filter.call(node, node.__data__, i)) {
          subgroup.push(node);
        }
      }
    }
    <span class="keyword">return</span> d3_selection(subgroups);
  };
  d3_selectionPrototype.order = <span class="keyword">function</span>() {
    <span class="keyword">for</span> (<span class="keyword">var</span> j = -<span class="number">1</span>, m = <span class="keyword">this</span>.length; ++j &lt; m; ) {
      <span class="keyword">for</span> (<span class="keyword">var</span> group = <span class="keyword">this</span>[j], i = group.length - <span class="number">1</span>, next = group[i], node; --i >= <span class="number">0</span>; ) {
        <span class="keyword">if</span> (node = group[i]) {
          <span class="keyword">if</span> (next &amp;&amp; next !== node.nextSibling) next.parentNode.insertBefore(node, next);
          next = node;
        }
      }
    }
    <span class="keyword">return</span> <span class="keyword">this</span>;
  };
  d3_selectionPrototype.sort = <span class="keyword">function</span>(comparator) {
    comparator = d3_selection_sortComparator.apply(<span class="keyword">this</span>, arguments);
    <span class="keyword">for</span> (<span class="keyword">var</span> j = -<span class="number">1</span>, m = <span class="keyword">this</span>.length; ++j &lt; m; ) <span class="keyword">this</span>[j].sort(comparator);
    <span class="keyword">return</span> <span class="keyword">this</span>.order();
  };
  d3_selectionPrototype.on = <span class="keyword">function</span>(type, listener, capture) {
    <span class="keyword">var</span> n = arguments.length;
    <span class="keyword">if</span> (n &lt; <span class="number">3</span>) {
      <span class="keyword">if</span> (<span class="keyword">typeof</span> type !== <span class="string">"string"</span>) {
        <span class="keyword">if</span> (n &lt; <span class="number">2</span>) listener = <span class="literal">false</span>;
        <span class="keyword">for</span> (capture <span class="keyword">in</span> type) <span class="keyword">this</span>.each(d3_selection_on(capture, type[capture], listener));
        <span class="keyword">return</span> <span class="keyword">this</span>;
      }
      <span class="keyword">if</span> (n &lt; <span class="number">2</span>) <span class="keyword">return</span> (n = <span class="keyword">this</span>.node()[<span class="string">"__on"</span> + type]) &amp;&amp; n._;
      capture = <span class="literal">false</span>;
    }
    <span class="keyword">return</span> <span class="keyword">this</span>.each(d3_selection_on(type, listener, capture));
  };
  d3_selectionPrototype.each = <span class="keyword">function</span>(callback) {
    <span class="keyword">return</span> d3_selection_each(<span class="keyword">this</span>, <span class="keyword">function</span>(node, i, j) {
      callback.call(node, node.__data__, i, j);
    });
  };
  d3_selectionPrototype.call = <span class="keyword">function</span>(callback) {
    callback.apply(<span class="keyword">this</span>, (arguments[<span class="number">0</span>] = <span class="keyword">this</span>, arguments));
    <span class="keyword">return</span> <span class="keyword">this</span>;
  };
  d3_selectionPrototype.empty = <span class="keyword">function</span>() {
    <span class="keyword">return</span> !<span class="keyword">this</span>.node();
  };
  d3_selectionPrototype.node = <span class="keyword">function</span>(callback) {
    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>, m = <span class="keyword">this</span>.length; j &lt; m; j++) {
      <span class="keyword">for</span> (<span class="keyword">var</span> group = <span class="keyword">this</span>[j], i = <span class="number">0</span>, n = group.length; i &lt; n; i++) {
        <span class="keyword">var</span> node = group[i];
        <span class="keyword">if</span> (node) <span class="keyword">return</span> node;
      }
    }
    <span class="keyword">return</span> <span class="literal">null</span>;
  };
  d3_selectionPrototype.transition = <span class="keyword">function</span>() {
    <span class="keyword">var</span> subgroups = [], subgroup, node;
    <span class="keyword">for</span> (<span class="keyword">var</span> j = -<span class="number">1</span>, m = <span class="keyword">this</span>.length; ++j &lt; m; ) {
      subgroups.push(subgroup = []);
      <span class="keyword">for</span> (<span class="keyword">var</span> group = <span class="keyword">this</span>[j], i = -<span class="number">1</span>, n = group.length; ++i &lt; n; ) {
        subgroup.push((node = group[i]) ? {
          node: node,
          delay: d3_transitionDelay,
          duration: d3_transitionDuration
        } : <span class="literal">null</span>);
      }
    }
    <span class="keyword">return</span> d3_transition(subgroups, d3_transitionId || ++d3_transitionNextId, Date.now());
  };
  <span class="keyword">var</span> d3_selectionRoot = d3_selection([ [ document ] ]);
  d3_selectionRoot[<span class="number">0</span>].parentNode = d3_selectRoot;
  d3.select = <span class="keyword">function</span>(selector) {
    <span class="keyword">return</span> <span class="keyword">typeof</span> selector === <span class="string">"string"</span> ? d3_selectionRoot.select(selector) : d3_selection([ [ selector ] ]);
  };
  d3.selectAll = <span class="keyword">function</span>(selector) {
    <span class="keyword">return</span> <span class="keyword">typeof</span> selector === <span class="string">"string"</span> ? d3_selectionRoot.selectAll(selector) : d3_selection([ d3_array(selector) ]);
  };
  <span class="keyword">var</span> d3_selection_enterPrototype = [];
  d3.selection.enter = d3_selection_enter;
  d3.selection.enter.prototype = d3_selection_enterPrototype;
  d3_selection_enterPrototype.append = d3_selectionPrototype.append;
  d3_selection_enterPrototype.insert = d3_selectionPrototype.insert;
  d3_selection_enterPrototype.empty = d3_selectionPrototype.empty;
  d3_selection_enterPrototype.node = d3_selectionPrototype.node;
  d3_selection_enterPrototype.select = <span class="keyword">function</span>(selector) {
    <span class="keyword">var</span> subgroups = [], subgroup, subnode, upgroup, group, node;
    <span class="keyword">for</span> (<span class="keyword">var</span> j = -<span class="number">1</span>, m = <span class="keyword">this</span>.length; ++j &lt; m; ) {
      upgroup = (group = <span class="keyword">this</span>[j]).update;
      subgroups.push(subgroup = []);
      subgroup.parentNode = group.parentNode;
      <span class="keyword">for</span> (<span class="keyword">var</span> i = -<span class="number">1</span>, n = group.length; ++i &lt; n; ) {
        <span class="keyword">if</span> (node = group[i]) {
          subgroup.push(upgroup[i] = subnode = selector.call(group.parentNode, node.__data__, i));
          subnode.__data__ = node.__data__;
        } <span class="keyword">else</span> {
          subgroup.push(<span class="literal">null</span>);
        }
      }
    }
    <span class="keyword">return</span> d3_selection(subgroups);
  };
  <span class="keyword">var</span> d3_transitionPrototype = [], d3_transitionNextId = <span class="number">0</span>, d3_transitionId = <span class="number">0</span>, d3_transitionDefaultDelay = <span class="number">0</span>, d3_transitionDefaultDuration = <span class="number">250</span>, d3_transitionDefaultEase = d3.ease(<span class="string">"cubic-in-out"</span>), d3_transitionDelay = d3_transitionDefaultDelay, d3_transitionDuration = d3_transitionDefaultDuration, d3_transitionEase = d3_transitionDefaultEase;
  d3_transitionPrototype.call = d3_selectionPrototype.call;
  d3.transition = <span class="keyword">function</span>(selection) {
    <span class="keyword">return</span> arguments.length ? d3_transitionId ? selection.transition() : selection : d3_selectionRoot.transition();
  };
  d3.transition.prototype = d3_transitionPrototype;
  d3_transitionPrototype.select = <span class="keyword">function</span>(selector) {
    <span class="keyword">var</span> subgroups = [], subgroup, subnode, node;
    <span class="keyword">if</span> (<span class="keyword">typeof</span> selector !== <span class="string">"function"</span>) selector = d3_selection_selector(selector);
    <span class="keyword">for</span> (<span class="keyword">var</span> j = -<span class="number">1</span>, m = <span class="keyword">this</span>.length; ++j &lt; m; ) {
      subgroups.push(subgroup = []);
      <span class="keyword">for</span> (<span class="keyword">var</span> group = <span class="keyword">this</span>[j], i = -<span class="number">1</span>, n = group.length; ++i &lt; n; ) {
        <span class="keyword">if</span> ((node = group[i]) &amp;&amp; (subnode = selector.call(node.node, node.node.__data__, i))) {
          <span class="keyword">if</span> (<span class="string">"__data__"</span> <span class="keyword">in</span> node.node) subnode.__data__ = node.node.__data__;
          subgroup.push({
            node: subnode,
            delay: node.delay,
            duration: node.duration
          });
        } <span class="keyword">else</span> {
          subgroup.push(<span class="literal">null</span>);
        }
      }
    }
    <span class="keyword">return</span> d3_transition(subgroups, <span class="keyword">this</span>.id, <span class="keyword">this</span>.time).ease(<span class="keyword">this</span>.ease());
  };
  d3_transitionPrototype.selectAll = <span class="keyword">function</span>(selector) {
    <span class="keyword">var</span> subgroups = [], subgroup, subnodes, node;
    <span class="keyword">if</span> (<span class="keyword">typeof</span> selector !== <span class="string">"function"</span>) selector = d3_selection_selectorAll(selector);
    <span class="keyword">for</span> (<span class="keyword">var</span> j = -<span class="number">1</span>, m = <span class="keyword">this</span>.length; ++j &lt; m; ) {
      <span class="keyword">for</span> (<span class="keyword">var</span> group = <span class="keyword">this</span>[j], i = -<span class="number">1</span>, n = group.length; ++i &lt; n; ) {
        <span class="keyword">if</span> (node = group[i]) {
          subnodes = selector.call(node.node, node.node.__data__, i);
          subgroups.push(subgroup = []);
          <span class="keyword">for</span> (<span class="keyword">var</span> k = -<span class="number">1</span>, o = subnodes.length; ++k &lt; o; ) {
            subgroup.push({
              node: subnodes[k],
              delay: node.delay,
              duration: node.duration
            });
          }
        }
      }
    }
    <span class="keyword">return</span> d3_transition(subgroups, <span class="keyword">this</span>.id, <span class="keyword">this</span>.time).ease(<span class="keyword">this</span>.ease());
  };
  d3_transitionPrototype.filter = <span class="keyword">function</span>(filter) {
    <span class="keyword">var</span> subgroups = [], subgroup, group, node;
    <span class="keyword">if</span> (<span class="keyword">typeof</span> filter !== <span class="string">"function"</span>) filter = d3_selection_filter(filter);
    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>, m = <span class="keyword">this</span>.length; j &lt; m; j++) {
      subgroups.push(subgroup = []);
      <span class="keyword">for</span> (<span class="keyword">var</span> group = <span class="keyword">this</span>[j], i = <span class="number">0</span>, n = group.length; i &lt; n; i++) {
        <span class="keyword">if</span> ((node = group[i]) &amp;&amp; filter.call(node.node, node.node.__data__, i)) {
          subgroup.push(node);
        }
      }
    }
    <span class="keyword">return</span> d3_transition(subgroups, <span class="keyword">this</span>.id, <span class="keyword">this</span>.time).ease(<span class="keyword">this</span>.ease());
  };
  d3_transitionPrototype.attr = <span class="keyword">function</span>(name, value) {
    <span class="keyword">if</span> (arguments.length &lt; <span class="number">2</span>) {
      <span class="keyword">for</span> (value <span class="keyword">in</span> name) <span class="keyword">this</span>.attrTween(value, d3_tweenByName(name[value], value));
      <span class="keyword">return</span> <span class="keyword">this</span>;
    }
    <span class="keyword">return</span> <span class="keyword">this</span>.attrTween(name, d3_tweenByName(value, name));
  };
  d3_transitionPrototype.attrTween = <span class="keyword">function</span>(nameNS, tween) {
    <span class="function"><span class="keyword">function</span> <span class="title">attrTween</span><span class="params">(d, i)</span> {</span>
      <span class="keyword">var</span> f = tween.call(<span class="keyword">this</span>, d, i, <span class="keyword">this</span>.getAttribute(name));
      <span class="keyword">return</span> f === d3_tweenRemove ? (<span class="keyword">this</span>.removeAttribute(name), <span class="literal">null</span>) : f &amp;&amp; <span class="keyword">function</span>(t) {
        <span class="keyword">this</span>.setAttribute(name, f(t));
      };
    }
    <span class="function"><span class="keyword">function</span> <span class="title">attrTweenNS</span><span class="params">(d, i)</span> {</span>
      <span class="keyword">var</span> f = tween.call(<span class="keyword">this</span>, d, i, <span class="keyword">this</span>.getAttributeNS(name.space, name.local));
      <span class="keyword">return</span> f === d3_tweenRemove ? (<span class="keyword">this</span>.removeAttributeNS(name.space, name.local), <span class="literal">null</span>) : f &amp;&amp; <span class="keyword">function</span>(t) {
        <span class="keyword">this</span>.setAttributeNS(name.space, name.local, f(t));
      };
    }
    <span class="keyword">var</span> name = d3.ns.qualify(nameNS);
    <span class="keyword">return</span> <span class="keyword">this</span>.tween(<span class="string">"attr."</span> + nameNS, name.local ? attrTweenNS : attrTween);
  };
  d3_transitionPrototype.style = <span class="keyword">function</span>(name, value, priority) {
    <span class="keyword">var</span> n = arguments.length;
    <span class="keyword">if</span> (n &lt; <span class="number">3</span>) {
      <span class="keyword">if</span> (<span class="keyword">typeof</span> name !== <span class="string">"string"</span>) {
        <span class="keyword">if</span> (n &lt; <span class="number">2</span>) value = <span class="string">""</span>;
        <span class="keyword">for</span> (priority <span class="keyword">in</span> name) <span class="keyword">this</span>.styleTween(priority, d3_tweenByName(name[priority], priority), value);
        <span class="keyword">return</span> <span class="keyword">this</span>;
      }
      priority = <span class="string">""</span>;
    }
    <span class="keyword">return</span> <span class="keyword">this</span>.styleTween(name, d3_tweenByName(value, name), priority);
  };
  d3_transitionPrototype.styleTween = <span class="keyword">function</span>(name, tween, priority) {
    <span class="keyword">if</span> (arguments.length &lt; <span class="number">3</span>) priority = <span class="string">""</span>;
    <span class="keyword">return</span> <span class="keyword">this</span>.tween(<span class="string">"style."</span> + name, <span class="keyword">function</span>(d, i) {
      <span class="keyword">var</span> f = tween.call(<span class="keyword">this</span>, d, i, window.getComputedStyle(<span class="keyword">this</span>, <span class="literal">null</span>).getPropertyValue(name));
      <span class="keyword">return</span> f === d3_tweenRemove ? (<span class="keyword">this</span>.style.removeProperty(name), <span class="literal">null</span>) : f &amp;&amp; <span class="keyword">function</span>(t) {
        <span class="keyword">this</span>.style.setProperty(name, f(t), priority);
      };
    });
  };
  d3_transitionPrototype.text = <span class="keyword">function</span>(value) {
    <span class="keyword">return</span> <span class="keyword">this</span>.tween(<span class="string">"text"</span>, <span class="keyword">function</span>(d, i) {
      <span class="keyword">this</span>.textContent = <span class="keyword">typeof</span> value === <span class="string">"function"</span> ? value.call(<span class="keyword">this</span>, d, i) : value;
    });
  };
  d3_transitionPrototype.remove = <span class="keyword">function</span>() {
    <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="string">"end.transition"</span>, <span class="keyword">function</span>() {
      <span class="keyword">var</span> p;
      <span class="keyword">if</span> (!<span class="keyword">this</span>.__transition__ &amp;&amp; (p = <span class="keyword">this</span>.parentNode)) p.removeChild(<span class="keyword">this</span>);
    });
  };
  d3_transitionPrototype.delay = <span class="keyword">function</span>(value) {
    <span class="keyword">return</span> d3_selection_each(<span class="keyword">this</span>, <span class="keyword">typeof</span> value === <span class="string">"function"</span> ? <span class="keyword">function</span>(node, i, j) {
      node.delay = value.call(node = node.node, node.__data__, i, j) | <span class="number">0</span>;
    } : (value = value | <span class="number">0</span>, <span class="keyword">function</span>(node) {
      node.delay = value;
    }));
  };
  d3_transitionPrototype.duration = <span class="keyword">function</span>(value) {
    <span class="keyword">return</span> d3_selection_each(<span class="keyword">this</span>, <span class="keyword">typeof</span> value === <span class="string">"function"</span> ? <span class="keyword">function</span>(node, i, j) {
      node.duration = Math.max(<span class="number">1</span>, value.call(node = node.node, node.__data__, i, j) | <span class="number">0</span>);
    } : (value = Math.max(<span class="number">1</span>, value | <span class="number">0</span>), <span class="keyword">function</span>(node) {
      node.duration = value;
    }));
  };
  d3_transitionPrototype.transition = <span class="keyword">function</span>() {
    <span class="keyword">return</span> <span class="keyword">this</span>.select(d3_this);
  };
  d3.tween = <span class="keyword">function</span>(b, interpolate) {
    <span class="function"><span class="keyword">function</span> <span class="title">tweenFunction</span><span class="params">(d, i, a)</span> {</span>
      <span class="keyword">var</span> v = b.call(<span class="keyword">this</span>, d, i);
      <span class="keyword">return</span> v == <span class="literal">null</span> ? a != <span class="string">""</span> &amp;&amp; d3_tweenRemove : a != v &amp;&amp; interpolate(a, v + <span class="string">""</span>);
    }
    <span class="function"><span class="keyword">function</span> <span class="title">tweenString</span><span class="params">(d, i, a)</span> {</span>
      <span class="keyword">return</span> a != b &amp;&amp; interpolate(a, b);
    }
    <span class="keyword">return</span> <span class="keyword">typeof</span> b === <span class="string">"function"</span> ? tweenFunction : b == <span class="literal">null</span> ? d3_tweenNull : (b += <span class="string">""</span>, tweenString);
  };
  <span class="keyword">var</span> d3_tweenRemove = {};
  <span class="keyword">var</span> d3_timer_id = <span class="number">0</span>, d3_timer_byId = {}, d3_timer_queue = <span class="literal">null</span>, d3_timer_interval, d3_timer_timeout;
  d3.timer = <span class="keyword">function</span>(callback, delay, then) {
    <span class="keyword">if</span> (arguments.length &lt; <span class="number">3</span>) {
      <span class="keyword">if</span> (arguments.length &lt; <span class="number">2</span>) delay = <span class="number">0</span>; <span class="keyword">else</span> <span class="keyword">if</span> (!isFinite(delay)) <span class="keyword">return</span>;
      then = Date.now();
    }
    <span class="keyword">var</span> timer = d3_timer_byId[callback.id];
    <span class="keyword">if</span> (timer &amp;&amp; timer.callback === callback) {
      timer.then = then;
      timer.delay = delay;
    } <span class="keyword">else</span> d3_timer_byId[callback.id = ++d3_timer_id] = d3_timer_queue = {
      callback: callback,
      then: then,
      delay: delay,
      next: d3_timer_queue
    };
    <span class="keyword">if</span> (!d3_timer_interval) {
      d3_timer_timeout = clearTimeout(d3_timer_timeout);
      d3_timer_interval = <span class="number">1</span>;
      d3_timer_frame(d3_timer_step);
    }
  };
  d3.timer.flush = <span class="keyword">function</span>() {
    <span class="keyword">var</span> elapsed, now = Date.now(), t1 = d3_timer_queue;
    <span class="keyword">while</span> (t1) {
      elapsed = now - t1.then;
      <span class="keyword">if</span> (!t1.delay) t1.flush = t1.callback(elapsed);
      t1 = t1.next;
    }
    d3_timer_flush();
  };
  <span class="keyword">var</span> d3_timer_frame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || <span class="keyword">function</span>(callback) {
    setTimeout(callback, <span class="number">17</span>);
  };
  d3.mouse = <span class="keyword">function</span>(container) {
    <span class="keyword">return</span> d3_mousePoint(container, d3_eventSource());
  };
  <span class="keyword">var</span> d3_mouse_bug44083 = <span class="regexp">/WebKit/</span>.test(navigator.userAgent) ? -<span class="number">1</span> : <span class="number">0</span>;
  d3.touches = <span class="keyword">function</span>(container, touches) {
    <span class="keyword">if</span> (arguments.length &lt; <span class="number">2</span>) touches = d3_eventSource().touches;
    <span class="keyword">return</span> touches ? d3_array(touches).map(<span class="keyword">function</span>(touch) {
      <span class="keyword">var</span> point = d3_mousePoint(container, touch);
      point.identifier = touch.identifier;
      <span class="keyword">return</span> point;
    }) : [];
  };
  d3.scale = {};
  d3.scale.linear = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3_scale_linear([ <span class="number">0</span>, <span class="number">1</span> ], [ <span class="number">0</span>, <span class="number">1</span> ], d3.interpolate, <span class="literal">false</span>);
  };
  d3.scale.log = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3_scale_log(d3.scale.linear(), d3_scale_logp);
  };
  <span class="keyword">var</span> d3_scale_logFormat = d3.format(<span class="string">".0e"</span>);
  d3_scale_logp.pow = <span class="keyword">function</span>(x) {
    <span class="keyword">return</span> Math.pow(<span class="number">10</span>, x);
  };
  d3_scale_logn.pow = <span class="keyword">function</span>(x) {
    <span class="keyword">return</span> -Math.pow(<span class="number">10</span>, -x);
  };
  d3.scale.pow = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3_scale_pow(d3.scale.linear(), <span class="number">1</span>);
  };
  d3.scale.sqrt = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3.scale.pow().exponent(<span class="number">.5</span>);
  };
  d3.scale.ordinal = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3_scale_ordinal([], {
      t: <span class="string">"range"</span>,
      a: [ [] ]
    });
  };
  d3.scale.category10 = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3.scale.ordinal().range(d3_category10);
  };
  d3.scale.category20 = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3.scale.ordinal().range(d3_category20);
  };
  d3.scale.category20b = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3.scale.ordinal().range(d3_category20b);
  };
  d3.scale.category20c = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3.scale.ordinal().range(d3_category20c);
  };
  <span class="keyword">var</span> d3_category10 = [ <span class="string">"#1f77b4"</span>, <span class="string">"#ff7f0e"</span>, <span class="string">"#2ca02c"</span>, <span class="string">"#d62728"</span>, <span class="string">"#9467bd"</span>, <span class="string">"#8c564b"</span>, <span class="string">"#e377c2"</span>, <span class="string">"#7f7f7f"</span>, <span class="string">"#bcbd22"</span>, <span class="string">"#17becf"</span> ];
  <span class="keyword">var</span> d3_category20 = [ <span class="string">"#1f77b4"</span>, <span class="string">"#aec7e8"</span>, <span class="string">"#ff7f0e"</span>, <span class="string">"#ffbb78"</span>, <span class="string">"#2ca02c"</span>, <span class="string">"#98df8a"</span>, <span class="string">"#d62728"</span>, <span class="string">"#ff9896"</span>, <span class="string">"#9467bd"</span>, <span class="string">"#c5b0d5"</span>, <span class="string">"#8c564b"</span>, <span class="string">"#c49c94"</span>, <span class="string">"#e377c2"</span>, <span class="string">"#f7b6d2"</span>, <span class="string">"#7f7f7f"</span>, <span class="string">"#c7c7c7"</span>, <span class="string">"#bcbd22"</span>, <span class="string">"#dbdb8d"</span>, <span class="string">"#17becf"</span>, <span class="string">"#9edae5"</span> ];
  <span class="keyword">var</span> d3_category20b = [ <span class="string">"#393b79"</span>, <span class="string">"#5254a3"</span>, <span class="string">"#6b6ecf"</span>, <span class="string">"#9c9ede"</span>, <span class="string">"#637939"</span>, <span class="string">"#8ca252"</span>, <span class="string">"#b5cf6b"</span>, <span class="string">"#cedb9c"</span>, <span class="string">"#8c6d31"</span>, <span class="string">"#bd9e39"</span>, <span class="string">"#e7ba52"</span>, <span class="string">"#e7cb94"</span>, <span class="string">"#843c39"</span>, <span class="string">"#ad494a"</span>, <span class="string">"#d6616b"</span>, <span class="string">"#e7969c"</span>, <span class="string">"#7b4173"</span>, <span class="string">"#a55194"</span>, <span class="string">"#ce6dbd"</span>, <span class="string">"#de9ed6"</span> ];
  <span class="keyword">var</span> d3_category20c = [ <span class="string">"#3182bd"</span>, <span class="string">"#6baed6"</span>, <span class="string">"#9ecae1"</span>, <span class="string">"#c6dbef"</span>, <span class="string">"#e6550d"</span>, <span class="string">"#fd8d3c"</span>, <span class="string">"#fdae6b"</span>, <span class="string">"#fdd0a2"</span>, <span class="string">"#31a354"</span>, <span class="string">"#74c476"</span>, <span class="string">"#a1d99b"</span>, <span class="string">"#c7e9c0"</span>, <span class="string">"#756bb1"</span>, <span class="string">"#9e9ac8"</span>, <span class="string">"#bcbddc"</span>, <span class="string">"#dadaeb"</span>, <span class="string">"#636363"</span>, <span class="string">"#969696"</span>, <span class="string">"#bdbdbd"</span>, <span class="string">"#d9d9d9"</span> ];
  d3.scale.quantile = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3_scale_quantile([], []);
  };
  d3.scale.quantize = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3_scale_quantize(<span class="number">0</span>, <span class="number">1</span>, [ <span class="number">0</span>, <span class="number">1</span> ]);
  };
  d3.scale.threshold = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3_scale_threshold([ <span class="number">.5</span> ], [ <span class="number">0</span>, <span class="number">1</span> ]);
  };
  d3.scale.identity = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3_scale_identity([ <span class="number">0</span>, <span class="number">1</span> ]);
  };
  d3.svg = {};
  d3.svg.arc = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">arc</span><span class="params">()</span> {</span>
      <span class="keyword">var</span> r0 = innerRadius.apply(<span class="keyword">this</span>, arguments), r1 = outerRadius.apply(<span class="keyword">this</span>, arguments), a0 = startAngle.apply(<span class="keyword">this</span>, arguments) + d3_svg_arcOffset, a1 = endAngle.apply(<span class="keyword">this</span>, arguments) + d3_svg_arcOffset, da = (a1 &lt; a0 &amp;&amp; (da = a0, a0 = a1, a1 = da), a1 - a0), df = da &lt; Math.PI ? <span class="string">"0"</span> : <span class="string">"1"</span>, c0 = Math.cos(a0), s0 = Math.sin(a0), c1 = Math.cos(a1), s1 = Math.sin(a1);
      <span class="keyword">return</span> da >= d3_svg_arcMax ? r0 ? <span class="string">"M0,"</span> + r1 + <span class="string">"A"</span> + r1 + <span class="string">","</span> + r1 + <span class="string">" 0 1,1 0,"</span> + -r1 + <span class="string">"A"</span> + r1 + <span class="string">","</span> + r1 + <span class="string">" 0 1,1 0,"</span> + r1 + <span class="string">"M0,"</span> + r0 + <span class="string">"A"</span> + r0 + <span class="string">","</span> + r0 + <span class="string">" 0 1,0 0,"</span> + -r0 + <span class="string">"A"</span> + r0 + <span class="string">","</span> + r0 + <span class="string">" 0 1,0 0,"</span> + r0 + <span class="string">"Z"</span> : <span class="string">"M0,"</span> + r1 + <span class="string">"A"</span> + r1 + <span class="string">","</span> + r1 + <span class="string">" 0 1,1 0,"</span> + -r1 + <span class="string">"A"</span> + r1 + <span class="string">","</span> + r1 + <span class="string">" 0 1,1 0,"</span> + r1 + <span class="string">"Z"</span> : r0 ? <span class="string">"M"</span> + r1 * c0 + <span class="string">","</span> + r1 * s0 + <span class="string">"A"</span> + r1 + <span class="string">","</span> + r1 + <span class="string">" 0 "</span> + df + <span class="string">",1 "</span> + r1 * c1 + <span class="string">","</span> + r1 * s1 + <span class="string">"L"</span> + r0 * c1 + <span class="string">","</span> + r0 * s1 + <span class="string">"A"</span> + r0 + <span class="string">","</span> + r0 + <span class="string">" 0 "</span> + df + <span class="string">",0 "</span> + r0 * c0 + <span class="string">","</span> + r0 * s0 + <span class="string">"Z"</span> : <span class="string">"M"</span> + r1 * c0 + <span class="string">","</span> + r1 * s0 + <span class="string">"A"</span> + r1 + <span class="string">","</span> + r1 + <span class="string">" 0 "</span> + df + <span class="string">",1 "</span> + r1 * c1 + <span class="string">","</span> + r1 * s1 + <span class="string">"L0,0"</span> + <span class="string">"Z"</span>;
    }
    <span class="keyword">var</span> innerRadius = d3_svg_arcInnerRadius, outerRadius = d3_svg_arcOuterRadius, startAngle = d3_svg_arcStartAngle, endAngle = d3_svg_arcEndAngle;
    arc.innerRadius = <span class="keyword">function</span>(v) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> innerRadius;
      innerRadius = d3_functor(v);
      <span class="keyword">return</span> arc;
    };
    arc.outerRadius = <span class="keyword">function</span>(v) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> outerRadius;
      outerRadius = d3_functor(v);
      <span class="keyword">return</span> arc;
    };
    arc.startAngle = <span class="keyword">function</span>(v) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> startAngle;
      startAngle = d3_functor(v);
      <span class="keyword">return</span> arc;
    };
    arc.endAngle = <span class="keyword">function</span>(v) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> endAngle;
      endAngle = d3_functor(v);
      <span class="keyword">return</span> arc;
    };
    arc.centroid = <span class="keyword">function</span>() {
      <span class="keyword">var</span> r = (innerRadius.apply(<span class="keyword">this</span>, arguments) + outerRadius.apply(<span class="keyword">this</span>, arguments)) / <span class="number">2</span>, a = (startAngle.apply(<span class="keyword">this</span>, arguments) + endAngle.apply(<span class="keyword">this</span>, arguments)) / <span class="number">2</span> + d3_svg_arcOffset;
      <span class="keyword">return</span> [ Math.cos(a) * r, Math.sin(a) * r ];
    };
    <span class="keyword">return</span> arc;
  };
  <span class="keyword">var</span> d3_svg_arcOffset = -Math.PI / <span class="number">2</span>, d3_svg_arcMax = <span class="number">2</span> * Math.PI - <span class="number">1e-6</span>;
  d3.svg.line = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3_svg_line(d3_identity);
  };
  <span class="keyword">var</span> d3_svg_lineInterpolators = d3.map({
    linear: d3_svg_lineLinear,
    <span class="string">"linear-closed"</span>: d3_svg_lineLinearClosed,
    <span class="string">"step-before"</span>: d3_svg_lineStepBefore,
    <span class="string">"step-after"</span>: d3_svg_lineStepAfter,
    basis: d3_svg_lineBasis,
    <span class="string">"basis-open"</span>: d3_svg_lineBasisOpen,
    <span class="string">"basis-closed"</span>: d3_svg_lineBasisClosed,
    bundle: d3_svg_lineBundle,
    cardinal: d3_svg_lineCardinal,
    <span class="string">"cardinal-open"</span>: d3_svg_lineCardinalOpen,
    <span class="string">"cardinal-closed"</span>: d3_svg_lineCardinalClosed,
    monotone: d3_svg_lineMonotone
  });
  d3_svg_lineInterpolators.forEach(<span class="keyword">function</span>(key, value) {
    value.key = key;
    value.closed = <span class="regexp">/-closed$/</span>.test(key);
  });
  <span class="keyword">var</span> d3_svg_lineBasisBezier1 = [ <span class="number">0</span>, <span class="number">2</span> / <span class="number">3</span>, <span class="number">1</span> / <span class="number">3</span>, <span class="number">0</span> ], d3_svg_lineBasisBezier2 = [ <span class="number">0</span>, <span class="number">1</span> / <span class="number">3</span>, <span class="number">2</span> / <span class="number">3</span>, <span class="number">0</span> ], d3_svg_lineBasisBezier3 = [ <span class="number">0</span>, <span class="number">1</span> / <span class="number">6</span>, <span class="number">2</span> / <span class="number">3</span>, <span class="number">1</span> / <span class="number">6</span> ];
  d3.svg.line.radial = <span class="keyword">function</span>() {
    <span class="keyword">var</span> line = d3_svg_line(d3_svg_lineRadial);
    line.radius = line.x, <span class="keyword">delete</span> line.x;
    line.angle = line.y, <span class="keyword">delete</span> line.y;
    <span class="keyword">return</span> line;
  };
  d3_svg_lineStepBefore.reverse = d3_svg_lineStepAfter;
  d3_svg_lineStepAfter.reverse = d3_svg_lineStepBefore;
  d3.svg.area = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3_svg_area(d3_identity);
  };
  d3.svg.area.radial = <span class="keyword">function</span>() {
    <span class="keyword">var</span> area = d3_svg_area(d3_svg_lineRadial);
    area.radius = area.x, <span class="keyword">delete</span> area.x;
    area.innerRadius = area.x0, <span class="keyword">delete</span> area.x0;
    area.outerRadius = area.x1, <span class="keyword">delete</span> area.x1;
    area.angle = area.y, <span class="keyword">delete</span> area.y;
    area.startAngle = area.y0, <span class="keyword">delete</span> area.y0;
    area.endAngle = area.y1, <span class="keyword">delete</span> area.y1;
    <span class="keyword">return</span> area;
  };
  d3.svg.chord = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">chord</span><span class="params">(d, i)</span> {</span>
      <span class="keyword">var</span> s = subgroup(<span class="keyword">this</span>, source, d, i), t = subgroup(<span class="keyword">this</span>, target, d, i);
      <span class="keyword">return</span> <span class="string">"M"</span> + s.p0 + arc(s.r, s.p1, s.a1 - s.a0) + (equals(s, t) ? curve(s.r, s.p1, s.r, s.p0) : curve(s.r, s.p1, t.r, t.p0) + arc(t.r, t.p1, t.a1 - t.a0) + curve(t.r, t.p1, s.r, s.p0)) + <span class="string">"Z"</span>;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">subgroup</span><span class="params">(self, f, d, i)</span> {</span>
      <span class="keyword">var</span> subgroup = f.call(self, d, i), r = radius.call(self, subgroup, i), a0 = startAngle.call(self, subgroup, i) + d3_svg_arcOffset, a1 = endAngle.call(self, subgroup, i) + d3_svg_arcOffset;
      <span class="keyword">return</span> {
        r: r,
        a0: a0,
        a1: a1,
        p0: [ r * Math.cos(a0), r * Math.sin(a0) ],
        p1: [ r * Math.cos(a1), r * Math.sin(a1) ]
      };
    }
    <span class="function"><span class="keyword">function</span> <span class="title">equals</span><span class="params">(a, b)</span> {</span>
      <span class="keyword">return</span> a.a0 == b.a0 &amp;&amp; a.a1 == b.a1;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">arc</span><span class="params">(r, p, a)</span> {</span>
      <span class="keyword">return</span> <span class="string">"A"</span> + r + <span class="string">","</span> + r + <span class="string">" 0 "</span> + +(a > Math.PI) + <span class="string">",1 "</span> + p;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">curve</span><span class="params">(r0, p0, r1, p1)</span> {</span>
      <span class="keyword">return</span> <span class="string">"Q 0,0 "</span> + p1;
    }
    <span class="keyword">var</span> source = d3_svg_chordSource, target = d3_svg_chordTarget, radius = d3_svg_chordRadius, startAngle = d3_svg_arcStartAngle, endAngle = d3_svg_arcEndAngle;
    chord.radius = <span class="keyword">function</span>(v) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> radius;
      radius = d3_functor(v);
      <span class="keyword">return</span> chord;
    };
    chord.source = <span class="keyword">function</span>(v) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> source;
      source = d3_functor(v);
      <span class="keyword">return</span> chord;
    };
    chord.target = <span class="keyword">function</span>(v) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> target;
      target = d3_functor(v);
      <span class="keyword">return</span> chord;
    };
    chord.startAngle = <span class="keyword">function</span>(v) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> startAngle;
      startAngle = d3_functor(v);
      <span class="keyword">return</span> chord;
    };
    chord.endAngle = <span class="keyword">function</span>(v) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> endAngle;
      endAngle = d3_functor(v);
      <span class="keyword">return</span> chord;
    };
    <span class="keyword">return</span> chord;
  };
  d3.svg.diagonal = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">diagonal</span><span class="params">(d, i)</span> {</span>
      <span class="keyword">var</span> p0 = source.call(<span class="keyword">this</span>, d, i), p3 = target.call(<span class="keyword">this</span>, d, i), m = (p0.y + p3.y) / <span class="number">2</span>, p = [ p0, {
        x: p0.x,
        y: m
      }, {
        x: p3.x,
        y: m
      }, p3 ];
      p = p.map(projection);
      <span class="keyword">return</span> <span class="string">"M"</span> + p[<span class="number">0</span>] + <span class="string">"C"</span> + p[<span class="number">1</span>] + <span class="string">" "</span> + p[<span class="number">2</span>] + <span class="string">" "</span> + p[<span class="number">3</span>];
    }
    <span class="keyword">var</span> source = d3_svg_chordSource, target = d3_svg_chordTarget, projection = d3_svg_diagonalProjection;
    diagonal.source = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> source;
      source = d3_functor(x);
      <span class="keyword">return</span> diagonal;
    };
    diagonal.target = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> target;
      target = d3_functor(x);
      <span class="keyword">return</span> diagonal;
    };
    diagonal.projection = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> projection;
      projection = x;
      <span class="keyword">return</span> diagonal;
    };
    <span class="keyword">return</span> diagonal;
  };
  d3.svg.diagonal.radial = <span class="keyword">function</span>() {
    <span class="keyword">var</span> diagonal = d3.svg.diagonal(), projection = d3_svg_diagonalProjection, projection_ = diagonal.projection;
    diagonal.projection = <span class="keyword">function</span>(x) {
      <span class="keyword">return</span> arguments.length ? projection_(d3_svg_diagonalRadialProjection(projection = x)) : projection;
    };
    <span class="keyword">return</span> diagonal;
  };
  d3.svg.mouse = d3.mouse;
  d3.svg.touches = d3.touches;
  d3.svg.symbol = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">symbol</span><span class="params">(d, i)</span> {</span>
      <span class="keyword">return</span> (d3_svg_symbols.get(type.call(<span class="keyword">this</span>, d, i)) || d3_svg_symbolCircle)(size.call(<span class="keyword">this</span>, d, i));
    }
    <span class="keyword">var</span> type = d3_svg_symbolType, size = d3_svg_symbolSize;
    symbol.type = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> type;
      type = d3_functor(x);
      <span class="keyword">return</span> symbol;
    };
    symbol.size = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> size;
      size = d3_functor(x);
      <span class="keyword">return</span> symbol;
    };
    <span class="keyword">return</span> symbol;
  };
  <span class="keyword">var</span> d3_svg_symbols = d3.map({
    circle: d3_svg_symbolCircle,
    cross: <span class="keyword">function</span>(size) {
      <span class="keyword">var</span> r = Math.sqrt(size / <span class="number">5</span>) / <span class="number">2</span>;
      <span class="keyword">return</span> <span class="string">"M"</span> + -<span class="number">3</span> * r + <span class="string">","</span> + -r + <span class="string">"H"</span> + -r + <span class="string">"V"</span> + -<span class="number">3</span> * r + <span class="string">"H"</span> + r + <span class="string">"V"</span> + -r + <span class="string">"H"</span> + <span class="number">3</span> * r + <span class="string">"V"</span> + r + <span class="string">"H"</span> + r + <span class="string">"V"</span> + <span class="number">3</span> * r + <span class="string">"H"</span> + -r + <span class="string">"V"</span> + r + <span class="string">"H"</span> + -<span class="number">3</span> * r + <span class="string">"Z"</span>;
    },
    diamond: <span class="keyword">function</span>(size) {
      <span class="keyword">var</span> ry = Math.sqrt(size / (<span class="number">2</span> * d3_svg_symbolTan30)), rx = ry * d3_svg_symbolTan30;
      <span class="keyword">return</span> <span class="string">"M0,"</span> + -ry + <span class="string">"L"</span> + rx + <span class="string">",0"</span> + <span class="string">" 0,"</span> + ry + <span class="string">" "</span> + -rx + <span class="string">",0"</span> + <span class="string">"Z"</span>;
    },
    square: <span class="keyword">function</span>(size) {
      <span class="keyword">var</span> r = Math.sqrt(size) / <span class="number">2</span>;
      <span class="keyword">return</span> <span class="string">"M"</span> + -r + <span class="string">","</span> + -r + <span class="string">"L"</span> + r + <span class="string">","</span> + -r + <span class="string">" "</span> + r + <span class="string">","</span> + r + <span class="string">" "</span> + -r + <span class="string">","</span> + r + <span class="string">"Z"</span>;
    },
    <span class="string">"triangle-down"</span>: <span class="keyword">function</span>(size) {
      <span class="keyword">var</span> rx = Math.sqrt(size / d3_svg_symbolSqrt3), ry = rx * d3_svg_symbolSqrt3 / <span class="number">2</span>;
      <span class="keyword">return</span> <span class="string">"M0,"</span> + ry + <span class="string">"L"</span> + rx + <span class="string">","</span> + -ry + <span class="string">" "</span> + -rx + <span class="string">","</span> + -ry + <span class="string">"Z"</span>;
    },
    <span class="string">"triangle-up"</span>: <span class="keyword">function</span>(size) {
      <span class="keyword">var</span> rx = Math.sqrt(size / d3_svg_symbolSqrt3), ry = rx * d3_svg_symbolSqrt3 / <span class="number">2</span>;
      <span class="keyword">return</span> <span class="string">"M0,"</span> + -ry + <span class="string">"L"</span> + rx + <span class="string">","</span> + ry + <span class="string">" "</span> + -rx + <span class="string">","</span> + ry + <span class="string">"Z"</span>;
    }
  });
  d3.svg.symbolTypes = d3_svg_symbols.keys();
  <span class="keyword">var</span> d3_svg_symbolSqrt3 = Math.sqrt(<span class="number">3</span>), d3_svg_symbolTan30 = Math.tan(<span class="number">30</span> * Math.PI / <span class="number">180</span>);
  d3.svg.axis = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">axis</span><span class="params">(g)</span> {</span>
      g.each(<span class="keyword">function</span>() {
        <span class="keyword">var</span> g = d3.select(<span class="keyword">this</span>);
        <span class="keyword">var</span> ticks = tickValues == <span class="literal">null</span> ? scale.ticks ? scale.ticks.apply(scale, tickArguments_) : scale.domain() : tickValues, tickFormat = tickFormat_ == <span class="literal">null</span> ? scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments_) : String : tickFormat_;
        <span class="keyword">var</span> subticks = d3_svg_axisSubdivide(scale, ticks, tickSubdivide), subtick = g.selectAll(<span class="string">".minor"</span>).data(subticks, String), subtickEnter = subtick.enter().insert(<span class="string">"line"</span>, <span class="string">"g"</span>).attr(<span class="string">"class"</span>, <span class="string">"tick minor"</span>).style(<span class="string">"opacity"</span>, <span class="number">1e-6</span>), subtickExit = d3.transition(subtick.exit()).style(<span class="string">"opacity"</span>, <span class="number">1e-6</span>).remove(), subtickUpdate = d3.transition(subtick).style(<span class="string">"opacity"</span>, <span class="number">1</span>);
        <span class="keyword">var</span> tick = g.selectAll(<span class="string">"g"</span>).data(ticks, String), tickEnter = tick.enter().insert(<span class="string">"g"</span>, <span class="string">"path"</span>).style(<span class="string">"opacity"</span>, <span class="number">1e-6</span>), tickExit = d3.transition(tick.exit()).style(<span class="string">"opacity"</span>, <span class="number">1e-6</span>).remove(), tickUpdate = d3.transition(tick).style(<span class="string">"opacity"</span>, <span class="number">1</span>), tickTransform;
        <span class="keyword">var</span> range = d3_scaleRange(scale), path = g.selectAll(<span class="string">".domain"</span>).data([ <span class="number">0</span> ]), pathEnter = path.enter().append(<span class="string">"path"</span>).attr(<span class="string">"class"</span>, <span class="string">"domain"</span>), pathUpdate = d3.transition(path);
        <span class="keyword">var</span> scale1 = scale.copy(), scale0 = <span class="keyword">this</span>.__chart__ || scale1;
        <span class="keyword">this</span>.__chart__ = scale1;
        tickEnter.append(<span class="string">"line"</span>).attr(<span class="string">"class"</span>, <span class="string">"tick"</span>);
        tickEnter.append(<span class="string">"text"</span>);
        <span class="keyword">var</span> lineEnter = tickEnter.select(<span class="string">"line"</span>), lineUpdate = tickUpdate.select(<span class="string">"line"</span>), text = tick.select(<span class="string">"text"</span>).text(tickFormat), textEnter = tickEnter.select(<span class="string">"text"</span>), textUpdate = tickUpdate.select(<span class="string">"text"</span>);
        <span class="keyword">switch</span> (orient) {
         <span class="keyword">case</span> <span class="string">"bottom"</span>:
          {
            tickTransform = d3_svg_axisX;
            subtickEnter.attr(<span class="string">"y2"</span>, tickMinorSize);
            subtickUpdate.attr(<span class="string">"x2"</span>, <span class="number">0</span>).attr(<span class="string">"y2"</span>, tickMinorSize);
            lineEnter.attr(<span class="string">"y2"</span>, tickMajorSize);
            textEnter.attr(<span class="string">"y"</span>, Math.max(tickMajorSize, <span class="number">0</span>) + tickPadding);
            lineUpdate.attr(<span class="string">"x2"</span>, <span class="number">0</span>).attr(<span class="string">"y2"</span>, tickMajorSize);
            textUpdate.attr(<span class="string">"x"</span>, <span class="number">0</span>).attr(<span class="string">"y"</span>, Math.max(tickMajorSize, <span class="number">0</span>) + tickPadding);
            text.attr(<span class="string">"dy"</span>, <span class="string">".71em"</span>).attr(<span class="string">"text-anchor"</span>, <span class="string">"middle"</span>);
            pathUpdate.attr(<span class="string">"d"</span>, <span class="string">"M"</span> + range[<span class="number">0</span>] + <span class="string">","</span> + tickEndSize + <span class="string">"V0H"</span> + range[<span class="number">1</span>] + <span class="string">"V"</span> + tickEndSize);
            <span class="keyword">break</span>;
          }
         <span class="keyword">case</span> <span class="string">"top"</span>:
          {
            tickTransform = d3_svg_axisX;
            subtickEnter.attr(<span class="string">"y2"</span>, -tickMinorSize);
            subtickUpdate.attr(<span class="string">"x2"</span>, <span class="number">0</span>).attr(<span class="string">"y2"</span>, -tickMinorSize);
            lineEnter.attr(<span class="string">"y2"</span>, -tickMajorSize);
            textEnter.attr(<span class="string">"y"</span>, -(Math.max(tickMajorSize, <span class="number">0</span>) + tickPadding));
            lineUpdate.attr(<span class="string">"x2"</span>, <span class="number">0</span>).attr(<span class="string">"y2"</span>, -tickMajorSize);
            textUpdate.attr(<span class="string">"x"</span>, <span class="number">0</span>).attr(<span class="string">"y"</span>, -(Math.max(tickMajorSize, <span class="number">0</span>) + tickPadding));
            text.attr(<span class="string">"dy"</span>, <span class="string">"0em"</span>).attr(<span class="string">"text-anchor"</span>, <span class="string">"middle"</span>);
            pathUpdate.attr(<span class="string">"d"</span>, <span class="string">"M"</span> + range[<span class="number">0</span>] + <span class="string">","</span> + -tickEndSize + <span class="string">"V0H"</span> + range[<span class="number">1</span>] + <span class="string">"V"</span> + -tickEndSize);
            <span class="keyword">break</span>;
          }
         <span class="keyword">case</span> <span class="string">"left"</span>:
          {
            tickTransform = d3_svg_axisY;
            subtickEnter.attr(<span class="string">"x2"</span>, -tickMinorSize);
            subtickUpdate.attr(<span class="string">"x2"</span>, -tickMinorSize).attr(<span class="string">"y2"</span>, <span class="number">0</span>);
            lineEnter.attr(<span class="string">"x2"</span>, -tickMajorSize);
            textEnter.attr(<span class="string">"x"</span>, -(Math.max(tickMajorSize, <span class="number">0</span>) + tickPadding));
            lineUpdate.attr(<span class="string">"x2"</span>, -tickMajorSize).attr(<span class="string">"y2"</span>, <span class="number">0</span>);
            textUpdate.attr(<span class="string">"x"</span>, -(Math.max(tickMajorSize, <span class="number">0</span>) + tickPadding)).attr(<span class="string">"y"</span>, <span class="number">0</span>);
            text.attr(<span class="string">"dy"</span>, <span class="string">".32em"</span>).attr(<span class="string">"text-anchor"</span>, <span class="string">"end"</span>);
            pathUpdate.attr(<span class="string">"d"</span>, <span class="string">"M"</span> + -tickEndSize + <span class="string">","</span> + range[<span class="number">0</span>] + <span class="string">"H0V"</span> + range[<span class="number">1</span>] + <span class="string">"H"</span> + -tickEndSize);
            <span class="keyword">break</span>;
          }
         <span class="keyword">case</span> <span class="string">"right"</span>:
          {
            tickTransform = d3_svg_axisY;
            subtickEnter.attr(<span class="string">"x2"</span>, tickMinorSize);
            subtickUpdate.attr(<span class="string">"x2"</span>, tickMinorSize).attr(<span class="string">"y2"</span>, <span class="number">0</span>);
            lineEnter.attr(<span class="string">"x2"</span>, tickMajorSize);
            textEnter.attr(<span class="string">"x"</span>, Math.max(tickMajorSize, <span class="number">0</span>) + tickPadding);
            lineUpdate.attr(<span class="string">"x2"</span>, tickMajorSize).attr(<span class="string">"y2"</span>, <span class="number">0</span>);
            textUpdate.attr(<span class="string">"x"</span>, Math.max(tickMajorSize, <span class="number">0</span>) + tickPadding).attr(<span class="string">"y"</span>, <span class="number">0</span>);
            text.attr(<span class="string">"dy"</span>, <span class="string">".32em"</span>).attr(<span class="string">"text-anchor"</span>, <span class="string">"start"</span>);
            pathUpdate.attr(<span class="string">"d"</span>, <span class="string">"M"</span> + tickEndSize + <span class="string">","</span> + range[<span class="number">0</span>] + <span class="string">"H0V"</span> + range[<span class="number">1</span>] + <span class="string">"H"</span> + tickEndSize);
            <span class="keyword">break</span>;
          }
        }
        <span class="keyword">if</span> (scale.ticks) {
          tickEnter.call(tickTransform, scale0);
          tickUpdate.call(tickTransform, scale1);
          tickExit.call(tickTransform, scale1);
          subtickEnter.call(tickTransform, scale0);
          subtickUpdate.call(tickTransform, scale1);
          subtickExit.call(tickTransform, scale1);
        } <span class="keyword">else</span> {
          <span class="keyword">var</span> dx = scale1.rangeBand() / <span class="number">2</span>, x = <span class="keyword">function</span>(d) {
            <span class="keyword">return</span> scale1(d) + dx;
          };
          tickEnter.call(tickTransform, x);
          tickUpdate.call(tickTransform, x);
        }
      });
    }
    <span class="keyword">var</span> scale = d3.scale.linear(), orient = <span class="string">"bottom"</span>, tickMajorSize = <span class="number">6</span>, tickMinorSize = <span class="number">6</span>, tickEndSize = <span class="number">6</span>, tickPadding = <span class="number">3</span>, tickArguments_ = [ <span class="number">10</span> ], tickValues = <span class="literal">null</span>, tickFormat_, tickSubdivide = <span class="number">0</span>;
    axis.scale = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> scale;
      scale = x;
      <span class="keyword">return</span> axis;
    };
    axis.orient = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> orient;
      orient = x;
      <span class="keyword">return</span> axis;
    };
    axis.ticks = <span class="keyword">function</span>() {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> tickArguments_;
      tickArguments_ = arguments;
      <span class="keyword">return</span> axis;
    };
    axis.tickValues = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> tickValues;
      tickValues = x;
      <span class="keyword">return</span> axis;
    };
    axis.tickFormat = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> tickFormat_;
      tickFormat_ = x;
      <span class="keyword">return</span> axis;
    };
    axis.tickSize = <span class="keyword">function</span>(x, y, z) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> tickMajorSize;
      <span class="keyword">var</span> n = arguments.length - <span class="number">1</span>;
      tickMajorSize = +x;
      tickMinorSize = n > <span class="number">1</span> ? +y : tickMajorSize;
      tickEndSize = n > <span class="number">0</span> ? +arguments[n] : tickMajorSize;
      <span class="keyword">return</span> axis;
    };
    axis.tickPadding = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> tickPadding;
      tickPadding = +x;
      <span class="keyword">return</span> axis;
    };
    axis.tickSubdivide = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> tickSubdivide;
      tickSubdivide = +x;
      <span class="keyword">return</span> axis;
    };
    <span class="keyword">return</span> axis;
  };
  d3.svg.brush = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">brush</span><span class="params">(g)</span> {</span>
      g.each(<span class="keyword">function</span>() {
        <span class="keyword">var</span> g = d3.select(<span class="keyword">this</span>), bg = g.selectAll(<span class="string">".background"</span>).data([ <span class="number">0</span> ]), fg = g.selectAll(<span class="string">".extent"</span>).data([ <span class="number">0</span> ]), tz = g.selectAll(<span class="string">".resize"</span>).data(resizes, String), e;
        g.style(<span class="string">"pointer-events"</span>, <span class="string">"all"</span>).on(<span class="string">"mousedown.brush"</span>, brushstart).on(<span class="string">"touchstart.brush"</span>, brushstart);
        bg.enter().append(<span class="string">"rect"</span>).attr(<span class="string">"class"</span>, <span class="string">"background"</span>).style(<span class="string">"visibility"</span>, <span class="string">"hidden"</span>).style(<span class="string">"cursor"</span>, <span class="string">"crosshair"</span>);
        fg.enter().append(<span class="string">"rect"</span>).attr(<span class="string">"class"</span>, <span class="string">"extent"</span>).style(<span class="string">"cursor"</span>, <span class="string">"move"</span>);
        tz.enter().append(<span class="string">"g"</span>).attr(<span class="string">"class"</span>, <span class="keyword">function</span>(d) {
          <span class="keyword">return</span> <span class="string">"resize "</span> + d;
        }).style(<span class="string">"cursor"</span>, <span class="keyword">function</span>(d) {
          <span class="keyword">return</span> d3_svg_brushCursor[d];
        }).append(<span class="string">"rect"</span>).attr(<span class="string">"x"</span>, <span class="keyword">function</span>(d) {
          <span class="keyword">return</span> <span class="regexp">/[ew]$/</span>.test(d) ? -<span class="number">3</span> : <span class="literal">null</span>;
        }).attr(<span class="string">"y"</span>, <span class="keyword">function</span>(d) {
          <span class="keyword">return</span> <span class="regexp">/^[ns]/</span>.test(d) ? -<span class="number">3</span> : <span class="literal">null</span>;
        }).attr(<span class="string">"width"</span>, <span class="number">6</span>).attr(<span class="string">"height"</span>, <span class="number">6</span>).style(<span class="string">"visibility"</span>, <span class="string">"hidden"</span>);
        tz.style(<span class="string">"display"</span>, brush.empty() ? <span class="string">"none"</span> : <span class="literal">null</span>);
        tz.exit().remove();
        <span class="keyword">if</span> (x) {
          e = d3_scaleRange(x);
          bg.attr(<span class="string">"x"</span>, e[<span class="number">0</span>]).attr(<span class="string">"width"</span>, e[<span class="number">1</span>] - e[<span class="number">0</span>]);
          redrawX(g);
        }
        <span class="keyword">if</span> (y) {
          e = d3_scaleRange(y);
          bg.attr(<span class="string">"y"</span>, e[<span class="number">0</span>]).attr(<span class="string">"height"</span>, e[<span class="number">1</span>] - e[<span class="number">0</span>]);
          redrawY(g);
        }
        redraw(g);
      });
    }
    <span class="function"><span class="keyword">function</span> <span class="title">redraw</span><span class="params">(g)</span> {</span>
      g.selectAll(<span class="string">".resize"</span>).attr(<span class="string">"transform"</span>, <span class="keyword">function</span>(d) {
        <span class="keyword">return</span> <span class="string">"translate("</span> + extent[+<span class="regexp">/e$/</span>.test(d)][<span class="number">0</span>] + <span class="string">","</span> + extent[+<span class="regexp">/^s/</span>.test(d)][<span class="number">1</span>] + <span class="string">")"</span>;
      });
    }
    <span class="function"><span class="keyword">function</span> <span class="title">redrawX</span><span class="params">(g)</span> {</span>
      g.select(<span class="string">".extent"</span>).attr(<span class="string">"x"</span>, extent[<span class="number">0</span>][<span class="number">0</span>]);
      g.selectAll(<span class="string">".extent,.n>rect,.s>rect"</span>).attr(<span class="string">"width"</span>, extent[<span class="number">1</span>][<span class="number">0</span>] - extent[<span class="number">0</span>][<span class="number">0</span>]);
    }
    <span class="function"><span class="keyword">function</span> <span class="title">redrawY</span><span class="params">(g)</span> {</span>
      g.select(<span class="string">".extent"</span>).attr(<span class="string">"y"</span>, extent[<span class="number">0</span>][<span class="number">1</span>]);
      g.selectAll(<span class="string">".extent,.e>rect,.w>rect"</span>).attr(<span class="string">"height"</span>, extent[<span class="number">1</span>][<span class="number">1</span>] - extent[<span class="number">0</span>][<span class="number">1</span>]);
    }
    <span class="function"><span class="keyword">function</span> <span class="title">brushstart</span><span class="params">()</span> {</span>
      <span class="function"><span class="keyword">function</span> <span class="title">mouse</span><span class="params">()</span> {</span>
        <span class="keyword">var</span> touches = d3.event.changedTouches;
        <span class="keyword">return</span> touches ? d3.touches(target, touches)[<span class="number">0</span>] : d3.mouse(target);
      }
      <span class="function"><span class="keyword">function</span> <span class="title">keydown</span><span class="params">()</span> {</span>
        <span class="keyword">if</span> (d3.event.keyCode == <span class="number">32</span>) {
          <span class="keyword">if</span> (!dragging) {
            center = <span class="literal">null</span>;
            origin[<span class="number">0</span>] -= extent[<span class="number">1</span>][<span class="number">0</span>];
            origin[<span class="number">1</span>] -= extent[<span class="number">1</span>][<span class="number">1</span>];
            dragging = <span class="number">2</span>;
          }
          d3_eventCancel();
        }
      }
      <span class="function"><span class="keyword">function</span> <span class="title">keyup</span><span class="params">()</span> {</span>
        <span class="keyword">if</span> (d3.event.keyCode == <span class="number">32</span> &amp;&amp; dragging == <span class="number">2</span>) {
          origin[<span class="number">0</span>] += extent[<span class="number">1</span>][<span class="number">0</span>];
          origin[<span class="number">1</span>] += extent[<span class="number">1</span>][<span class="number">1</span>];
          dragging = <span class="number">0</span>;
          d3_eventCancel();
        }
      }
      <span class="function"><span class="keyword">function</span> <span class="title">brushmove</span><span class="params">()</span> {</span>
        <span class="keyword">var</span> point = mouse(), moved = <span class="literal">false</span>;
        <span class="keyword">if</span> (offset) {
          point[<span class="number">0</span>] += offset[<span class="number">0</span>];
          point[<span class="number">1</span>] += offset[<span class="number">1</span>];
        }
        <span class="keyword">if</span> (!dragging) {
          <span class="keyword">if</span> (d3.event.altKey) {
            <span class="keyword">if</span> (!center) center = [ (extent[<span class="number">0</span>][<span class="number">0</span>] + extent[<span class="number">1</span>][<span class="number">0</span>]) / <span class="number">2</span>, (extent[<span class="number">0</span>][<span class="number">1</span>] + extent[<span class="number">1</span>][<span class="number">1</span>]) / <span class="number">2</span> ];
            origin[<span class="number">0</span>] = extent[+(point[<span class="number">0</span>] &lt; center[<span class="number">0</span>])][<span class="number">0</span>];
            origin[<span class="number">1</span>] = extent[+(point[<span class="number">1</span>] &lt; center[<span class="number">1</span>])][<span class="number">1</span>];
          } <span class="keyword">else</span> center = <span class="literal">null</span>;
        }
        <span class="keyword">if</span> (resizingX &amp;&amp; move1(point, x, <span class="number">0</span>)) {
          redrawX(g);
          moved = <span class="literal">true</span>;
        }
        <span class="keyword">if</span> (resizingY &amp;&amp; move1(point, y, <span class="number">1</span>)) {
          redrawY(g);
          moved = <span class="literal">true</span>;
        }
        <span class="keyword">if</span> (moved) {
          redraw(g);
          event_({
            type: <span class="string">"brush"</span>,
            mode: dragging ? <span class="string">"move"</span> : <span class="string">"resize"</span>
          });
        }
      }
      <span class="function"><span class="keyword">function</span> <span class="title">move1</span><span class="params">(point, scale, i)</span> {</span>
        <span class="keyword">var</span> range = d3_scaleRange(scale), r0 = range[<span class="number">0</span>], r1 = range[<span class="number">1</span>], position = origin[i], size = extent[<span class="number">1</span>][i] - extent[<span class="number">0</span>][i], min, max;
        <span class="keyword">if</span> (dragging) {
          r0 -= position;
          r1 -= size + position;
        }
        min = Math.max(r0, Math.min(r1, point[i]));
        <span class="keyword">if</span> (dragging) {
          max = (min += position) + size;
        } <span class="keyword">else</span> {
          <span class="keyword">if</span> (center) position = Math.max(r0, Math.min(r1, <span class="number">2</span> * center[i] - min));
          <span class="keyword">if</span> (position &lt; min) {
            max = min;
            min = position;
          } <span class="keyword">else</span> {
            max = position;
          }
        }
        <span class="keyword">if</span> (extent[<span class="number">0</span>][i] !== min || extent[<span class="number">1</span>][i] !== max) {
          extentDomain = <span class="literal">null</span>;
          extent[<span class="number">0</span>][i] = min;
          extent[<span class="number">1</span>][i] = max;
          <span class="keyword">return</span> <span class="literal">true</span>;
        }
      }
      <span class="function"><span class="keyword">function</span> <span class="title">brushend</span><span class="params">()</span> {</span>
        brushmove();
        g.style(<span class="string">"pointer-events"</span>, <span class="string">"all"</span>).selectAll(<span class="string">".resize"</span>).style(<span class="string">"display"</span>, brush.empty() ? <span class="string">"none"</span> : <span class="literal">null</span>);
        d3.select(<span class="string">"body"</span>).style(<span class="string">"cursor"</span>, <span class="literal">null</span>);
        w.on(<span class="string">"mousemove.brush"</span>, <span class="literal">null</span>).on(<span class="string">"mouseup.brush"</span>, <span class="literal">null</span>).on(<span class="string">"touchmove.brush"</span>, <span class="literal">null</span>).on(<span class="string">"touchend.brush"</span>, <span class="literal">null</span>).on(<span class="string">"keydown.brush"</span>, <span class="literal">null</span>).on(<span class="string">"keyup.brush"</span>, <span class="literal">null</span>);
        event_({
          type: <span class="string">"brushend"</span>
        });
        d3_eventCancel();
      }
      <span class="keyword">var</span> target = <span class="keyword">this</span>, eventTarget = d3.select(d3.event.target), event_ = event.of(target, arguments), g = d3.select(target), resizing = eventTarget.datum(), resizingX = !<span class="regexp">/^(n|s)$/</span>.test(resizing) &amp;&amp; x, resizingY = !<span class="regexp">/^(e|w)$/</span>.test(resizing) &amp;&amp; y, dragging = eventTarget.classed(<span class="string">"extent"</span>), center, origin = mouse(), offset;
      <span class="keyword">var</span> w = d3.select(window).on(<span class="string">"mousemove.brush"</span>, brushmove).on(<span class="string">"mouseup.brush"</span>, brushend).on(<span class="string">"touchmove.brush"</span>, brushmove).on(<span class="string">"touchend.brush"</span>, brushend).on(<span class="string">"keydown.brush"</span>, keydown).on(<span class="string">"keyup.brush"</span>, keyup);
      <span class="keyword">if</span> (dragging) {
        origin[<span class="number">0</span>] = extent[<span class="number">0</span>][<span class="number">0</span>] - origin[<span class="number">0</span>];
        origin[<span class="number">1</span>] = extent[<span class="number">0</span>][<span class="number">1</span>] - origin[<span class="number">1</span>];
      } <span class="keyword">else</span> <span class="keyword">if</span> (resizing) {
        <span class="keyword">var</span> ex = +<span class="regexp">/w$/</span>.test(resizing), ey = +<span class="regexp">/^n/</span>.test(resizing);
        offset = [ extent[<span class="number">1</span> - ex][<span class="number">0</span>] - origin[<span class="number">0</span>], extent[<span class="number">1</span> - ey][<span class="number">1</span>] - origin[<span class="number">1</span>] ];
        origin[<span class="number">0</span>] = extent[ex][<span class="number">0</span>];
        origin[<span class="number">1</span>] = extent[ey][<span class="number">1</span>];
      } <span class="keyword">else</span> <span class="keyword">if</span> (d3.event.altKey) center = origin.slice();
      g.style(<span class="string">"pointer-events"</span>, <span class="string">"none"</span>).selectAll(<span class="string">".resize"</span>).style(<span class="string">"display"</span>, <span class="literal">null</span>);
      d3.select(<span class="string">"body"</span>).style(<span class="string">"cursor"</span>, eventTarget.style(<span class="string">"cursor"</span>));
      event_({
        type: <span class="string">"brushstart"</span>
      });
      brushmove();
      d3_eventCancel();
    }
    <span class="keyword">var</span> event = d3_eventDispatch(brush, <span class="string">"brushstart"</span>, <span class="string">"brush"</span>, <span class="string">"brushend"</span>), x = <span class="literal">null</span>, y = <span class="literal">null</span>, resizes = d3_svg_brushResizes[<span class="number">0</span>], extent = [ [ <span class="number">0</span>, <span class="number">0</span> ], [ <span class="number">0</span>, <span class="number">0</span> ] ], extentDomain;
    brush.x = <span class="keyword">function</span>(z) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> x;
      x = z;
      resizes = d3_svg_brushResizes[!x &lt;&lt; <span class="number">1</span> | !y];
      <span class="keyword">return</span> brush;
    };
    brush.y = <span class="keyword">function</span>(z) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> y;
      y = z;
      resizes = d3_svg_brushResizes[!x &lt;&lt; <span class="number">1</span> | !y];
      <span class="keyword">return</span> brush;
    };
    brush.extent = <span class="keyword">function</span>(z) {
      <span class="keyword">var</span> x0, x1, y0, y1, t;
      <span class="keyword">if</span> (!arguments.length) {
        z = extentDomain || extent;
        <span class="keyword">if</span> (x) {
          x0 = z[<span class="number">0</span>][<span class="number">0</span>], x1 = z[<span class="number">1</span>][<span class="number">0</span>];
          <span class="keyword">if</span> (!extentDomain) {
            x0 = extent[<span class="number">0</span>][<span class="number">0</span>], x1 = extent[<span class="number">1</span>][<span class="number">0</span>];
            <span class="keyword">if</span> (x.invert) x0 = x.invert(x0), x1 = x.invert(x1);
            <span class="keyword">if</span> (x1 &lt; x0) t = x0, x0 = x1, x1 = t;
          }
        }
        <span class="keyword">if</span> (y) {
          y0 = z[<span class="number">0</span>][<span class="number">1</span>], y1 = z[<span class="number">1</span>][<span class="number">1</span>];
          <span class="keyword">if</span> (!extentDomain) {
            y0 = extent[<span class="number">0</span>][<span class="number">1</span>], y1 = extent[<span class="number">1</span>][<span class="number">1</span>];
            <span class="keyword">if</span> (y.invert) y0 = y.invert(y0), y1 = y.invert(y1);
            <span class="keyword">if</span> (y1 &lt; y0) t = y0, y0 = y1, y1 = t;
          }
        }
        <span class="keyword">return</span> x &amp;&amp; y ? [ [ x0, y0 ], [ x1, y1 ] ] : x ? [ x0, x1 ] : y &amp;&amp; [ y0, y1 ];
      }
      extentDomain = [ [ <span class="number">0</span>, <span class="number">0</span> ], [ <span class="number">0</span>, <span class="number">0</span> ] ];
      <span class="keyword">if</span> (x) {
        x0 = z[<span class="number">0</span>], x1 = z[<span class="number">1</span>];
        <span class="keyword">if</span> (y) x0 = x0[<span class="number">0</span>], x1 = x1[<span class="number">0</span>];
        extentDomain[<span class="number">0</span>][<span class="number">0</span>] = x0, extentDomain[<span class="number">1</span>][<span class="number">0</span>] = x1;
        <span class="keyword">if</span> (x.invert) x0 = x(x0), x1 = x(x1);
        <span class="keyword">if</span> (x1 &lt; x0) t = x0, x0 = x1, x1 = t;
        extent[<span class="number">0</span>][<span class="number">0</span>] = x0 | <span class="number">0</span>, extent[<span class="number">1</span>][<span class="number">0</span>] = x1 | <span class="number">0</span>;
      }
      <span class="keyword">if</span> (y) {
        y0 = z[<span class="number">0</span>], y1 = z[<span class="number">1</span>];
        <span class="keyword">if</span> (x) y0 = y0[<span class="number">1</span>], y1 = y1[<span class="number">1</span>];
        extentDomain[<span class="number">0</span>][<span class="number">1</span>] = y0, extentDomain[<span class="number">1</span>][<span class="number">1</span>] = y1;
        <span class="keyword">if</span> (y.invert) y0 = y(y0), y1 = y(y1);
        <span class="keyword">if</span> (y1 &lt; y0) t = y0, y0 = y1, y1 = t;
        extent[<span class="number">0</span>][<span class="number">1</span>] = y0 | <span class="number">0</span>, extent[<span class="number">1</span>][<span class="number">1</span>] = y1 | <span class="number">0</span>;
      }
      <span class="keyword">return</span> brush;
    };
    brush.clear = <span class="keyword">function</span>() {
      extentDomain = <span class="literal">null</span>;
      extent[<span class="number">0</span>][<span class="number">0</span>] = extent[<span class="number">0</span>][<span class="number">1</span>] = extent[<span class="number">1</span>][<span class="number">0</span>] = extent[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">0</span>;
      <span class="keyword">return</span> brush;
    };
    brush.empty = <span class="keyword">function</span>() {
      <span class="keyword">return</span> x &amp;&amp; extent[<span class="number">0</span>][<span class="number">0</span>] === extent[<span class="number">1</span>][<span class="number">0</span>] || y &amp;&amp; extent[<span class="number">0</span>][<span class="number">1</span>] === extent[<span class="number">1</span>][<span class="number">1</span>];
    };
    <span class="keyword">return</span> d3.rebind(brush, event, <span class="string">"on"</span>);
  };
  <span class="keyword">var</span> d3_svg_brushCursor = {
    n: <span class="string">"ns-resize"</span>,
    e: <span class="string">"ew-resize"</span>,
    s: <span class="string">"ns-resize"</span>,
    w: <span class="string">"ew-resize"</span>,
    nw: <span class="string">"nwse-resize"</span>,
    ne: <span class="string">"nesw-resize"</span>,
    se: <span class="string">"nwse-resize"</span>,
    sw: <span class="string">"nesw-resize"</span>
  };
  <span class="keyword">var</span> d3_svg_brushResizes = [ [ <span class="string">"n"</span>, <span class="string">"e"</span>, <span class="string">"s"</span>, <span class="string">"w"</span>, <span class="string">"nw"</span>, <span class="string">"ne"</span>, <span class="string">"se"</span>, <span class="string">"sw"</span> ], [ <span class="string">"e"</span>, <span class="string">"w"</span> ], [ <span class="string">"n"</span>, <span class="string">"s"</span> ], [] ];
  d3.behavior = {};
  d3.behavior.drag = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">drag</span><span class="params">()</span> {</span>
      <span class="keyword">this</span>.on(<span class="string">"mousedown.drag"</span>, mousedown).on(<span class="string">"touchstart.drag"</span>, mousedown);
    }
    <span class="function"><span class="keyword">function</span> <span class="title">mousedown</span><span class="params">()</span> {</span>
      <span class="function"><span class="keyword">function</span> <span class="title">point</span><span class="params">()</span> {</span>
        <span class="keyword">var</span> p = target.parentNode;
        <span class="keyword">return</span> touchId ? d3.touches(p).filter(<span class="keyword">function</span>(p) {
          <span class="keyword">return</span> p.identifier === touchId;
        })[<span class="number">0</span>] : d3.mouse(p);
      }
      <span class="function"><span class="keyword">function</span> <span class="title">dragmove</span><span class="params">()</span> {</span>
        <span class="keyword">if</span> (!target.parentNode) <span class="keyword">return</span> dragend();
        <span class="keyword">var</span> p = point(), dx = p[<span class="number">0</span>] - origin_[<span class="number">0</span>], dy = p[<span class="number">1</span>] - origin_[<span class="number">1</span>];
        moved |= dx | dy;
        origin_ = p;
        d3_eventCancel();
        event_({
          type: <span class="string">"drag"</span>,
          x: p[<span class="number">0</span>] + offset[<span class="number">0</span>],
          y: p[<span class="number">1</span>] + offset[<span class="number">1</span>],
          dx: dx,
          dy: dy
        });
      }
      <span class="function"><span class="keyword">function</span> <span class="title">dragend</span><span class="params">()</span> {</span>
        event_({
          type: <span class="string">"dragend"</span>
        });
        <span class="keyword">if</span> (moved) {
          d3_eventCancel();
          <span class="keyword">if</span> (d3.event.target === eventTarget) w.on(<span class="string">"click.drag"</span>, click, <span class="literal">true</span>);
        }
        w.on(touchId ? <span class="string">"touchmove.drag-"</span> + touchId : <span class="string">"mousemove.drag"</span>, <span class="literal">null</span>).on(touchId ? <span class="string">"touchend.drag-"</span> + touchId : <span class="string">"mouseup.drag"</span>, <span class="literal">null</span>);
      }
      <span class="function"><span class="keyword">function</span> <span class="title">click</span><span class="params">()</span> {</span>
        d3_eventCancel();
        w.on(<span class="string">"click.drag"</span>, <span class="literal">null</span>);
      }
      <span class="keyword">var</span> target = <span class="keyword">this</span>, event_ = event.of(target, arguments), eventTarget = d3.event.target, touchId = d3.event.touches &amp;&amp; d3.event.changedTouches[<span class="number">0</span>].identifier, offset, origin_ = point(), moved = <span class="number">0</span>;
      <span class="keyword">var</span> w = d3.select(window).on(touchId ? <span class="string">"touchmove.drag-"</span> + touchId : <span class="string">"mousemove.drag"</span>, dragmove).on(touchId ? <span class="string">"touchend.drag-"</span> + touchId : <span class="string">"mouseup.drag"</span>, dragend, <span class="literal">true</span>);
      <span class="keyword">if</span> (origin) {
        offset = origin.apply(target, arguments);
        offset = [ offset.x - origin_[<span class="number">0</span>], offset.y - origin_[<span class="number">1</span>] ];
      } <span class="keyword">else</span> {
        offset = [ <span class="number">0</span>, <span class="number">0</span> ];
      }
      <span class="keyword">if</span> (!touchId) d3_eventCancel();
      event_({
        type: <span class="string">"dragstart"</span>
      });
    }
    <span class="keyword">var</span> event = d3_eventDispatch(drag, <span class="string">"drag"</span>, <span class="string">"dragstart"</span>, <span class="string">"dragend"</span>), origin = <span class="literal">null</span>;
    drag.origin = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> origin;
      origin = x;
      <span class="keyword">return</span> drag;
    };
    <span class="keyword">return</span> d3.rebind(drag, event, <span class="string">"on"</span>);
  };
  d3.behavior.zoom = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">zoom</span><span class="params">()</span> {</span>
      <span class="keyword">this</span>.on(<span class="string">"mousedown.zoom"</span>, mousedown).on(<span class="string">"mousewheel.zoom"</span>, mousewheel).on(<span class="string">"mousemove.zoom"</span>, mousemove).on(<span class="string">"DOMMouseScroll.zoom"</span>, mousewheel).on(<span class="string">"dblclick.zoom"</span>, dblclick).on(<span class="string">"touchstart.zoom"</span>, touchstart).on(<span class="string">"touchmove.zoom"</span>, touchmove).on(<span class="string">"touchend.zoom"</span>, touchstart);
    }
    <span class="function"><span class="keyword">function</span> <span class="title">location</span><span class="params">(p)</span> {</span>
      <span class="keyword">return</span> [ (p[<span class="number">0</span>] - translate[<span class="number">0</span>]) / scale, (p[<span class="number">1</span>] - translate[<span class="number">1</span>]) / scale ];
    }
    <span class="function"><span class="keyword">function</span> <span class="title">point</span><span class="params">(l)</span> {</span>
      <span class="keyword">return</span> [ l[<span class="number">0</span>] * scale + translate[<span class="number">0</span>], l[<span class="number">1</span>] * scale + translate[<span class="number">1</span>] ];
    }
    <span class="function"><span class="keyword">function</span> <span class="title">scaleTo</span><span class="params">(s)</span> {</span>
      scale = Math.max(scaleExtent[<span class="number">0</span>], Math.min(scaleExtent[<span class="number">1</span>], s));
    }
    <span class="function"><span class="keyword">function</span> <span class="title">translateTo</span><span class="params">(p, l)</span> {</span>
      l = point(l);
      translate[<span class="number">0</span>] += p[<span class="number">0</span>] - l[<span class="number">0</span>];
      translate[<span class="number">1</span>] += p[<span class="number">1</span>] - l[<span class="number">1</span>];
    }
    <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span><span class="params">(event)</span> {</span>
      <span class="keyword">if</span> (x1) x1.domain(x0.range().map(<span class="keyword">function</span>(x) {
        <span class="keyword">return</span> (x - translate[<span class="number">0</span>]) / scale;
      }).map(x0.invert));
      <span class="keyword">if</span> (y1) y1.domain(y0.range().map(<span class="keyword">function</span>(y) {
        <span class="keyword">return</span> (y - translate[<span class="number">1</span>]) / scale;
      }).map(y0.invert));
      d3.event.preventDefault();
      event({
        type: <span class="string">"zoom"</span>,
        scale: scale,
        translate: translate
      });
    }
    <span class="function"><span class="keyword">function</span> <span class="title">mousedown</span><span class="params">()</span> {</span>
      <span class="function"><span class="keyword">function</span> <span class="title">mousemove</span><span class="params">()</span> {</span>
        moved = <span class="number">1</span>;
        translateTo(d3.mouse(target), l);
        dispatch(event_);
      }
      <span class="function"><span class="keyword">function</span> <span class="title">mouseup</span><span class="params">()</span> {</span>
        <span class="keyword">if</span> (moved) d3_eventCancel();
        w.on(<span class="string">"mousemove.zoom"</span>, <span class="literal">null</span>).on(<span class="string">"mouseup.zoom"</span>, <span class="literal">null</span>);
        <span class="keyword">if</span> (moved &amp;&amp; d3.event.target === eventTarget) w.on(<span class="string">"click.zoom"</span>, click, <span class="literal">true</span>);
      }
      <span class="function"><span class="keyword">function</span> <span class="title">click</span><span class="params">()</span> {</span>
        d3_eventCancel();
        w.on(<span class="string">"click.zoom"</span>, <span class="literal">null</span>);
      }
      <span class="keyword">var</span> target = <span class="keyword">this</span>, event_ = event.of(target, arguments), eventTarget = d3.event.target, moved = <span class="number">0</span>, w = d3.select(window).on(<span class="string">"mousemove.zoom"</span>, mousemove).on(<span class="string">"mouseup.zoom"</span>, mouseup), l = location(d3.mouse(target));
      window.focus();
      d3_eventCancel();
    }
    <span class="function"><span class="keyword">function</span> <span class="title">mousewheel</span><span class="params">()</span> {</span>
      <span class="keyword">if</span> (!translate0) translate0 = location(d3.mouse(<span class="keyword">this</span>));
      scaleTo(Math.pow(<span class="number">2</span>, d3_behavior_zoomDelta() * <span class="number">.002</span>) * scale);
      translateTo(d3.mouse(<span class="keyword">this</span>), translate0);
      dispatch(event.of(<span class="keyword">this</span>, arguments));
    }
    <span class="function"><span class="keyword">function</span> <span class="title">mousemove</span><span class="params">()</span> {</span>
      translate0 = <span class="literal">null</span>;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">dblclick</span><span class="params">()</span> {</span>
      <span class="keyword">var</span> p = d3.mouse(<span class="keyword">this</span>), l = location(p);
      scaleTo(d3.event.shiftKey ? scale / <span class="number">2</span> : scale * <span class="number">2</span>);
      translateTo(p, l);
      dispatch(event.of(<span class="keyword">this</span>, arguments));
    }
    <span class="function"><span class="keyword">function</span> <span class="title">touchstart</span><span class="params">()</span> {</span>
      <span class="keyword">var</span> touches = d3.touches(<span class="keyword">this</span>), now = Date.now();
      scale0 = scale;
      translate0 = {};
      touches.forEach(<span class="keyword">function</span>(t) {
        translate0[t.identifier] = location(t);
      });
      d3_eventCancel();
      <span class="keyword">if</span> (touches.length === <span class="number">1</span>) {
        <span class="keyword">if</span> (now - touchtime &lt; <span class="number">500</span>) {
          <span class="keyword">var</span> p = touches[<span class="number">0</span>], l = location(touches[<span class="number">0</span>]);
          scaleTo(scale * <span class="number">2</span>);
          translateTo(p, l);
          dispatch(event.of(<span class="keyword">this</span>, arguments));
        }
        touchtime = now;
      }
    }
    <span class="function"><span class="keyword">function</span> <span class="title">touchmove</span><span class="params">()</span> {</span>
      <span class="keyword">var</span> touches = d3.touches(<span class="keyword">this</span>), p0 = touches[<span class="number">0</span>], l0 = translate0[p0.identifier];
      <span class="keyword">if</span> (p1 = touches[<span class="number">1</span>]) {
        <span class="keyword">var</span> p1, l1 = translate0[p1.identifier];
        p0 = [ (p0[<span class="number">0</span>] + p1[<span class="number">0</span>]) / <span class="number">2</span>, (p0[<span class="number">1</span>] + p1[<span class="number">1</span>]) / <span class="number">2</span> ];
        l0 = [ (l0[<span class="number">0</span>] + l1[<span class="number">0</span>]) / <span class="number">2</span>, (l0[<span class="number">1</span>] + l1[<span class="number">1</span>]) / <span class="number">2</span> ];
        scaleTo(d3.event.scale * scale0);
      }
      translateTo(p0, l0);
      touchtime = <span class="literal">null</span>;
      dispatch(event.of(<span class="keyword">this</span>, arguments));
    }
    <span class="keyword">var</span> translate = [ <span class="number">0</span>, <span class="number">0</span> ], translate0, scale = <span class="number">1</span>, scale0, scaleExtent = d3_behavior_zoomInfinity, event = d3_eventDispatch(zoom, <span class="string">"zoom"</span>), x0, x1, y0, y1, touchtime;
    zoom.translate = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> translate;
      translate = x.map(Number);
      <span class="keyword">return</span> zoom;
    };
    zoom.scale = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> scale;
      scale = +x;
      <span class="keyword">return</span> zoom;
    };
    zoom.scaleExtent = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> scaleExtent;
      scaleExtent = x == <span class="literal">null</span> ? d3_behavior_zoomInfinity : x.map(Number);
      <span class="keyword">return</span> zoom;
    };
    zoom.x = <span class="keyword">function</span>(z) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> x1;
      x1 = z;
      x0 = z.copy();
      <span class="keyword">return</span> zoom;
    };
    zoom.y = <span class="keyword">function</span>(z) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> y1;
      y1 = z;
      y0 = z.copy();
      <span class="keyword">return</span> zoom;
    };
    <span class="keyword">return</span> d3.rebind(zoom, event, <span class="string">"on"</span>);
  };
  <span class="keyword">var</span> d3_behavior_zoomDiv, d3_behavior_zoomInfinity = [ <span class="number">0</span>, <span class="literal">Infinity</span> ];
  d3.layout = {};
  d3.layout.bundle = <span class="keyword">function</span>() {
    <span class="keyword">return</span> <span class="keyword">function</span>(links) {
      <span class="keyword">var</span> paths = [], i = -<span class="number">1</span>, n = links.length;
      <span class="keyword">while</span> (++i &lt; n) paths.push(d3_layout_bundlePath(links[i]));
      <span class="keyword">return</span> paths;
    };
  };
  d3.layout.chord = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">relayout</span><span class="params">()</span> {</span>
      <span class="keyword">var</span> subgroups = {}, groupSums = [], groupIndex = d3.range(n), subgroupIndex = [], k, x, x0, i, j;
      chords = [];
      groups = [];
      k = <span class="number">0</span>, i = -<span class="number">1</span>;
      <span class="keyword">while</span> (++i &lt; n) {
        x = <span class="number">0</span>, j = -<span class="number">1</span>;
        <span class="keyword">while</span> (++j &lt; n) {
          x += matrix[i][j];
        }
        groupSums.push(x);
        subgroupIndex.push(d3.range(n));
        k += x;
      }
      <span class="keyword">if</span> (sortGroups) {
        groupIndex.sort(<span class="keyword">function</span>(a, b) {
          <span class="keyword">return</span> sortGroups(groupSums[a], groupSums[b]);
        });
      }
      <span class="keyword">if</span> (sortSubgroups) {
        subgroupIndex.forEach(<span class="keyword">function</span>(d, i) {
          d.sort(<span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> sortSubgroups(matrix[i][a], matrix[i][b]);
          });
        });
      }
      k = (<span class="number">2</span> * Math.PI - padding * n) / k;
      x = <span class="number">0</span>, i = -<span class="number">1</span>;
      <span class="keyword">while</span> (++i &lt; n) {
        x0 = x, j = -<span class="number">1</span>;
        <span class="keyword">while</span> (++j &lt; n) {
          <span class="keyword">var</span> di = groupIndex[i], dj = subgroupIndex[di][j], v = matrix[di][dj], a0 = x, a1 = x += v * k;
          subgroups[di + <span class="string">"-"</span> + dj] = {
            index: di,
            subindex: dj,
            startAngle: a0,
            endAngle: a1,
            value: v
          };
        }
        groups[di] = {
          index: di,
          startAngle: x0,
          endAngle: x,
          value: (x - x0) / k
        };
        x += padding;
      }
      i = -<span class="number">1</span>;
      <span class="keyword">while</span> (++i &lt; n) {
        j = i - <span class="number">1</span>;
        <span class="keyword">while</span> (++j &lt; n) {
          <span class="keyword">var</span> source = subgroups[i + <span class="string">"-"</span> + j], target = subgroups[j + <span class="string">"-"</span> + i];
          <span class="keyword">if</span> (source.value || target.value) {
            chords.push(source.value &lt; target.value ? {
              source: target,
              target: source
            } : {
              source: source,
              target: target
            });
          }
        }
      }
      <span class="keyword">if</span> (sortChords) resort();
    }
    <span class="function"><span class="keyword">function</span> <span class="title">resort</span><span class="params">()</span> {</span>
      chords.sort(<span class="keyword">function</span>(a, b) {
        <span class="keyword">return</span> sortChords((a.source.value + a.target.value) / <span class="number">2</span>, (b.source.value + b.target.value) / <span class="number">2</span>);
      });
    }
    <span class="keyword">var</span> chord = {}, chords, groups, matrix, n, padding = <span class="number">0</span>, sortGroups, sortSubgroups, sortChords;
    chord.matrix = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> matrix;
      n = (matrix = x) &amp;&amp; matrix.length;
      chords = groups = <span class="literal">null</span>;
      <span class="keyword">return</span> chord;
    };
    chord.padding = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> padding;
      padding = x;
      chords = groups = <span class="literal">null</span>;
      <span class="keyword">return</span> chord;
    };
    chord.sortGroups = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> sortGroups;
      sortGroups = x;
      chords = groups = <span class="literal">null</span>;
      <span class="keyword">return</span> chord;
    };
    chord.sortSubgroups = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> sortSubgroups;
      sortSubgroups = x;
      chords = <span class="literal">null</span>;
      <span class="keyword">return</span> chord;
    };
    chord.sortChords = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> sortChords;
      sortChords = x;
      <span class="keyword">if</span> (chords) resort();
      <span class="keyword">return</span> chord;
    };
    chord.chords = <span class="keyword">function</span>() {
      <span class="keyword">if</span> (!chords) relayout();
      <span class="keyword">return</span> chords;
    };
    chord.groups = <span class="keyword">function</span>() {
      <span class="keyword">if</span> (!groups) relayout();
      <span class="keyword">return</span> groups;
    };
    <span class="keyword">return</span> chord;
  };
  d3.layout.force = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">repulse</span><span class="params">(node)</span> {</span>
      <span class="keyword">return</span> <span class="keyword">function</span>(quad, x1, y1, x2, y2) {
        <span class="keyword">if</span> (quad.point !== node) {
          <span class="keyword">var</span> dx = quad.cx - node.x, dy = quad.cy - node.y, dn = <span class="number">1</span> / Math.sqrt(dx * dx + dy * dy);
          <span class="keyword">if</span> ((x2 - x1) * dn &lt; theta) {
            <span class="keyword">var</span> k = quad.charge * dn * dn;
            node.px -= dx * k;
            node.py -= dy * k;
            <span class="keyword">return</span> <span class="literal">true</span>;
          }
          <span class="keyword">if</span> (quad.point &amp;&amp; isFinite(dn)) {
            <span class="keyword">var</span> k = quad.pointCharge * dn * dn;
            node.px -= dx * k;
            node.py -= dy * k;
          }
        }
        <span class="keyword">return</span> !quad.charge;
      };
    }
    <span class="function"><span class="keyword">function</span> <span class="title">dragmove</span><span class="params">(d)</span> {</span>
      d.px = d3.event.x;
      d.py = d3.event.y;
      force.resume();
    }
    <span class="keyword">var</span> force = {}, event = d3.dispatch(<span class="string">"start"</span>, <span class="string">"tick"</span>, <span class="string">"end"</span>), size = [ <span class="number">1</span>, <span class="number">1</span> ], drag, alpha, friction = <span class="number">.9</span>, linkDistance = d3_layout_forceLinkDistance, linkStrength = d3_layout_forceLinkStrength, charge = -<span class="number">30</span>, gravity = <span class="number">.1</span>, theta = <span class="number">.8</span>, interval, nodes = [], links = [], distances, strengths, charges;
    force.tick = <span class="keyword">function</span>() {
      <span class="keyword">if</span> ((alpha *= <span class="number">.99</span>) &lt; <span class="number">.005</span>) {
        event.end({
          type: <span class="string">"end"</span>,
          alpha: alpha = <span class="number">0</span>
        });
        <span class="keyword">return</span> <span class="literal">true</span>;
      }
      <span class="keyword">var</span> n = nodes.length, m = links.length, q, i, o, s, t, l, k, x, y;
      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; m; ++i) {
        o = links[i];
        s = o.source;
        t = o.target;
        x = t.x - s.x;
        y = t.y - s.y;
        <span class="keyword">if</span> (l = x * x + y * y) {
          l = alpha * strengths[i] * ((l = Math.sqrt(l)) - distances[i]) / l;
          x *= l;
          y *= l;
          t.x -= x * (k = s.weight / (t.weight + s.weight));
          t.y -= y * k;
          s.x += x * (k = <span class="number">1</span> - k);
          s.y += y * k;
        }
      }
      <span class="keyword">if</span> (k = alpha * gravity) {
        x = size[<span class="number">0</span>] / <span class="number">2</span>;
        y = size[<span class="number">1</span>] / <span class="number">2</span>;
        i = -<span class="number">1</span>;
        <span class="keyword">if</span> (k) <span class="keyword">while</span> (++i &lt; n) {
          o = nodes[i];
          o.x += (x - o.x) * k;
          o.y += (y - o.y) * k;
        }
      }
      <span class="keyword">if</span> (charge) {
        d3_layout_forceAccumulate(q = d3.geom.quadtree(nodes), alpha, charges);
        i = -<span class="number">1</span>;
        <span class="keyword">while</span> (++i &lt; n) {
          <span class="keyword">if</span> (!(o = nodes[i]).fixed) {
            q.visit(repulse(o));
          }
        }
      }
      i = -<span class="number">1</span>;
      <span class="keyword">while</span> (++i &lt; n) {
        o = nodes[i];
        <span class="keyword">if</span> (o.fixed) {
          o.x = o.px;
          o.y = o.py;
        } <span class="keyword">else</span> {
          o.x -= (o.px - (o.px = o.x)) * friction;
          o.y -= (o.py - (o.py = o.y)) * friction;
        }
      }
      event.tick({
        type: <span class="string">"tick"</span>,
        alpha: alpha
      });
    };
    force.nodes = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> nodes;
      nodes = x;
      <span class="keyword">return</span> force;
    };
    force.links = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> links;
      links = x;
      <span class="keyword">return</span> force;
    };
    force.size = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> size;
      size = x;
      <span class="keyword">return</span> force;
    };
    force.linkDistance = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> linkDistance;
      linkDistance = d3_functor(x);
      <span class="keyword">return</span> force;
    };
    force.distance = force.linkDistance;
    force.linkStrength = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> linkStrength;
      linkStrength = d3_functor(x);
      <span class="keyword">return</span> force;
    };
    force.friction = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> friction;
      friction = x;
      <span class="keyword">return</span> force;
    };
    force.charge = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> charge;
      charge = <span class="keyword">typeof</span> x === <span class="string">"function"</span> ? x : +x;
      <span class="keyword">return</span> force;
    };
    force.gravity = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> gravity;
      gravity = x;
      <span class="keyword">return</span> force;
    };
    force.theta = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> theta;
      theta = x;
      <span class="keyword">return</span> force;
    };
    force.alpha = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> alpha;
      <span class="keyword">if</span> (alpha) {
        <span class="keyword">if</span> (x > <span class="number">0</span>) alpha = x; <span class="keyword">else</span> alpha = <span class="number">0</span>;
      } <span class="keyword">else</span> <span class="keyword">if</span> (x > <span class="number">0</span>) {
        event.start({
          type: <span class="string">"start"</span>,
          alpha: alpha = x
        });
        d3.timer(force.tick);
      }
      <span class="keyword">return</span> force;
    };
    force.start = <span class="keyword">function</span>() {
      <span class="function"><span class="keyword">function</span> <span class="title">position</span><span class="params">(dimension, size)</span> {</span>
        <span class="keyword">var</span> neighbors = neighbor(i), j = -<span class="number">1</span>, m = neighbors.length, x;
        <span class="keyword">while</span> (++j &lt; m) <span class="keyword">if</span> (!isNaN(x = neighbors[j][dimension])) <span class="keyword">return</span> x;
        <span class="keyword">return</span> Math.random() * size;
      }
      <span class="function"><span class="keyword">function</span> <span class="title">neighbor</span><span class="params">()</span> {</span>
        <span class="keyword">if</span> (!neighbors) {
          neighbors = [];
          <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; n; ++j) {
            neighbors[j] = [];
          }
          <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; m; ++j) {
            <span class="keyword">var</span> o = links[j];
            neighbors[o.source.index].push(o.target);
            neighbors[o.target.index].push(o.source);
          }
        }
        <span class="keyword">return</span> neighbors[i];
      }
      <span class="keyword">var</span> i, j, n = nodes.length, m = links.length, w = size[<span class="number">0</span>], h = size[<span class="number">1</span>], neighbors, o;
      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; ++i) {
        (o = nodes[i]).index = i;
        o.weight = <span class="number">0</span>;
      }
      distances = [];
      strengths = [];
      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; m; ++i) {
        o = links[i];
        <span class="keyword">if</span> (<span class="keyword">typeof</span> o.source == <span class="string">"number"</span>) o.source = nodes[o.source];
        <span class="keyword">if</span> (<span class="keyword">typeof</span> o.target == <span class="string">"number"</span>) o.target = nodes[o.target];
        distances[i] = linkDistance.call(<span class="keyword">this</span>, o, i);
        strengths[i] = linkStrength.call(<span class="keyword">this</span>, o, i);
        ++o.source.weight;
        ++o.target.weight;
      }
      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; ++i) {
        o = nodes[i];
        <span class="keyword">if</span> (isNaN(o.x)) o.x = position(<span class="string">"x"</span>, w);
        <span class="keyword">if</span> (isNaN(o.y)) o.y = position(<span class="string">"y"</span>, h);
        <span class="keyword">if</span> (isNaN(o.px)) o.px = o.x;
        <span class="keyword">if</span> (isNaN(o.py)) o.py = o.y;
      }
      charges = [];
      <span class="keyword">if</span> (<span class="keyword">typeof</span> charge === <span class="string">"function"</span>) {
        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; ++i) {
          charges[i] = +charge.call(<span class="keyword">this</span>, nodes[i], i);
        }
      } <span class="keyword">else</span> {
        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; ++i) {
          charges[i] = charge;
        }
      }
      <span class="keyword">return</span> force.resume();
    };
    force.resume = <span class="keyword">function</span>() {
      <span class="keyword">return</span> force.alpha(<span class="number">.1</span>);
    };
    force.stop = <span class="keyword">function</span>() {
      <span class="keyword">return</span> force.alpha(<span class="number">0</span>);
    };
    force.drag = <span class="keyword">function</span>() {
      <span class="keyword">if</span> (!drag) drag = d3.behavior.drag().origin(d3_identity).on(<span class="string">"dragstart"</span>, d3_layout_forceDragstart).on(<span class="string">"drag"</span>, dragmove).on(<span class="string">"dragend"</span>, d3_layout_forceDragend);
      <span class="keyword">this</span>.on(<span class="string">"mouseover.force"</span>, d3_layout_forceMouseover).on(<span class="string">"mouseout.force"</span>, d3_layout_forceMouseout).call(drag);
    };
    <span class="keyword">return</span> d3.rebind(force, event, <span class="string">"on"</span>);
  };
  d3.layout.partition = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">position</span><span class="params">(node, x, dx, dy)</span> {</span>
      <span class="keyword">var</span> children = node.children;
      node.x = x;
      node.y = node.depth * dy;
      node.dx = dx;
      node.dy = dy;
      <span class="keyword">if</span> (children &amp;&amp; (n = children.length)) {
        <span class="keyword">var</span> i = -<span class="number">1</span>, n, c, d;
        dx = node.value ? dx / node.value : <span class="number">0</span>;
        <span class="keyword">while</span> (++i &lt; n) {
          position(c = children[i], x, d = c.value * dx, dy);
          x += d;
        }
      }
    }
    <span class="function"><span class="keyword">function</span> <span class="title">depth</span><span class="params">(node)</span> {</span>
      <span class="keyword">var</span> children = node.children, d = <span class="number">0</span>;
      <span class="keyword">if</span> (children &amp;&amp; (n = children.length)) {
        <span class="keyword">var</span> i = -<span class="number">1</span>, n;
        <span class="keyword">while</span> (++i &lt; n) d = Math.max(d, depth(children[i]));
      }
      <span class="keyword">return</span> <span class="number">1</span> + d;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">partition</span><span class="params">(d, i)</span> {</span>
      <span class="keyword">var</span> nodes = hierarchy.call(<span class="keyword">this</span>, d, i);
      position(nodes[<span class="number">0</span>], <span class="number">0</span>, size[<span class="number">0</span>], size[<span class="number">1</span>] / depth(nodes[<span class="number">0</span>]));
      <span class="keyword">return</span> nodes;
    }
    <span class="keyword">var</span> hierarchy = d3.layout.hierarchy(), size = [ <span class="number">1</span>, <span class="number">1</span> ];
    partition.size = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> size;
      size = x;
      <span class="keyword">return</span> partition;
    };
    <span class="keyword">return</span> d3_layout_hierarchyRebind(partition, hierarchy);
  };
  d3.layout.pie = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">pie</span><span class="params">(data, i)</span> {</span>
      <span class="keyword">var</span> values = data.map(<span class="keyword">function</span>(d, i) {
        <span class="keyword">return</span> +value.call(pie, d, i);
      });
      <span class="keyword">var</span> a = +(<span class="keyword">typeof</span> startAngle === <span class="string">"function"</span> ? startAngle.apply(<span class="keyword">this</span>, arguments) : startAngle);
      <span class="keyword">var</span> k = ((<span class="keyword">typeof</span> endAngle === <span class="string">"function"</span> ? endAngle.apply(<span class="keyword">this</span>, arguments) : endAngle) - startAngle) / d3.sum(values);
      <span class="keyword">var</span> index = d3.range(data.length);
      <span class="keyword">if</span> (sort != <span class="literal">null</span>) index.sort(sort === d3_layout_pieSortByValue ? <span class="keyword">function</span>(i, j) {
        <span class="keyword">return</span> values[j] - values[i];
      } : <span class="keyword">function</span>(i, j) {
        <span class="keyword">return</span> sort(data[i], data[j]);
      });
      <span class="keyword">var</span> arcs = [];
      index.forEach(<span class="keyword">function</span>(i) {
        <span class="keyword">var</span> d;
        arcs[i] = {
          data: data[i],
          value: d = values[i],
          startAngle: a,
          endAngle: a += d * k
        };
      });
      <span class="keyword">return</span> arcs;
    }
    <span class="keyword">var</span> value = Number, sort = d3_layout_pieSortByValue, startAngle = <span class="number">0</span>, endAngle = <span class="number">2</span> * Math.PI;
    pie.value = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> value;
      value = x;
      <span class="keyword">return</span> pie;
    };
    pie.sort = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> sort;
      sort = x;
      <span class="keyword">return</span> pie;
    };
    pie.startAngle = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> startAngle;
      startAngle = x;
      <span class="keyword">return</span> pie;
    };
    pie.endAngle = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> endAngle;
      endAngle = x;
      <span class="keyword">return</span> pie;
    };
    <span class="keyword">return</span> pie;
  };
  <span class="keyword">var</span> d3_layout_pieSortByValue = {};
  d3.layout.stack = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">stack</span><span class="params">(data, index)</span> {</span>
      <span class="keyword">var</span> series = data.map(<span class="keyword">function</span>(d, i) {
        <span class="keyword">return</span> values.call(stack, d, i);
      });
      <span class="keyword">var</span> points = series.map(<span class="keyword">function</span>(d, i) {
        <span class="keyword">return</span> d.map(<span class="keyword">function</span>(v, i) {
          <span class="keyword">return</span> [ x.call(stack, v, i), y.call(stack, v, i) ];
        });
      });
      <span class="keyword">var</span> orders = order.call(stack, points, index);
      series = d3.permute(series, orders);
      points = d3.permute(points, orders);
      <span class="keyword">var</span> offsets = offset.call(stack, points, index);
      <span class="keyword">var</span> n = series.length, m = series[<span class="number">0</span>].length, i, j, o;
      <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; m; ++j) {
        out.call(stack, series[<span class="number">0</span>][j], o = offsets[j], points[<span class="number">0</span>][j][<span class="number">1</span>]);
        <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; n; ++i) {
          out.call(stack, series[i][j], o += points[i - <span class="number">1</span>][j][<span class="number">1</span>], points[i][j][<span class="number">1</span>]);
        }
      }
      <span class="keyword">return</span> data;
    }
    <span class="keyword">var</span> values = d3_identity, order = d3_layout_stackOrderDefault, offset = d3_layout_stackOffsetZero, out = d3_layout_stackOut, x = d3_layout_stackX, y = d3_layout_stackY;
    stack.values = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> values;
      values = x;
      <span class="keyword">return</span> stack;
    };
    stack.order = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> order;
      order = <span class="keyword">typeof</span> x === <span class="string">"function"</span> ? x : d3_layout_stackOrders.get(x) || d3_layout_stackOrderDefault;
      <span class="keyword">return</span> stack;
    };
    stack.offset = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> offset;
      offset = <span class="keyword">typeof</span> x === <span class="string">"function"</span> ? x : d3_layout_stackOffsets.get(x) || d3_layout_stackOffsetZero;
      <span class="keyword">return</span> stack;
    };
    stack.x = <span class="keyword">function</span>(z) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> x;
      x = z;
      <span class="keyword">return</span> stack;
    };
    stack.y = <span class="keyword">function</span>(z) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> y;
      y = z;
      <span class="keyword">return</span> stack;
    };
    stack.out = <span class="keyword">function</span>(z) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> out;
      out = z;
      <span class="keyword">return</span> stack;
    };
    <span class="keyword">return</span> stack;
  };
  <span class="keyword">var</span> d3_layout_stackOrders = d3.map({
    <span class="string">"inside-out"</span>: <span class="keyword">function</span>(data) {
      <span class="keyword">var</span> n = data.length, i, j, max = data.map(d3_layout_stackMaxIndex), sums = data.map(d3_layout_stackReduceSum), index = d3.range(n).sort(<span class="keyword">function</span>(a, b) {
        <span class="keyword">return</span> max[a] - max[b];
      }), top = <span class="number">0</span>, bottom = <span class="number">0</span>, tops = [], bottoms = [];
      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; ++i) {
        j = index[i];
        <span class="keyword">if</span> (top &lt; bottom) {
          top += sums[j];
          tops.push(j);
        } <span class="keyword">else</span> {
          bottom += sums[j];
          bottoms.push(j);
        }
      }
      <span class="keyword">return</span> bottoms.reverse().concat(tops);
    },
    reverse: <span class="keyword">function</span>(data) {
      <span class="keyword">return</span> d3.range(data.length).reverse();
    },
    <span class="string">"default"</span>: d3_layout_stackOrderDefault
  });
  <span class="keyword">var</span> d3_layout_stackOffsets = d3.map({
    silhouette: <span class="keyword">function</span>(data) {
      <span class="keyword">var</span> n = data.length, m = data[<span class="number">0</span>].length, sums = [], max = <span class="number">0</span>, i, j, o, y0 = [];
      <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; m; ++j) {
        <span class="keyword">for</span> (i = <span class="number">0</span>, o = <span class="number">0</span>; i &lt; n; i++) o += data[i][j][<span class="number">1</span>];
        <span class="keyword">if</span> (o > max) max = o;
        sums.push(o);
      }
      <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; m; ++j) {
        y0[j] = (max - sums[j]) / <span class="number">2</span>;
      }
      <span class="keyword">return</span> y0;
    },
    wiggle: <span class="keyword">function</span>(data) {
      <span class="keyword">var</span> n = data.length, x = data[<span class="number">0</span>], m = x.length, max = <span class="number">0</span>, i, j, k, s1, s2, s3, dx, o, o0, y0 = [];
      y0[<span class="number">0</span>] = o = o0 = <span class="number">0</span>;
      <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt; m; ++j) {
        <span class="keyword">for</span> (i = <span class="number">0</span>, s1 = <span class="number">0</span>; i &lt; n; ++i) s1 += data[i][j][<span class="number">1</span>];
        <span class="keyword">for</span> (i = <span class="number">0</span>, s2 = <span class="number">0</span>, dx = x[j][<span class="number">0</span>] - x[j - <span class="number">1</span>][<span class="number">0</span>]; i &lt; n; ++i) {
          <span class="keyword">for</span> (k = <span class="number">0</span>, s3 = (data[i][j][<span class="number">1</span>] - data[i][j - <span class="number">1</span>][<span class="number">1</span>]) / (<span class="number">2</span> * dx); k &lt; i; ++k) {
            s3 += (data[k][j][<span class="number">1</span>] - data[k][j - <span class="number">1</span>][<span class="number">1</span>]) / dx;
          }
          s2 += s3 * data[i][j][<span class="number">1</span>];
        }
        y0[j] = o -= s1 ? s2 / s1 * dx : <span class="number">0</span>;
        <span class="keyword">if</span> (o &lt; o0) o0 = o;
      }
      <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; m; ++j) y0[j] -= o0;
      <span class="keyword">return</span> y0;
    },
    expand: <span class="keyword">function</span>(data) {
      <span class="keyword">var</span> n = data.length, m = data[<span class="number">0</span>].length, k = <span class="number">1</span> / n, i, j, o, y0 = [];
      <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; m; ++j) {
        <span class="keyword">for</span> (i = <span class="number">0</span>, o = <span class="number">0</span>; i &lt; n; i++) o += data[i][j][<span class="number">1</span>];
        <span class="keyword">if</span> (o) <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++) data[i][j][<span class="number">1</span>] /= o; <span class="keyword">else</span> <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++) data[i][j][<span class="number">1</span>] = k;
      }
      <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; m; ++j) y0[j] = <span class="number">0</span>;
      <span class="keyword">return</span> y0;
    },
    zero: d3_layout_stackOffsetZero
  });
  d3.layout.histogram = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">histogram</span><span class="params">(data, i)</span> {</span>
      <span class="keyword">var</span> bins = [], values = data.map(valuer, <span class="keyword">this</span>), range = ranger.call(<span class="keyword">this</span>, values, i), thresholds = binner.call(<span class="keyword">this</span>, range, values, i), bin, i = -<span class="number">1</span>, n = values.length, m = thresholds.length - <span class="number">1</span>, k = frequency ? <span class="number">1</span> : <span class="number">1</span> / n, x;
      <span class="keyword">while</span> (++i &lt; m) {
        bin = bins[i] = [];
        bin.dx = thresholds[i + <span class="number">1</span>] - (bin.x = thresholds[i]);
        bin.y = <span class="number">0</span>;
      }
      <span class="keyword">if</span> (m > <span class="number">0</span>) {
        i = -<span class="number">1</span>;
        <span class="keyword">while</span> (++i &lt; n) {
          x = values[i];
          <span class="keyword">if</span> (x >= range[<span class="number">0</span>] &amp;&amp; x &lt;= range[<span class="number">1</span>]) {
            bin = bins[d3.bisect(thresholds, x, <span class="number">1</span>, m) - <span class="number">1</span>];
            bin.y += k;
            bin.push(data[i]);
          }
        }
      }
      <span class="keyword">return</span> bins;
    }
    <span class="keyword">var</span> frequency = <span class="literal">true</span>, valuer = Number, ranger = d3_layout_histogramRange, binner = d3_layout_histogramBinSturges;
    histogram.value = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> valuer;
      valuer = x;
      <span class="keyword">return</span> histogram;
    };
    histogram.range = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> ranger;
      ranger = d3_functor(x);
      <span class="keyword">return</span> histogram;
    };
    histogram.bins = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> binner;
      binner = <span class="keyword">typeof</span> x === <span class="string">"number"</span> ? <span class="keyword">function</span>(range) {
        <span class="keyword">return</span> d3_layout_histogramBinFixed(range, x);
      } : d3_functor(x);
      <span class="keyword">return</span> histogram;
    };
    histogram.frequency = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> frequency;
      frequency = !!x;
      <span class="keyword">return</span> histogram;
    };
    <span class="keyword">return</span> histogram;
  };
  d3.layout.hierarchy = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">recurse</span><span class="params">(data, depth, nodes)</span> {</span>
      <span class="keyword">var</span> childs = children.call(hierarchy, data, depth), node = d3_layout_hierarchyInline ? data : {
        data: data
      };
      node.depth = depth;
      nodes.push(node);
      <span class="keyword">if</span> (childs &amp;&amp; (n = childs.length)) {
        <span class="keyword">var</span> i = -<span class="number">1</span>, n, c = node.children = [], v = <span class="number">0</span>, j = depth + <span class="number">1</span>, d;
        <span class="keyword">while</span> (++i &lt; n) {
          d = recurse(childs[i], j, nodes);
          d.parent = node;
          c.push(d);
          v += d.value;
        }
        <span class="keyword">if</span> (sort) c.sort(sort);
        <span class="keyword">if</span> (value) node.value = v;
      } <span class="keyword">else</span> <span class="keyword">if</span> (value) {
        node.value = +value.call(hierarchy, data, depth) || <span class="number">0</span>;
      }
      <span class="keyword">return</span> node;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">revalue</span><span class="params">(node, depth)</span> {</span>
      <span class="keyword">var</span> children = node.children, v = <span class="number">0</span>;
      <span class="keyword">if</span> (children &amp;&amp; (n = children.length)) {
        <span class="keyword">var</span> i = -<span class="number">1</span>, n, j = depth + <span class="number">1</span>;
        <span class="keyword">while</span> (++i &lt; n) v += revalue(children[i], j);
      } <span class="keyword">else</span> <span class="keyword">if</span> (value) {
        v = +value.call(hierarchy, d3_layout_hierarchyInline ? node : node.data, depth) || <span class="number">0</span>;
      }
      <span class="keyword">if</span> (value) node.value = v;
      <span class="keyword">return</span> v;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">hierarchy</span><span class="params">(d)</span> {</span>
      <span class="keyword">var</span> nodes = [];
      recurse(d, <span class="number">0</span>, nodes);
      <span class="keyword">return</span> nodes;
    }
    <span class="keyword">var</span> sort = d3_layout_hierarchySort, children = d3_layout_hierarchyChildren, value = d3_layout_hierarchyValue;
    hierarchy.sort = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> sort;
      sort = x;
      <span class="keyword">return</span> hierarchy;
    };
    hierarchy.children = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> children;
      children = x;
      <span class="keyword">return</span> hierarchy;
    };
    hierarchy.value = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> value;
      value = x;
      <span class="keyword">return</span> hierarchy;
    };
    hierarchy.revalue = <span class="keyword">function</span>(root) {
      revalue(root, <span class="number">0</span>);
      <span class="keyword">return</span> root;
    };
    <span class="keyword">return</span> hierarchy;
  };
  <span class="keyword">var</span> d3_layout_hierarchyInline = <span class="literal">false</span>;
  d3.layout.pack = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">pack</span><span class="params">(d, i)</span> {</span>
      <span class="keyword">var</span> nodes = hierarchy.call(<span class="keyword">this</span>, d, i), root = nodes[<span class="number">0</span>];
      root.x = <span class="number">0</span>;
      root.y = <span class="number">0</span>;
      d3_layout_treeVisitAfter(root, <span class="keyword">function</span>(d) {
        d.r = Math.sqrt(d.value);
      });
      d3_layout_treeVisitAfter(root, d3_layout_packSiblings);
      <span class="keyword">var</span> w = size[<span class="number">0</span>], h = size[<span class="number">1</span>], k = Math.max(<span class="number">2</span> * root.r / w, <span class="number">2</span> * root.r / h);
      <span class="keyword">if</span> (padding > <span class="number">0</span>) {
        <span class="keyword">var</span> dr = padding * k / <span class="number">2</span>;
        d3_layout_treeVisitAfter(root, <span class="keyword">function</span>(d) {
          d.r += dr;
        });
        d3_layout_treeVisitAfter(root, d3_layout_packSiblings);
        d3_layout_treeVisitAfter(root, <span class="keyword">function</span>(d) {
          d.r -= dr;
        });
        k = Math.max(<span class="number">2</span> * root.r / w, <span class="number">2</span> * root.r / h);
      }
      d3_layout_packTransform(root, w / <span class="number">2</span>, h / <span class="number">2</span>, <span class="number">1</span> / k);
      <span class="keyword">return</span> nodes;
    }
    <span class="keyword">var</span> hierarchy = d3.layout.hierarchy().sort(d3_layout_packSort), padding = <span class="number">0</span>, size = [ <span class="number">1</span>, <span class="number">1</span> ];
    pack.size = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> size;
      size = x;
      <span class="keyword">return</span> pack;
    };
    pack.padding = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> padding;
      padding = +_;
      <span class="keyword">return</span> pack;
    };
    <span class="keyword">return</span> d3_layout_hierarchyRebind(pack, hierarchy);
  };
  d3.layout.cluster = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">cluster</span><span class="params">(d, i)</span> {</span>
      <span class="keyword">var</span> nodes = hierarchy.call(<span class="keyword">this</span>, d, i), root = nodes[<span class="number">0</span>], previousNode, x = <span class="number">0</span>, kx, ky;
      d3_layout_treeVisitAfter(root, <span class="keyword">function</span>(node) {
        <span class="keyword">var</span> children = node.children;
        <span class="keyword">if</span> (children &amp;&amp; children.length) {
          node.x = d3_layout_clusterX(children);
          node.y = d3_layout_clusterY(children);
        } <span class="keyword">else</span> {
          node.x = previousNode ? x += separation(node, previousNode) : <span class="number">0</span>;
          node.y = <span class="number">0</span>;
          previousNode = node;
        }
      });
      <span class="keyword">var</span> left = d3_layout_clusterLeft(root), right = d3_layout_clusterRight(root), x0 = left.x - separation(left, right) / <span class="number">2</span>, x1 = right.x + separation(right, left) / <span class="number">2</span>;
      d3_layout_treeVisitAfter(root, <span class="keyword">function</span>(node) {
        node.x = (node.x - x0) / (x1 - x0) * size[<span class="number">0</span>];
        node.y = (<span class="number">1</span> - (root.y ? node.y / root.y : <span class="number">1</span>)) * size[<span class="number">1</span>];
      });
      <span class="keyword">return</span> nodes;
    }
    <span class="keyword">var</span> hierarchy = d3.layout.hierarchy().sort(<span class="literal">null</span>).value(<span class="literal">null</span>), separation = d3_layout_treeSeparation, size = [ <span class="number">1</span>, <span class="number">1</span> ];
    cluster.separation = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> separation;
      separation = x;
      <span class="keyword">return</span> cluster;
    };
    cluster.size = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> size;
      size = x;
      <span class="keyword">return</span> cluster;
    };
    <span class="keyword">return</span> d3_layout_hierarchyRebind(cluster, hierarchy);
  };
  d3.layout.tree = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">tree</span><span class="params">(d, i)</span> {</span>
      <span class="function"><span class="keyword">function</span> <span class="title">firstWalk</span><span class="params">(node, previousSibling)</span> {</span>
        <span class="keyword">var</span> children = node.children, layout = node._tree;
        <span class="keyword">if</span> (children &amp;&amp; (n = children.length)) {
          <span class="keyword">var</span> n, firstChild = children[<span class="number">0</span>], previousChild, ancestor = firstChild, child, i = -<span class="number">1</span>;
          <span class="keyword">while</span> (++i &lt; n) {
            child = children[i];
            firstWalk(child, previousChild);
            ancestor = apportion(child, previousChild, ancestor);
            previousChild = child;
          }
          d3_layout_treeShift(node);
          <span class="keyword">var</span> midpoint = <span class="number">.5</span> * (firstChild._tree.prelim + child._tree.prelim);
          <span class="keyword">if</span> (previousSibling) {
            layout.prelim = previousSibling._tree.prelim + separation(node, previousSibling);
            layout.mod = layout.prelim - midpoint;
          } <span class="keyword">else</span> {
            layout.prelim = midpoint;
          }
        } <span class="keyword">else</span> {
          <span class="keyword">if</span> (previousSibling) {
            layout.prelim = previousSibling._tree.prelim + separation(node, previousSibling);
          }
        }
      }
      <span class="function"><span class="keyword">function</span> <span class="title">secondWalk</span><span class="params">(node, x)</span> {</span>
        node.x = node._tree.prelim + x;
        <span class="keyword">var</span> children = node.children;
        <span class="keyword">if</span> (children &amp;&amp; (n = children.length)) {
          <span class="keyword">var</span> i = -<span class="number">1</span>, n;
          x += node._tree.mod;
          <span class="keyword">while</span> (++i &lt; n) {
            secondWalk(children[i], x);
          }
        }
      }
      <span class="function"><span class="keyword">function</span> <span class="title">apportion</span><span class="params">(node, previousSibling, ancestor)</span> {</span>
        <span class="keyword">if</span> (previousSibling) {
          <span class="keyword">var</span> vip = node, vop = node, vim = previousSibling, vom = node.parent.children[<span class="number">0</span>], sip = vip._tree.mod, sop = vop._tree.mod, sim = vim._tree.mod, som = vom._tree.mod, shift;
          <span class="keyword">while</span> (vim = d3_layout_treeRight(vim), vip = d3_layout_treeLeft(vip), vim &amp;&amp; vip) {
            vom = d3_layout_treeLeft(vom);
            vop = d3_layout_treeRight(vop);
            vop._tree.ancestor = node;
            shift = vim._tree.prelim + sim - vip._tree.prelim - sip + separation(vim, vip);
            <span class="keyword">if</span> (shift > <span class="number">0</span>) {
              d3_layout_treeMove(d3_layout_treeAncestor(vim, node, ancestor), node, shift);
              sip += shift;
              sop += shift;
            }
            sim += vim._tree.mod;
            sip += vip._tree.mod;
            som += vom._tree.mod;
            sop += vop._tree.mod;
          }
          <span class="keyword">if</span> (vim &amp;&amp; !d3_layout_treeRight(vop)) {
            vop._tree.thread = vim;
            vop._tree.mod += sim - sop;
          }
          <span class="keyword">if</span> (vip &amp;&amp; !d3_layout_treeLeft(vom)) {
            vom._tree.thread = vip;
            vom._tree.mod += sip - som;
            ancestor = node;
          }
        }
        <span class="keyword">return</span> ancestor;
      }
      <span class="keyword">var</span> nodes = hierarchy.call(<span class="keyword">this</span>, d, i), root = nodes[<span class="number">0</span>];
      d3_layout_treeVisitAfter(root, <span class="keyword">function</span>(node, previousSibling) {
        node._tree = {
          ancestor: node,
          prelim: <span class="number">0</span>,
          mod: <span class="number">0</span>,
          change: <span class="number">0</span>,
          shift: <span class="number">0</span>,
          number: previousSibling ? previousSibling._tree.number + <span class="number">1</span> : <span class="number">0</span>
        };
      });
      firstWalk(root);
      secondWalk(root, -root._tree.prelim);
      <span class="keyword">var</span> left = d3_layout_treeSearch(root, d3_layout_treeLeftmost), right = d3_layout_treeSearch(root, d3_layout_treeRightmost), deep = d3_layout_treeSearch(root, d3_layout_treeDeepest), x0 = left.x - separation(left, right) / <span class="number">2</span>, x1 = right.x + separation(right, left) / <span class="number">2</span>, y1 = deep.depth || <span class="number">1</span>;
      d3_layout_treeVisitAfter(root, <span class="keyword">function</span>(node) {
        node.x = (node.x - x0) / (x1 - x0) * size[<span class="number">0</span>];
        node.y = node.depth / y1 * size[<span class="number">1</span>];
        <span class="keyword">delete</span> node._tree;
      });
      <span class="keyword">return</span> nodes;
    }
    <span class="keyword">var</span> hierarchy = d3.layout.hierarchy().sort(<span class="literal">null</span>).value(<span class="literal">null</span>), separation = d3_layout_treeSeparation, size = [ <span class="number">1</span>, <span class="number">1</span> ];
    tree.separation = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> separation;
      separation = x;
      <span class="keyword">return</span> tree;
    };
    tree.size = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> size;
      size = x;
      <span class="keyword">return</span> tree;
    };
    <span class="keyword">return</span> d3_layout_hierarchyRebind(tree, hierarchy);
  };
  d3.layout.treemap = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">scale</span><span class="params">(children, k)</span> {</span>
      <span class="keyword">var</span> i = -<span class="number">1</span>, n = children.length, child, area;
      <span class="keyword">while</span> (++i &lt; n) {
        area = (child = children[i]).value * (k &lt; <span class="number">0</span> ? <span class="number">0</span> : k);
        child.area = isNaN(area) || area &lt;= <span class="number">0</span> ? <span class="number">0</span> : area;
      }
    }
    <span class="function"><span class="keyword">function</span> <span class="title">squarify</span><span class="params">(node)</span> {</span>
      <span class="keyword">var</span> children = node.children;
      <span class="keyword">if</span> (children &amp;&amp; children.length) {
        <span class="keyword">var</span> rect = pad(node), row = [], remaining = children.slice(), child, best = <span class="literal">Infinity</span>, score, u = Math.min(rect.dx, rect.dy), n;
        scale(remaining, rect.dx * rect.dy / node.value);
        row.area = <span class="number">0</span>;
        <span class="keyword">while</span> ((n = remaining.length) > <span class="number">0</span>) {
          row.push(child = remaining[n - <span class="number">1</span>]);
          row.area += child.area;
          <span class="keyword">if</span> ((score = worst(row, u)) &lt;= best) {
            remaining.pop();
            best = score;
          } <span class="keyword">else</span> {
            row.area -= row.pop().area;
            position(row, u, rect, <span class="literal">false</span>);
            u = Math.min(rect.dx, rect.dy);
            row.length = row.area = <span class="number">0</span>;
            best = <span class="literal">Infinity</span>;
          }
        }
        <span class="keyword">if</span> (row.length) {
          position(row, u, rect, <span class="literal">true</span>);
          row.length = row.area = <span class="number">0</span>;
        }
        children.forEach(squarify);
      }
    }
    <span class="function"><span class="keyword">function</span> <span class="title">stickify</span><span class="params">(node)</span> {</span>
      <span class="keyword">var</span> children = node.children;
      <span class="keyword">if</span> (children &amp;&amp; children.length) {
        <span class="keyword">var</span> rect = pad(node), remaining = children.slice(), child, row = [];
        scale(remaining, rect.dx * rect.dy / node.value);
        row.area = <span class="number">0</span>;
        <span class="keyword">while</span> (child = remaining.pop()) {
          row.push(child);
          row.area += child.area;
          <span class="keyword">if</span> (child.z != <span class="literal">null</span>) {
            position(row, child.z ? rect.dx : rect.dy, rect, !remaining.length);
            row.length = row.area = <span class="number">0</span>;
          }
        }
        children.forEach(stickify);
      }
    }
    <span class="function"><span class="keyword">function</span> <span class="title">worst</span><span class="params">(row, u)</span> {</span>
      <span class="keyword">var</span> s = row.area, r, rmax = <span class="number">0</span>, rmin = <span class="literal">Infinity</span>, i = -<span class="number">1</span>, n = row.length;
      <span class="keyword">while</span> (++i &lt; n) {
        <span class="keyword">if</span> (!(r = row[i].area)) <span class="keyword">continue</span>;
        <span class="keyword">if</span> (r &lt; rmin) rmin = r;
        <span class="keyword">if</span> (r > rmax) rmax = r;
      }
      s *= s;
      u *= u;
      <span class="keyword">return</span> s ? Math.max(u * rmax * ratio / s, s / (u * rmin * ratio)) : <span class="literal">Infinity</span>;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">position</span><span class="params">(row, u, rect, flush)</span> {</span>
      <span class="keyword">var</span> i = -<span class="number">1</span>, n = row.length, x = rect.x, y = rect.y, v = u ? round(row.area / u) : <span class="number">0</span>, o;
      <span class="keyword">if</span> (u == rect.dx) {
        <span class="keyword">if</span> (flush || v > rect.dy) v = rect.dy;
        <span class="keyword">while</span> (++i &lt; n) {
          o = row[i];
          o.x = x;
          o.y = y;
          o.dy = v;
          x += o.dx = Math.min(rect.x + rect.dx - x, v ? round(o.area / v) : <span class="number">0</span>);
        }
        o.z = <span class="literal">true</span>;
        o.dx += rect.x + rect.dx - x;
        rect.y += v;
        rect.dy -= v;
      } <span class="keyword">else</span> {
        <span class="keyword">if</span> (flush || v > rect.dx) v = rect.dx;
        <span class="keyword">while</span> (++i &lt; n) {
          o = row[i];
          o.x = x;
          o.y = y;
          o.dx = v;
          y += o.dy = Math.min(rect.y + rect.dy - y, v ? round(o.area / v) : <span class="number">0</span>);
        }
        o.z = <span class="literal">false</span>;
        o.dy += rect.y + rect.dy - y;
        rect.x += v;
        rect.dx -= v;
      }
    }
    <span class="function"><span class="keyword">function</span> <span class="title">treemap</span><span class="params">(d)</span> {</span>
      <span class="keyword">var</span> nodes = stickies || hierarchy(d), root = nodes[<span class="number">0</span>];
      root.x = <span class="number">0</span>;
      root.y = <span class="number">0</span>;
      root.dx = size[<span class="number">0</span>];
      root.dy = size[<span class="number">1</span>];
      <span class="keyword">if</span> (stickies) hierarchy.revalue(root);
      scale([ root ], root.dx * root.dy / root.value);
      (stickies ? stickify : squarify)(root);
      <span class="keyword">if</span> (sticky) stickies = nodes;
      <span class="keyword">return</span> nodes;
    }
    <span class="keyword">var</span> hierarchy = d3.layout.hierarchy(), round = Math.round, size = [ <span class="number">1</span>, <span class="number">1</span> ], padding = <span class="literal">null</span>, pad = d3_layout_treemapPadNull, sticky = <span class="literal">false</span>, stickies, ratio = <span class="number">.5</span> * (<span class="number">1</span> + Math.sqrt(<span class="number">5</span>));
    treemap.size = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> size;
      size = x;
      <span class="keyword">return</span> treemap;
    };
    treemap.padding = <span class="keyword">function</span>(x) {
      <span class="function"><span class="keyword">function</span> <span class="title">padFunction</span><span class="params">(node)</span> {</span>
        <span class="keyword">var</span> p = x.call(treemap, node, node.depth);
        <span class="keyword">return</span> p == <span class="literal">null</span> ? d3_layout_treemapPadNull(node) : d3_layout_treemapPad(node, <span class="keyword">typeof</span> p === <span class="string">"number"</span> ? [ p, p, p, p ] : p);
      }
      <span class="function"><span class="keyword">function</span> <span class="title">padConstant</span><span class="params">(node)</span> {</span>
        <span class="keyword">return</span> d3_layout_treemapPad(node, x);
      }
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> padding;
      <span class="keyword">var</span> type;
      pad = (padding = x) == <span class="literal">null</span> ? d3_layout_treemapPadNull : (type = <span class="keyword">typeof</span> x) === <span class="string">"function"</span> ? padFunction : type === <span class="string">"number"</span> ? (x = [ x, x, x, x ], padConstant) : padConstant;
      <span class="keyword">return</span> treemap;
    };
    treemap.round = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> round != Number;
      round = x ? Math.round : Number;
      <span class="keyword">return</span> treemap;
    };
    treemap.sticky = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> sticky;
      sticky = x;
      stickies = <span class="literal">null</span>;
      <span class="keyword">return</span> treemap;
    };
    treemap.ratio = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> ratio;
      ratio = x;
      <span class="keyword">return</span> treemap;
    };
    <span class="keyword">return</span> d3_layout_hierarchyRebind(treemap, hierarchy);
  };
  d3.csv = d3_dsv(<span class="string">","</span>, <span class="string">"text/csv"</span>);
  d3.tsv = d3_dsv(<span class="string">"	"</span>, <span class="string">"text/tab-separated-values"</span>);
  d3.geo = {};
  <span class="keyword">var</span> d3_geo_radians = Math.PI / <span class="number">180</span>;
  d3.geo.azimuthal = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">azimuthal</span><span class="params">(coordinates)</span> {</span>
      <span class="keyword">var</span> x1 = coordinates[<span class="number">0</span>] * d3_geo_radians - x0, y1 = coordinates[<span class="number">1</span>] * d3_geo_radians, cx1 = Math.cos(x1), sx1 = Math.sin(x1), cy1 = Math.cos(y1), sy1 = Math.sin(y1), cc = mode !== <span class="string">"orthographic"</span> ? sy0 * sy1 + cy0 * cy1 * cx1 : <span class="literal">null</span>, c, k = mode === <span class="string">"stereographic"</span> ? <span class="number">1</span> / (<span class="number">1</span> + cc) : mode === <span class="string">"gnomonic"</span> ? <span class="number">1</span> / cc : mode === <span class="string">"equidistant"</span> ? (c = Math.acos(cc), c ? c / Math.sin(c) : <span class="number">0</span>) : mode === <span class="string">"equalarea"</span> ? Math.sqrt(<span class="number">2</span> / (<span class="number">1</span> + cc)) : <span class="number">1</span>, x = k * cy1 * sx1, y = k * (sy0 * cy1 * cx1 - cy0 * sy1);
      <span class="keyword">return</span> [ scale * x + translate[<span class="number">0</span>], scale * y + translate[<span class="number">1</span>] ];
    }
    <span class="keyword">var</span> mode = <span class="string">"orthographic"</span>, origin, scale = <span class="number">200</span>, translate = [ <span class="number">480</span>, <span class="number">250</span> ], x0, y0, cy0, sy0;
    azimuthal.invert = <span class="keyword">function</span>(coordinates) {
      <span class="keyword">var</span> x = (coordinates[<span class="number">0</span>] - translate[<span class="number">0</span>]) / scale, y = (coordinates[<span class="number">1</span>] - translate[<span class="number">1</span>]) / scale, p = Math.sqrt(x * x + y * y), c = mode === <span class="string">"stereographic"</span> ? <span class="number">2</span> * Math.atan(p) : mode === <span class="string">"gnomonic"</span> ? Math.atan(p) : mode === <span class="string">"equidistant"</span> ? p : mode === <span class="string">"equalarea"</span> ? <span class="number">2</span> * Math.asin(<span class="number">.5</span> * p) : Math.asin(p), sc = Math.sin(c), cc = Math.cos(c);
      <span class="keyword">return</span> [ (x0 + Math.atan2(x * sc, p * cy0 * cc + y * sy0 * sc)) / d3_geo_radians, Math.asin(cc * sy0 - (p ? y * sc * cy0 / p : <span class="number">0</span>)) / d3_geo_radians ];
    };
    azimuthal.mode = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> mode;
      mode = x + <span class="string">""</span>;
      <span class="keyword">return</span> azimuthal;
    };
    azimuthal.origin = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> origin;
      origin = x;
      x0 = origin[<span class="number">0</span>] * d3_geo_radians;
      y0 = origin[<span class="number">1</span>] * d3_geo_radians;
      cy0 = Math.cos(y0);
      sy0 = Math.sin(y0);
      <span class="keyword">return</span> azimuthal;
    };
    azimuthal.scale = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> scale;
      scale = +x;
      <span class="keyword">return</span> azimuthal;
    };
    azimuthal.translate = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> translate;
      translate = [ +x[<span class="number">0</span>], +x[<span class="number">1</span>] ];
      <span class="keyword">return</span> azimuthal;
    };
    <span class="keyword">return</span> azimuthal.origin([ <span class="number">0</span>, <span class="number">0</span> ]);
  };
  d3.geo.albers = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">albers</span><span class="params">(coordinates)</span> {</span>
      <span class="keyword">var</span> t = n * (d3_geo_radians * coordinates[<span class="number">0</span>] - lng0), p = Math.sqrt(C - <span class="number">2</span> * n * Math.sin(d3_geo_radians * coordinates[<span class="number">1</span>])) / n;
      <span class="keyword">return</span> [ scale * p * Math.sin(t) + translate[<span class="number">0</span>], scale * (p * Math.cos(t) - p0) + translate[<span class="number">1</span>] ];
    }
    <span class="function"><span class="keyword">function</span> <span class="title">reload</span><span class="params">()</span> {</span>
      <span class="keyword">var</span> phi1 = d3_geo_radians * parallels[<span class="number">0</span>], phi2 = d3_geo_radians * parallels[<span class="number">1</span>], lat0 = d3_geo_radians * origin[<span class="number">1</span>], s = Math.sin(phi1), c = Math.cos(phi1);
      lng0 = d3_geo_radians * origin[<span class="number">0</span>];
      n = <span class="number">.5</span> * (s + Math.sin(phi2));
      C = c * c + <span class="number">2</span> * n * s;
      p0 = Math.sqrt(C - <span class="number">2</span> * n * Math.sin(lat0)) / n;
      <span class="keyword">return</span> albers;
    }
    <span class="keyword">var</span> origin = [ -<span class="number">98</span>, <span class="number">38</span> ], parallels = [ <span class="number">29.5</span>, <span class="number">45.5</span> ], scale = <span class="number">1e3</span>, translate = [ <span class="number">480</span>, <span class="number">250</span> ], lng0, n, C, p0;
    albers.invert = <span class="keyword">function</span>(coordinates) {
      <span class="keyword">var</span> x = (coordinates[<span class="number">0</span>] - translate[<span class="number">0</span>]) / scale, y = (coordinates[<span class="number">1</span>] - translate[<span class="number">1</span>]) / scale, p0y = p0 + y, t = Math.atan2(x, p0y), p = Math.sqrt(x * x + p0y * p0y);
      <span class="keyword">return</span> [ (lng0 + t / n) / d3_geo_radians, Math.asin((C - p * p * n * n) / (<span class="number">2</span> * n)) / d3_geo_radians ];
    };
    albers.origin = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> origin;
      origin = [ +x[<span class="number">0</span>], +x[<span class="number">1</span>] ];
      <span class="keyword">return</span> reload();
    };
    albers.parallels = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> parallels;
      parallels = [ +x[<span class="number">0</span>], +x[<span class="number">1</span>] ];
      <span class="keyword">return</span> reload();
    };
    albers.scale = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> scale;
      scale = +x;
      <span class="keyword">return</span> albers;
    };
    albers.translate = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> translate;
      translate = [ +x[<span class="number">0</span>], +x[<span class="number">1</span>] ];
      <span class="keyword">return</span> albers;
    };
    <span class="keyword">return</span> reload();
  };
  d3.geo.albersUsa = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">albersUsa</span><span class="params">(coordinates)</span> {</span>
      <span class="keyword">var</span> lon = coordinates[<span class="number">0</span>], lat = coordinates[<span class="number">1</span>];
      <span class="keyword">return</span> (lat > <span class="number">50</span> ? alaska : lon &lt; -<span class="number">140</span> ? hawaii : lat &lt; <span class="number">21</span> ? puertoRico : lower48)(coordinates);
    }
    <span class="keyword">var</span> lower48 = d3.geo.albers();
    <span class="keyword">var</span> alaska = d3.geo.albers().origin([ -<span class="number">160</span>, <span class="number">60</span> ]).parallels([ <span class="number">55</span>, <span class="number">65</span> ]);
    <span class="keyword">var</span> hawaii = d3.geo.albers().origin([ -<span class="number">160</span>, <span class="number">20</span> ]).parallels([ <span class="number">8</span>, <span class="number">18</span> ]);
    <span class="keyword">var</span> puertoRico = d3.geo.albers().origin([ -<span class="number">60</span>, <span class="number">10</span> ]).parallels([ <span class="number">8</span>, <span class="number">18</span> ]);
    albersUsa.scale = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> lower48.scale();
      lower48.scale(x);
      alaska.scale(x * <span class="number">.6</span>);
      hawaii.scale(x);
      puertoRico.scale(x * <span class="number">1.5</span>);
      <span class="keyword">return</span> albersUsa.translate(lower48.translate());
    };
    albersUsa.translate = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> lower48.translate();
      <span class="keyword">var</span> dz = lower48.scale() / <span class="number">1e3</span>, dx = x[<span class="number">0</span>], dy = x[<span class="number">1</span>];
      lower48.translate(x);
      alaska.translate([ dx - <span class="number">400</span> * dz, dy + <span class="number">170</span> * dz ]);
      hawaii.translate([ dx - <span class="number">190</span> * dz, dy + <span class="number">200</span> * dz ]);
      puertoRico.translate([ dx + <span class="number">580</span> * dz, dy + <span class="number">430</span> * dz ]);
      <span class="keyword">return</span> albersUsa;
    };
    <span class="keyword">return</span> albersUsa.scale(lower48.scale());
  };
  d3.geo.bonne = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">bonne</span><span class="params">(coordinates)</span> {</span>
      <span class="keyword">var</span> x = coordinates[<span class="number">0</span>] * d3_geo_radians - x0, y = coordinates[<span class="number">1</span>] * d3_geo_radians - y0;
      <span class="keyword">if</span> (y1) {
        <span class="keyword">var</span> p = c1 + y1 - y, E = x * Math.cos(y) / p;
        x = p * Math.sin(E);
        y = p * Math.cos(E) - c1;
      } <span class="keyword">else</span> {
        x *= Math.cos(y);
        y *= -<span class="number">1</span>;
      }
      <span class="keyword">return</span> [ scale * x + translate[<span class="number">0</span>], scale * y + translate[<span class="number">1</span>] ];
    }
    <span class="keyword">var</span> scale = <span class="number">200</span>, translate = [ <span class="number">480</span>, <span class="number">250</span> ], x0, y0, y1, c1;
    bonne.invert = <span class="keyword">function</span>(coordinates) {
      <span class="keyword">var</span> x = (coordinates[<span class="number">0</span>] - translate[<span class="number">0</span>]) / scale, y = (coordinates[<span class="number">1</span>] - translate[<span class="number">1</span>]) / scale;
      <span class="keyword">if</span> (y1) {
        <span class="keyword">var</span> c = c1 + y, p = Math.sqrt(x * x + c * c);
        y = c1 + y1 - p;
        x = x0 + p * Math.atan2(x, c) / Math.cos(y);
      } <span class="keyword">else</span> {
        y *= -<span class="number">1</span>;
        x /= Math.cos(y);
      }
      <span class="keyword">return</span> [ x / d3_geo_radians, y / d3_geo_radians ];
    };
    bonne.parallel = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> y1 / d3_geo_radians;
      c1 = <span class="number">1</span> / Math.tan(y1 = x * d3_geo_radians);
      <span class="keyword">return</span> bonne;
    };
    bonne.origin = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> [ x0 / d3_geo_radians, y0 / d3_geo_radians ];
      x0 = x[<span class="number">0</span>] * d3_geo_radians;
      y0 = x[<span class="number">1</span>] * d3_geo_radians;
      <span class="keyword">return</span> bonne;
    };
    bonne.scale = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> scale;
      scale = +x;
      <span class="keyword">return</span> bonne;
    };
    bonne.translate = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> translate;
      translate = [ +x[<span class="number">0</span>], +x[<span class="number">1</span>] ];
      <span class="keyword">return</span> bonne;
    };
    <span class="keyword">return</span> bonne.origin([ <span class="number">0</span>, <span class="number">0</span> ]).parallel(<span class="number">45</span>);
  };
  d3.geo.equirectangular = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">equirectangular</span><span class="params">(coordinates)</span> {</span>
      <span class="keyword">var</span> x = coordinates[<span class="number">0</span>] / <span class="number">360</span>, y = -coordinates[<span class="number">1</span>] / <span class="number">360</span>;
      <span class="keyword">return</span> [ scale * x + translate[<span class="number">0</span>], scale * y + translate[<span class="number">1</span>] ];
    }
    <span class="keyword">var</span> scale = <span class="number">500</span>, translate = [ <span class="number">480</span>, <span class="number">250</span> ];
    equirectangular.invert = <span class="keyword">function</span>(coordinates) {
      <span class="keyword">var</span> x = (coordinates[<span class="number">0</span>] - translate[<span class="number">0</span>]) / scale, y = (coordinates[<span class="number">1</span>] - translate[<span class="number">1</span>]) / scale;
      <span class="keyword">return</span> [ <span class="number">360</span> * x, -<span class="number">360</span> * y ];
    };
    equirectangular.scale = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> scale;
      scale = +x;
      <span class="keyword">return</span> equirectangular;
    };
    equirectangular.translate = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> translate;
      translate = [ +x[<span class="number">0</span>], +x[<span class="number">1</span>] ];
      <span class="keyword">return</span> equirectangular;
    };
    <span class="keyword">return</span> equirectangular;
  };
  d3.geo.mercator = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">mercator</span><span class="params">(coordinates)</span> {</span>
      <span class="keyword">var</span> x = coordinates[<span class="number">0</span>] / <span class="number">360</span>, y = -(Math.log(Math.tan(Math.PI / <span class="number">4</span> + coordinates[<span class="number">1</span>] * d3_geo_radians / <span class="number">2</span>)) / d3_geo_radians) / <span class="number">360</span>;
      <span class="keyword">return</span> [ scale * x + translate[<span class="number">0</span>], scale * Math.max(-<span class="number">.5</span>, Math.min(<span class="number">.5</span>, y)) + translate[<span class="number">1</span>] ];
    }
    <span class="keyword">var</span> scale = <span class="number">500</span>, translate = [ <span class="number">480</span>, <span class="number">250</span> ];
    mercator.invert = <span class="keyword">function</span>(coordinates) {
      <span class="keyword">var</span> x = (coordinates[<span class="number">0</span>] - translate[<span class="number">0</span>]) / scale, y = (coordinates[<span class="number">1</span>] - translate[<span class="number">1</span>]) / scale;
      <span class="keyword">return</span> [ <span class="number">360</span> * x, <span class="number">2</span> * Math.atan(Math.exp(-<span class="number">360</span> * y * d3_geo_radians)) / d3_geo_radians - <span class="number">90</span> ];
    };
    mercator.scale = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> scale;
      scale = +x;
      <span class="keyword">return</span> mercator;
    };
    mercator.translate = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> translate;
      translate = [ +x[<span class="number">0</span>], +x[<span class="number">1</span>] ];
      <span class="keyword">return</span> mercator;
    };
    <span class="keyword">return</span> mercator;
  };
  d3.geo.path = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">path</span><span class="params">(d, i)</span> {</span>
      <span class="keyword">if</span> (<span class="keyword">typeof</span> pointRadius === <span class="string">"function"</span>) pointCircle = d3_path_circle(pointRadius.apply(<span class="keyword">this</span>, arguments));
      pathType(d);
      <span class="keyword">var</span> result = buffer.length ? buffer.join(<span class="string">""</span>) : <span class="literal">null</span>;
      buffer = [];
      <span class="keyword">return</span> result;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">project</span><span class="params">(coordinates)</span> {</span>
      <span class="keyword">return</span> projection(coordinates).join(<span class="string">","</span>);
    }
    <span class="function"><span class="keyword">function</span> <span class="title">polygonArea</span><span class="params">(coordinates)</span> {</span>
      <span class="keyword">var</span> sum = area(coordinates[<span class="number">0</span>]), i = <span class="number">0</span>, n = coordinates.length;
      <span class="keyword">while</span> (++i &lt; n) sum -= area(coordinates[i]);
      <span class="keyword">return</span> sum;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">polygonCentroid</span><span class="params">(coordinates)</span> {</span>
      <span class="keyword">var</span> polygon = d3.geom.polygon(coordinates[<span class="number">0</span>].map(projection)), area = polygon.area(), centroid = polygon.centroid(area &lt; <span class="number">0</span> ? (area *= -<span class="number">1</span>, <span class="number">1</span>) : -<span class="number">1</span>), x = centroid[<span class="number">0</span>], y = centroid[<span class="number">1</span>], z = area, i = <span class="number">0</span>, n = coordinates.length;
      <span class="keyword">while</span> (++i &lt; n) {
        polygon = d3.geom.polygon(coordinates[i].map(projection));
        area = polygon.area();
        centroid = polygon.centroid(area &lt; <span class="number">0</span> ? (area *= -<span class="number">1</span>, <span class="number">1</span>) : -<span class="number">1</span>);
        x -= centroid[<span class="number">0</span>];
        y -= centroid[<span class="number">1</span>];
        z -= area;
      }
      <span class="keyword">return</span> [ x, y, <span class="number">6</span> * z ];
    }
    <span class="function"><span class="keyword">function</span> <span class="title">area</span><span class="params">(coordinates)</span> {</span>
      <span class="keyword">return</span> Math.abs(d3.geom.polygon(coordinates.map(projection)).area());
    }
    <span class="keyword">var</span> pointRadius = <span class="number">4.5</span>, pointCircle = d3_path_circle(pointRadius), projection = d3.geo.albersUsa(), buffer = [];
    <span class="keyword">var</span> pathType = d3_geo_type({
      FeatureCollection: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> features = o.features, i = -<span class="number">1</span>, n = features.length;
        <span class="keyword">while</span> (++i &lt; n) buffer.push(pathType(features[i].geometry));
      },
      Feature: <span class="keyword">function</span>(o) {
        pathType(o.geometry);
      },
      Point: <span class="keyword">function</span>(o) {
        buffer.push(<span class="string">"M"</span>, project(o.coordinates), pointCircle);
      },
      MultiPoint: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> coordinates = o.coordinates, i = -<span class="number">1</span>, n = coordinates.length;
        <span class="keyword">while</span> (++i &lt; n) buffer.push(<span class="string">"M"</span>, project(coordinates[i]), pointCircle);
      },
      LineString: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> coordinates = o.coordinates, i = -<span class="number">1</span>, n = coordinates.length;
        buffer.push(<span class="string">"M"</span>);
        <span class="keyword">while</span> (++i &lt; n) buffer.push(project(coordinates[i]), <span class="string">"L"</span>);
        buffer.pop();
      },
      MultiLineString: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> coordinates = o.coordinates, i = -<span class="number">1</span>, n = coordinates.length, subcoordinates, j, m;
        <span class="keyword">while</span> (++i &lt; n) {
          subcoordinates = coordinates[i];
          j = -<span class="number">1</span>;
          m = subcoordinates.length;
          buffer.push(<span class="string">"M"</span>);
          <span class="keyword">while</span> (++j &lt; m) buffer.push(project(subcoordinates[j]), <span class="string">"L"</span>);
          buffer.pop();
        }
      },
      Polygon: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> coordinates = o.coordinates, i = -<span class="number">1</span>, n = coordinates.length, subcoordinates, j, m;
        <span class="keyword">while</span> (++i &lt; n) {
          subcoordinates = coordinates[i];
          j = -<span class="number">1</span>;
          <span class="keyword">if</span> ((m = subcoordinates.length - <span class="number">1</span>) > <span class="number">0</span>) {
            buffer.push(<span class="string">"M"</span>);
            <span class="keyword">while</span> (++j &lt; m) buffer.push(project(subcoordinates[j]), <span class="string">"L"</span>);
            buffer[buffer.length - <span class="number">1</span>] = <span class="string">"Z"</span>;
          }
        }
      },
      MultiPolygon: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> coordinates = o.coordinates, i = -<span class="number">1</span>, n = coordinates.length, subcoordinates, j, m, subsubcoordinates, k, p;
        <span class="keyword">while</span> (++i &lt; n) {
          subcoordinates = coordinates[i];
          j = -<span class="number">1</span>;
          m = subcoordinates.length;
          <span class="keyword">while</span> (++j &lt; m) {
            subsubcoordinates = subcoordinates[j];
            k = -<span class="number">1</span>;
            <span class="keyword">if</span> ((p = subsubcoordinates.length - <span class="number">1</span>) > <span class="number">0</span>) {
              buffer.push(<span class="string">"M"</span>);
              <span class="keyword">while</span> (++k &lt; p) buffer.push(project(subsubcoordinates[k]), <span class="string">"L"</span>);
              buffer[buffer.length - <span class="number">1</span>] = <span class="string">"Z"</span>;
            }
          }
        }
      },
      GeometryCollection: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> geometries = o.geometries, i = -<span class="number">1</span>, n = geometries.length;
        <span class="keyword">while</span> (++i &lt; n) buffer.push(pathType(geometries[i]));
      }
    });
    <span class="keyword">var</span> areaType = path.area = d3_geo_type({
      FeatureCollection: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> area = <span class="number">0</span>, features = o.features, i = -<span class="number">1</span>, n = features.length;
        <span class="keyword">while</span> (++i &lt; n) area += areaType(features[i]);
        <span class="keyword">return</span> area;
      },
      Feature: <span class="keyword">function</span>(o) {
        <span class="keyword">return</span> areaType(o.geometry);
      },
      Polygon: <span class="keyword">function</span>(o) {
        <span class="keyword">return</span> polygonArea(o.coordinates);
      },
      MultiPolygon: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> sum = <span class="number">0</span>, coordinates = o.coordinates, i = -<span class="number">1</span>, n = coordinates.length;
        <span class="keyword">while</span> (++i &lt; n) sum += polygonArea(coordinates[i]);
        <span class="keyword">return</span> sum;
      },
      GeometryCollection: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> sum = <span class="number">0</span>, geometries = o.geometries, i = -<span class="number">1</span>, n = geometries.length;
        <span class="keyword">while</span> (++i &lt; n) sum += areaType(geometries[i]);
        <span class="keyword">return</span> sum;
      }
    }, <span class="number">0</span>);
    <span class="keyword">var</span> centroidType = path.centroid = d3_geo_type({
      Feature: <span class="keyword">function</span>(o) {
        <span class="keyword">return</span> centroidType(o.geometry);
      },
      Polygon: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> centroid = polygonCentroid(o.coordinates);
        <span class="keyword">return</span> [ centroid[<span class="number">0</span>] / centroid[<span class="number">2</span>], centroid[<span class="number">1</span>] / centroid[<span class="number">2</span>] ];
      },
      MultiPolygon: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> area = <span class="number">0</span>, coordinates = o.coordinates, centroid, x = <span class="number">0</span>, y = <span class="number">0</span>, z = <span class="number">0</span>, i = -<span class="number">1</span>, n = coordinates.length;
        <span class="keyword">while</span> (++i &lt; n) {
          centroid = polygonCentroid(coordinates[i]);
          x += centroid[<span class="number">0</span>];
          y += centroid[<span class="number">1</span>];
          z += centroid[<span class="number">2</span>];
        }
        <span class="keyword">return</span> [ x / z, y / z ];
      }
    });
    path.projection = <span class="keyword">function</span>(x) {
      projection = x;
      <span class="keyword">return</span> path;
    };
    path.pointRadius = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (<span class="keyword">typeof</span> x === <span class="string">"function"</span>) pointRadius = x; <span class="keyword">else</span> {
        pointRadius = +x;
        pointCircle = d3_path_circle(pointRadius);
      }
      <span class="keyword">return</span> path;
    };
    <span class="keyword">return</span> path;
  };
  d3.geo.bounds = <span class="keyword">function</span>(feature) {
    <span class="keyword">var</span> left = <span class="literal">Infinity</span>, bottom = <span class="literal">Infinity</span>, right = -<span class="literal">Infinity</span>, top = -<span class="literal">Infinity</span>;
    d3_geo_bounds(feature, <span class="keyword">function</span>(x, y) {
      <span class="keyword">if</span> (x &lt; left) left = x;
      <span class="keyword">if</span> (x > right) right = x;
      <span class="keyword">if</span> (y &lt; bottom) bottom = y;
      <span class="keyword">if</span> (y > top) top = y;
    });
    <span class="keyword">return</span> [ [ left, bottom ], [ right, top ] ];
  };
  <span class="keyword">var</span> d3_geo_boundsTypes = {
    Feature: d3_geo_boundsFeature,
    FeatureCollection: d3_geo_boundsFeatureCollection,
    GeometryCollection: d3_geo_boundsGeometryCollection,
    LineString: d3_geo_boundsLineString,
    MultiLineString: d3_geo_boundsMultiLineString,
    MultiPoint: d3_geo_boundsLineString,
    MultiPolygon: d3_geo_boundsMultiPolygon,
    Point: d3_geo_boundsPoint,
    Polygon: d3_geo_boundsPolygon
  };
  d3.geo.circle = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">circle</span><span class="params">()</span> {</span>}
    <span class="function"><span class="keyword">function</span> <span class="title">visible</span><span class="params">(point)</span> {</span>
      <span class="keyword">return</span> arc.distance(point) &lt; radians;
    }
    <span class="function"><span class="keyword">function</span> <span class="title">clip</span><span class="params">(coordinates)</span> {</span>
      <span class="keyword">var</span> i = -<span class="number">1</span>, n = coordinates.length, clipped = [], p0, p1, p2, d0, d1;
      <span class="keyword">while</span> (++i &lt; n) {
        d1 = arc.distance(p2 = coordinates[i]);
        <span class="keyword">if</span> (d1 &lt; radians) {
          <span class="keyword">if</span> (p1) clipped.push(d3_geo_greatArcInterpolate(p1, p2)((d0 - radians) / (d0 - d1)));
          clipped.push(p2);
          p0 = p1 = <span class="literal">null</span>;
        } <span class="keyword">else</span> {
          p1 = p2;
          <span class="keyword">if</span> (!p0 &amp;&amp; clipped.length) {
            clipped.push(d3_geo_greatArcInterpolate(clipped[clipped.length - <span class="number">1</span>], p1)((radians - d0) / (d1 - d0)));
            p0 = p1;
          }
        }
        d0 = d1;
      }
      p0 = coordinates[<span class="number">0</span>];
      p1 = clipped[<span class="number">0</span>];
      <span class="keyword">if</span> (p1 &amp;&amp; p2[<span class="number">0</span>] === p0[<span class="number">0</span>] &amp;&amp; p2[<span class="number">1</span>] === p0[<span class="number">1</span>] &amp;&amp; !(p2[<span class="number">0</span>] === p1[<span class="number">0</span>] &amp;&amp; p2[<span class="number">1</span>] === p1[<span class="number">1</span>])) {
        clipped.push(p1);
      }
      <span class="keyword">return</span> resample(clipped);
    }
    <span class="function"><span class="keyword">function</span> <span class="title">resample</span><span class="params">(coordinates)</span> {</span>
      <span class="keyword">var</span> i = <span class="number">0</span>, n = coordinates.length, j, m, resampled = n ? [ coordinates[<span class="number">0</span>] ] : coordinates, resamples, origin = arc.source();
      <span class="keyword">while</span> (++i &lt; n) {
        resamples = arc.source(coordinates[i - <span class="number">1</span>])(coordinates[i]).coordinates;
        <span class="keyword">for</span> (j = <span class="number">0</span>, m = resamples.length; ++j &lt; m; ) resampled.push(resamples[j]);
      }
      arc.source(origin);
      <span class="keyword">return</span> resampled;
    }
    <span class="keyword">var</span> origin = [ <span class="number">0</span>, <span class="number">0</span> ], degrees = <span class="number">90</span> - <span class="number">.01</span>, radians = degrees * d3_geo_radians, arc = d3.geo.greatArc().source(origin).target(d3_identity);
    circle.clip = <span class="keyword">function</span>(d) {
      <span class="keyword">if</span> (<span class="keyword">typeof</span> origin === <span class="string">"function"</span>) arc.source(origin.apply(<span class="keyword">this</span>, arguments));
      <span class="keyword">return</span> clipType(d) || <span class="literal">null</span>;
    };
    <span class="keyword">var</span> clipType = d3_geo_type({
      FeatureCollection: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> features = o.features.map(clipType).filter(d3_identity);
        <span class="keyword">return</span> features &amp;&amp; (o = Object.create(o), o.features = features, o);
      },
      Feature: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> geometry = clipType(o.geometry);
        <span class="keyword">return</span> geometry &amp;&amp; (o = Object.create(o), o.geometry = geometry, o);
      },
      Point: <span class="keyword">function</span>(o) {
        <span class="keyword">return</span> visible(o.coordinates) &amp;&amp; o;
      },
      MultiPoint: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> coordinates = o.coordinates.filter(visible);
        <span class="keyword">return</span> coordinates.length &amp;&amp; {
          type: o.type,
          coordinates: coordinates
        };
      },
      LineString: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> coordinates = clip(o.coordinates);
        <span class="keyword">return</span> coordinates.length &amp;&amp; (o = Object.create(o), o.coordinates = coordinates, o);
      },
      MultiLineString: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> coordinates = o.coordinates.map(clip).filter(<span class="keyword">function</span>(d) {
          <span class="keyword">return</span> d.length;
        });
        <span class="keyword">return</span> coordinates.length &amp;&amp; (o = Object.create(o), o.coordinates = coordinates, o);
      },
      Polygon: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> coordinates = o.coordinates.map(clip);
        <span class="keyword">return</span> coordinates[<span class="number">0</span>].length &amp;&amp; (o = Object.create(o), o.coordinates = coordinates, o);
      },
      MultiPolygon: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> coordinates = o.coordinates.map(<span class="keyword">function</span>(d) {
          <span class="keyword">return</span> d.map(clip);
        }).filter(<span class="keyword">function</span>(d) {
          <span class="keyword">return</span> d[<span class="number">0</span>].length;
        });
        <span class="keyword">return</span> coordinates.length &amp;&amp; (o = Object.create(o), o.coordinates = coordinates, o);
      },
      GeometryCollection: <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> geometries = o.geometries.map(clipType).filter(d3_identity);
        <span class="keyword">return</span> geometries.length &amp;&amp; (o = Object.create(o), o.geometries = geometries, o);
      }
    });
    circle.origin = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> origin;
      origin = x;
      <span class="keyword">if</span> (<span class="keyword">typeof</span> origin !== <span class="string">"function"</span>) arc.source(origin);
      <span class="keyword">return</span> circle;
    };
    circle.angle = <span class="keyword">function</span>(x) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> degrees;
      radians = (degrees = +x) * d3_geo_radians;
      <span class="keyword">return</span> circle;
    };
    <span class="keyword">return</span> d3.rebind(circle, arc, <span class="string">"precision"</span>);
  };
  d3.geo.greatArc = <span class="keyword">function</span>() {
    <span class="function"><span class="keyword">function</span> <span class="title">greatArc</span><span class="params">()</span> {</span>
      <span class="keyword">var</span> d = greatArc.distance.apply(<span class="keyword">this</span>, arguments), t = <span class="number">0</span>, dt = precision / d, coordinates = [ p0 ];
      <span class="keyword">while</span> ((t += dt) &lt; <span class="number">1</span>) coordinates.push(interpolate(t));
      coordinates.push(p1);
      <span class="keyword">return</span> {
        type: <span class="string">"LineString"</span>,
        coordinates: coordinates
      };
    }
    <span class="keyword">var</span> source = d3_geo_greatArcSource, p0, target = d3_geo_greatArcTarget, p1, precision = <span class="number">6</span> * d3_geo_radians, interpolate = d3_geo_greatArcInterpolator();
    greatArc.distance = <span class="keyword">function</span>() {
      <span class="keyword">if</span> (<span class="keyword">typeof</span> source === <span class="string">"function"</span>) interpolate.source(p0 = source.apply(<span class="keyword">this</span>, arguments));
      <span class="keyword">if</span> (<span class="keyword">typeof</span> target === <span class="string">"function"</span>) interpolate.target(p1 = target.apply(<span class="keyword">this</span>, arguments));
      <span class="keyword">return</span> interpolate.distance();
    };
    greatArc.source = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> source;
      source = _;
      <span class="keyword">if</span> (<span class="keyword">typeof</span> source !== <span class="string">"function"</span>) interpolate.source(p0 = source);
      <span class="keyword">return</span> greatArc;
    };
    greatArc.target = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> target;
      target = _;
      <span class="keyword">if</span> (<span class="keyword">typeof</span> target !== <span class="string">"function"</span>) interpolate.target(p1 = target);
      <span class="keyword">return</span> greatArc;
    };
    greatArc.precision = <span class="keyword">function</span>(_) {
      <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> precision / d3_geo_radians;
      precision = _ * d3_geo_radians;
      <span class="keyword">return</span> greatArc;
    };
    <span class="keyword">return</span> greatArc;
  };
  d3.geo.greatCircle = d3.geo.circle;
  d3.geom = {};
  d3.geom.contour = <span class="keyword">function</span>(grid, start) {
    <span class="keyword">var</span> s = start || d3_geom_contourStart(grid), c = [], x = s[<span class="number">0</span>], y = s[<span class="number">1</span>], dx = <span class="number">0</span>, dy = <span class="number">0</span>, pdx = <span class="literal">NaN</span>, pdy = <span class="literal">NaN</span>, i = <span class="number">0</span>;
    <span class="keyword">do</span> {
      i = <span class="number">0</span>;
      <span class="keyword">if</span> (grid(x - <span class="number">1</span>, y - <span class="number">1</span>)) i += <span class="number">1</span>;
      <span class="keyword">if</span> (grid(x, y - <span class="number">1</span>)) i += <span class="number">2</span>;
      <span class="keyword">if</span> (grid(x - <span class="number">1</span>, y)) i += <span class="number">4</span>;
      <span class="keyword">if</span> (grid(x, y)) i += <span class="number">8</span>;
      <span class="keyword">if</span> (i === <span class="number">6</span>) {
        dx = pdy === -<span class="number">1</span> ? -<span class="number">1</span> : <span class="number">1</span>;
        dy = <span class="number">0</span>;
      } <span class="keyword">else</span> <span class="keyword">if</span> (i === <span class="number">9</span>) {
        dx = <span class="number">0</span>;
        dy = pdx === <span class="number">1</span> ? -<span class="number">1</span> : <span class="number">1</span>;
      } <span class="keyword">else</span> {
        dx = d3_geom_contourDx[i];
        dy = d3_geom_contourDy[i];
      }
      <span class="keyword">if</span> (dx != pdx &amp;&amp; dy != pdy) {
        c.push([ x, y ]);
        pdx = dx;
        pdy = dy;
      }
      x += dx;
      y += dy;
    } <span class="keyword">while</span> (s[<span class="number">0</span>] != x || s[<span class="number">1</span>] != y);
    <span class="keyword">return</span> c;
  };
  <span class="keyword">var</span> d3_geom_contourDx = [ <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, -<span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>, <span class="literal">NaN</span> ], d3_geom_contourDy = [ <span class="number">0</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, -<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="literal">NaN</span> ];
  d3.geom.hull = <span class="keyword">function</span>(vertices) {
    <span class="keyword">if</span> (vertices.length &lt; <span class="number">3</span>) <span class="keyword">return</span> [];
    <span class="keyword">var</span> len = vertices.length, plen = len - <span class="number">1</span>, points = [], stack = [], i, j, h = <span class="number">0</span>, x1, y1, x2, y2, u, v, a, sp;
    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; len; ++i) {
      <span class="keyword">if</span> (vertices[i][<span class="number">1</span>] &lt; vertices[h][<span class="number">1</span>]) {
        h = i;
      } <span class="keyword">else</span> <span class="keyword">if</span> (vertices[i][<span class="number">1</span>] == vertices[h][<span class="number">1</span>]) {
        h = vertices[i][<span class="number">0</span>] &lt; vertices[h][<span class="number">0</span>] ? i : h;
      }
    }
    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; ++i) {
      <span class="keyword">if</span> (i === h) <span class="keyword">continue</span>;
      y1 = vertices[i][<span class="number">1</span>] - vertices[h][<span class="number">1</span>];
      x1 = vertices[i][<span class="number">0</span>] - vertices[h][<span class="number">0</span>];
      points.push({
        angle: Math.atan2(y1, x1),
        index: i
      });
    }
    points.sort(<span class="keyword">function</span>(a, b) {
      <span class="keyword">return</span> a.angle - b.angle;
    });
    a = points[<span class="number">0</span>].angle;
    v = points[<span class="number">0</span>].index;
    u = <span class="number">0</span>;
    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; plen; ++i) {
      j = points[i].index;
      <span class="keyword">if</span> (a == points[i].angle) {
        x1 = vertices[v][<span class="number">0</span>] - vertices[h][<span class="number">0</span>];
        y1 = vertices[v][<span class="number">1</span>] - vertices[h][<span class="number">1</span>];
        x2 = vertices[j][<span class="number">0</span>] - vertices[h][<span class="number">0</span>];
        y2 = vertices[j][<span class="number">1</span>] - vertices[h][<span class="number">1</span>];
        <span class="keyword">if</span> (x1 * x1 + y1 * y1 >= x2 * x2 + y2 * y2) {
          points[i].index = -<span class="number">1</span>;
        } <span class="keyword">else</span> {
          points[u].index = -<span class="number">1</span>;
          a = points[i].angle;
          u = i;
          v = j;
        }
      } <span class="keyword">else</span> {
        a = points[i].angle;
        u = i;
        v = j;
      }
    }
    stack.push(h);
    <span class="keyword">for</span> (i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; <span class="number">2</span>; ++j) {
      <span class="keyword">if</span> (points[j].index !== -<span class="number">1</span>) {
        stack.push(points[j].index);
        i++;
      }
    }
    sp = stack.length;
    <span class="keyword">for</span> (; j &lt; plen; ++j) {
      <span class="keyword">if</span> (points[j].index === -<span class="number">1</span>) <span class="keyword">continue</span>;
      <span class="keyword">while</span> (!d3_geom_hullCCW(stack[sp - <span class="number">2</span>], stack[sp - <span class="number">1</span>], points[j].index, vertices)) {
        --sp;
      }
      stack[sp++] = points[j].index;
    }
    <span class="keyword">var</span> poly = [];
    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sp; ++i) {
      poly.push(vertices[stack[i]]);
    }
    <span class="keyword">return</span> poly;
  };
  d3.geom.polygon = <span class="keyword">function</span>(coordinates) {
    coordinates.area = <span class="keyword">function</span>() {
      <span class="keyword">var</span> i = <span class="number">0</span>, n = coordinates.length, a = coordinates[n - <span class="number">1</span>][<span class="number">0</span>] * coordinates[<span class="number">0</span>][<span class="number">1</span>], b = coordinates[n - <span class="number">1</span>][<span class="number">1</span>] * coordinates[<span class="number">0</span>][<span class="number">0</span>];
      <span class="keyword">while</span> (++i &lt; n) {
        a += coordinates[i - <span class="number">1</span>][<span class="number">0</span>] * coordinates[i][<span class="number">1</span>];
        b += coordinates[i - <span class="number">1</span>][<span class="number">1</span>] * coordinates[i][<span class="number">0</span>];
      }
      <span class="keyword">return</span> (b - a) * <span class="number">.5</span>;
    };
    coordinates.centroid = <span class="keyword">function</span>(k) {
      <span class="keyword">var</span> i = -<span class="number">1</span>, n = coordinates.length, x = <span class="number">0</span>, y = <span class="number">0</span>, a, b = coordinates[n - <span class="number">1</span>], c;
      <span class="keyword">if</span> (!arguments.length) k = -<span class="number">1</span> / (<span class="number">6</span> * coordinates.area());
      <span class="keyword">while</span> (++i &lt; n) {
        a = b;
        b = coordinates[i];
        c = a[<span class="number">0</span>] * b[<span class="number">1</span>] - b[<span class="number">0</span>] * a[<span class="number">1</span>];
        x += (a[<span class="number">0</span>] + b[<span class="number">0</span>]) * c;
        y += (a[<span class="number">1</span>] + b[<span class="number">1</span>]) * c;
      }
      <span class="keyword">return</span> [ x * k, y * k ];
    };
    coordinates.clip = <span class="keyword">function</span>(subject) {
      <span class="keyword">var</span> input, i = -<span class="number">1</span>, n = coordinates.length, j, m, a = coordinates[n - <span class="number">1</span>], b, c, d;
      <span class="keyword">while</span> (++i &lt; n) {
        input = subject.slice();
        subject.length = <span class="number">0</span>;
        b = coordinates[i];
        c = input[(m = input.length) - <span class="number">1</span>];
        j = -<span class="number">1</span>;
        <span class="keyword">while</span> (++j &lt; m) {
          d = input[j];
          <span class="keyword">if</span> (d3_geom_polygonInside(d, a, b)) {
            <span class="keyword">if</span> (!d3_geom_polygonInside(c, a, b)) {
              subject.push(d3_geom_polygonIntersect(c, d, a, b));
            }
            subject.push(d);
          } <span class="keyword">else</span> <span class="keyword">if</span> (d3_geom_polygonInside(c, a, b)) {
            subject.push(d3_geom_polygonIntersect(c, d, a, b));
          }
          c = d;
        }
        a = b;
      }
      <span class="keyword">return</span> subject;
    };
    <span class="keyword">return</span> coordinates;
  };
  d3.geom.voronoi = <span class="keyword">function</span>(vertices) {
    <span class="keyword">var</span> polygons = vertices.map(<span class="keyword">function</span>() {
      <span class="keyword">return</span> [];
    });
    d3_voronoi_tessellate(vertices, <span class="keyword">function</span>(e) {
      <span class="keyword">var</span> s1, s2, x1, x2, y1, y2;
      <span class="keyword">if</span> (e.a === <span class="number">1</span> &amp;&amp; e.b >= <span class="number">0</span>) {
        s1 = e.ep.r;
        s2 = e.ep.l;
      } <span class="keyword">else</span> {
        s1 = e.ep.l;
        s2 = e.ep.r;
      }
      <span class="keyword">if</span> (e.a === <span class="number">1</span>) {
        y1 = s1 ? s1.y : -<span class="number">1e6</span>;
        x1 = e.c - e.b * y1;
        y2 = s2 ? s2.y : <span class="number">1e6</span>;
        x2 = e.c - e.b * y2;
      } <span class="keyword">else</span> {
        x1 = s1 ? s1.x : -<span class="number">1e6</span>;
        y1 = e.c - e.a * x1;
        x2 = s2 ? s2.x : <span class="number">1e6</span>;
        y2 = e.c - e.a * x2;
      }
      <span class="keyword">var</span> v1 = [ x1, y1 ], v2 = [ x2, y2 ];
      polygons[e.region.l.index].push(v1, v2);
      polygons[e.region.r.index].push(v1, v2);
    });
    <span class="keyword">return</span> polygons.map(<span class="keyword">function</span>(polygon, i) {
      <span class="keyword">var</span> cx = vertices[i][<span class="number">0</span>], cy = vertices[i][<span class="number">1</span>];
      polygon.forEach(<span class="keyword">function</span>(v) {
        v.angle = Math.atan2(v[<span class="number">0</span>] - cx, v[<span class="number">1</span>] - cy);
      });
      <span class="keyword">return</span> polygon.sort(<span class="keyword">function</span>(a, b) {
        <span class="keyword">return</span> a.angle - b.angle;
      }).filter(<span class="keyword">function</span>(d, i) {
        <span class="keyword">return</span> !i || d.angle - polygon[i - <span class="number">1</span>].angle > <span class="number">1e-10</span>;
      });
    });
  };
  <span class="keyword">var</span> d3_voronoi_opposite = {
    l: <span class="string">"r"</span>,
    r: <span class="string">"l"</span>
  };
  d3.geom.delaunay = <span class="keyword">function</span>(vertices) {
    <span class="keyword">var</span> edges = vertices.map(<span class="keyword">function</span>() {
      <span class="keyword">return</span> [];
    }), triangles = [];
    d3_voronoi_tessellate(vertices, <span class="keyword">function</span>(e) {
      edges[e.region.l.index].push(vertices[e.region.r.index]);
    });
    edges.forEach(<span class="keyword">function</span>(edge, i) {
      <span class="keyword">var</span> v = vertices[i], cx = v[<span class="number">0</span>], cy = v[<span class="number">1</span>];
      edge.forEach(<span class="keyword">function</span>(v) {
        v.angle = Math.atan2(v[<span class="number">0</span>] - cx, v[<span class="number">1</span>] - cy);
      });
      edge.sort(<span class="keyword">function</span>(a, b) {
        <span class="keyword">return</span> a.angle - b.angle;
      });
      <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>, m = edge.length - <span class="number">1</span>; j &lt; m; j++) {
        triangles.push([ v, edge[j], edge[j + <span class="number">1</span>] ]);
      }
    });
    <span class="keyword">return</span> triangles;
  };
  d3.geom.quadtree = <span class="keyword">function</span>(points, x1, y1, x2, y2) {
    <span class="function"><span class="keyword">function</span> <span class="title">insert</span><span class="params">(n, p, x1, y1, x2, y2)</span> {</span>
      <span class="keyword">if</span> (isNaN(p.x) || isNaN(p.y)) <span class="keyword">return</span>;
      <span class="keyword">if</span> (n.leaf) {
        <span class="keyword">var</span> v = n.point;
        <span class="keyword">if</span> (v) {
          <span class="keyword">if</span> (Math.abs(v.x - p.x) + Math.abs(v.y - p.y) &lt; <span class="number">.01</span>) {
            insertChild(n, p, x1, y1, x2, y2);
          } <span class="keyword">else</span> {
            n.point = <span class="literal">null</span>;
            insertChild(n, v, x1, y1, x2, y2);
            insertChild(n, p, x1, y1, x2, y2);
          }
        } <span class="keyword">else</span> {
          n.point = p;
        }
      } <span class="keyword">else</span> {
        insertChild(n, p, x1, y1, x2, y2);
      }
    }
    <span class="function"><span class="keyword">function</span> <span class="title">insertChild</span><span class="params">(n, p, x1, y1, x2, y2)</span> {</span>
      <span class="keyword">var</span> sx = (x1 + x2) * <span class="number">.5</span>, sy = (y1 + y2) * <span class="number">.5</span>, right = p.x >= sx, bottom = p.y >= sy, i = (bottom &lt;&lt; <span class="number">1</span>) + right;
      n.leaf = <span class="literal">false</span>;
      n = n.nodes[i] || (n.nodes[i] = d3_geom_quadtreeNode());
      <span class="keyword">if</span> (right) x1 = sx; <span class="keyword">else</span> x2 = sx;
      <span class="keyword">if</span> (bottom) y1 = sy; <span class="keyword">else</span> y2 = sy;
      insert(n, p, x1, y1, x2, y2);
    }
    <span class="keyword">var</span> p, i = -<span class="number">1</span>, n = points.length;
    <span class="keyword">if</span> (n &amp;&amp; isNaN(points[<span class="number">0</span>].x)) points = points.map(d3_geom_quadtreePoint);
    <span class="keyword">if</span> (arguments.length &lt; <span class="number">5</span>) {
      <span class="keyword">if</span> (arguments.length === <span class="number">3</span>) {
        y2 = x2 = y1;
        y1 = x1;
      } <span class="keyword">else</span> {
        x1 = y1 = <span class="literal">Infinity</span>;
        x2 = y2 = -<span class="literal">Infinity</span>;
        <span class="keyword">while</span> (++i &lt; n) {
          p = points[i];
          <span class="keyword">if</span> (p.x &lt; x1) x1 = p.x;
          <span class="keyword">if</span> (p.y &lt; y1) y1 = p.y;
          <span class="keyword">if</span> (p.x > x2) x2 = p.x;
          <span class="keyword">if</span> (p.y > y2) y2 = p.y;
        }
        <span class="keyword">var</span> dx = x2 - x1, dy = y2 - y1;
        <span class="keyword">if</span> (dx > dy) y2 = y1 + dx; <span class="keyword">else</span> x2 = x1 + dy;
      }
    }
    <span class="keyword">var</span> root = d3_geom_quadtreeNode();
    root.add = <span class="keyword">function</span>(p) {
      insert(root, p, x1, y1, x2, y2);
    };
    root.visit = <span class="keyword">function</span>(f) {
      d3_geom_quadtreeVisit(f, root, x1, y1, x2, y2);
    };
    points.forEach(root.add);
    <span class="keyword">return</span> root;
  };
  d3.time = {};
  <span class="keyword">var</span> d3_time = Date, d3_time_daySymbols = [ <span class="string">"Sunday"</span>, <span class="string">"Monday"</span>, <span class="string">"Tuesday"</span>, <span class="string">"Wednesday"</span>, <span class="string">"Thursday"</span>, <span class="string">"Friday"</span>, <span class="string">"Saturday"</span> ];
  d3_time_utc.prototype = {
    getDate: <span class="keyword">function</span>() {
      <span class="keyword">return</span> <span class="keyword">this</span>._.getUTCDate();
    },
    getDay: <span class="keyword">function</span>() {
      <span class="keyword">return</span> <span class="keyword">this</span>._.getUTCDay();
    },
    getFullYear: <span class="keyword">function</span>() {
      <span class="keyword">return</span> <span class="keyword">this</span>._.getUTCFullYear();
    },
    getHours: <span class="keyword">function</span>() {
      <span class="keyword">return</span> <span class="keyword">this</span>._.getUTCHours();
    },
    getMilliseconds: <span class="keyword">function</span>() {
      <span class="keyword">return</span> <span class="keyword">this</span>._.getUTCMilliseconds();
    },
    getMinutes: <span class="keyword">function</span>() {
      <span class="keyword">return</span> <span class="keyword">this</span>._.getUTCMinutes();
    },
    getMonth: <span class="keyword">function</span>() {
      <span class="keyword">return</span> <span class="keyword">this</span>._.getUTCMonth();
    },
    getSeconds: <span class="keyword">function</span>() {
      <span class="keyword">return</span> <span class="keyword">this</span>._.getUTCSeconds();
    },
    getTime: <span class="keyword">function</span>() {
      <span class="keyword">return</span> <span class="keyword">this</span>._.getTime();
    },
    getTimezoneOffset: <span class="keyword">function</span>() {
      <span class="keyword">return</span> <span class="number">0</span>;
    },
    valueOf: <span class="keyword">function</span>() {
      <span class="keyword">return</span> <span class="keyword">this</span>._.valueOf();
    },
    setDate: <span class="keyword">function</span>() {
      d3_time_prototype.setUTCDate.apply(<span class="keyword">this</span>._, arguments);
    },
    setDay: <span class="keyword">function</span>() {
      d3_time_prototype.setUTCDay.apply(<span class="keyword">this</span>._, arguments);
    },
    setFullYear: <span class="keyword">function</span>() {
      d3_time_prototype.setUTCFullYear.apply(<span class="keyword">this</span>._, arguments);
    },
    setHours: <span class="keyword">function</span>() {
      d3_time_prototype.setUTCHours.apply(<span class="keyword">this</span>._, arguments);
    },
    setMilliseconds: <span class="keyword">function</span>() {
      d3_time_prototype.setUTCMilliseconds.apply(<span class="keyword">this</span>._, arguments);
    },
    setMinutes: <span class="keyword">function</span>() {
      d3_time_prototype.setUTCMinutes.apply(<span class="keyword">this</span>._, arguments);
    },
    setMonth: <span class="keyword">function</span>() {
      d3_time_prototype.setUTCMonth.apply(<span class="keyword">this</span>._, arguments);
    },
    setSeconds: <span class="keyword">function</span>() {
      d3_time_prototype.setUTCSeconds.apply(<span class="keyword">this</span>._, arguments);
    },
    setTime: <span class="keyword">function</span>() {
      d3_time_prototype.setTime.apply(<span class="keyword">this</span>._, arguments);
    }
  };
  <span class="keyword">var</span> d3_time_prototype = Date.prototype;
  <span class="keyword">var</span> d3_time_formatDateTime = <span class="string">"%a %b %e %H:%M:%S %Y"</span>, d3_time_formatDate = <span class="string">"%m/%d/%y"</span>, d3_time_formatTime = <span class="string">"%H:%M:%S"</span>;
  <span class="keyword">var</span> d3_time_days = d3_time_daySymbols, d3_time_dayAbbreviations = d3_time_days.map(d3_time_formatAbbreviate), d3_time_months = [ <span class="string">"January"</span>, <span class="string">"February"</span>, <span class="string">"March"</span>, <span class="string">"April"</span>, <span class="string">"May"</span>, <span class="string">"June"</span>, <span class="string">"July"</span>, <span class="string">"August"</span>, <span class="string">"September"</span>, <span class="string">"October"</span>, <span class="string">"November"</span>, <span class="string">"December"</span> ], d3_time_monthAbbreviations = d3_time_months.map(d3_time_formatAbbreviate);
  d3.time.format = <span class="keyword">function</span>(template) {
    <span class="function"><span class="keyword">function</span> <span class="title">format</span><span class="params">(date)</span> {</span>
      <span class="keyword">var</span> string = [], i = -<span class="number">1</span>, j = <span class="number">0</span>, c, f;
      <span class="keyword">while</span> (++i &lt; n) {
        <span class="keyword">if</span> (template.charCodeAt(i) == <span class="number">37</span>) {
          string.push(template.substring(j, i), (f = d3_time_formats[c = template.charAt(++i)]) ? f(date) : c);
          j = i + <span class="number">1</span>;
        }
      }
      string.push(template.substring(j, i));
      <span class="keyword">return</span> string.join(<span class="string">""</span>);
    }
    <span class="keyword">var</span> n = template.length;
    format.parse = <span class="keyword">function</span>(string) {
      <span class="keyword">var</span> d = {
        y: <span class="number">1900</span>,
        m: <span class="number">0</span>,
        d: <span class="number">1</span>,
        H: <span class="number">0</span>,
        M: <span class="number">0</span>,
        S: <span class="number">0</span>,
        L: <span class="number">0</span>
      }, i = d3_time_parse(d, template, string, <span class="number">0</span>);
      <span class="keyword">if</span> (i != string.length) <span class="keyword">return</span> <span class="literal">null</span>;
      <span class="keyword">if</span> (<span class="string">"p"</span> <span class="keyword">in</span> d) d.H = d.H % <span class="number">12</span> + d.p * <span class="number">12</span>;
      <span class="keyword">var</span> date = <span class="keyword">new</span> d3_time;
      date.setFullYear(d.y, d.m, d.d);
      date.setHours(d.H, d.M, d.S, d.L);
      <span class="keyword">return</span> date;
    };
    format.toString = <span class="keyword">function</span>() {
      <span class="keyword">return</span> template;
    };
    <span class="keyword">return</span> format;
  };
  <span class="keyword">var</span> d3_time_zfill2 = d3.format(<span class="string">"02d"</span>), d3_time_zfill3 = d3.format(<span class="string">"03d"</span>), d3_time_zfill4 = d3.format(<span class="string">"04d"</span>), d3_time_sfill2 = d3.format(<span class="string">"2d"</span>);
  <span class="keyword">var</span> d3_time_dayRe = d3_time_formatRe(d3_time_days), d3_time_dayAbbrevRe = d3_time_formatRe(d3_time_dayAbbreviations), d3_time_monthRe = d3_time_formatRe(d3_time_months), d3_time_monthLookup = d3_time_formatLookup(d3_time_months), d3_time_monthAbbrevRe = d3_time_formatRe(d3_time_monthAbbreviations), d3_time_monthAbbrevLookup = d3_time_formatLookup(d3_time_monthAbbreviations);
  <span class="keyword">var</span> d3_time_formats = {
    a: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> d3_time_dayAbbreviations[d.getDay()];
    },
    A: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> d3_time_days[d.getDay()];
    },
    b: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> d3_time_monthAbbreviations[d.getMonth()];
    },
    B: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> d3_time_months[d.getMonth()];
    },
    c: d3.time.format(d3_time_formatDateTime),
    d: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> d3_time_zfill2(d.getDate());
    },
    e: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> d3_time_sfill2(d.getDate());
    },
    H: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> d3_time_zfill2(d.getHours());
    },
    I: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> d3_time_zfill2(d.getHours() % <span class="number">12</span> || <span class="number">12</span>);
    },
    j: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> d3_time_zfill3(<span class="number">1</span> + d3.time.dayOfYear(d));
    },
    L: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> d3_time_zfill3(d.getMilliseconds());
    },
    m: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> d3_time_zfill2(d.getMonth() + <span class="number">1</span>);
    },
    M: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> d3_time_zfill2(d.getMinutes());
    },
    p: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> d.getHours() >= <span class="number">12</span> ? <span class="string">"PM"</span> : <span class="string">"AM"</span>;
    },
    S: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> d3_time_zfill2(d.getSeconds());
    },
    U: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> d3_time_zfill2(d3.time.sundayOfYear(d));
    },
    w: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> d.getDay();
    },
    W: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> d3_time_zfill2(d3.time.mondayOfYear(d));
    },
    x: d3.time.format(d3_time_formatDate),
    X: d3.time.format(d3_time_formatTime),
    y: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> d3_time_zfill2(d.getFullYear() % <span class="number">100</span>);
    },
    Y: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> d3_time_zfill4(d.getFullYear() % <span class="number">1e4</span>);
    },
    Z: d3_time_zone,
    <span class="string">"%"</span>: <span class="keyword">function</span>(d) {
      <span class="keyword">return</span> <span class="string">"%"</span>;
    }
  };
  <span class="keyword">var</span> d3_time_parsers = {
    a: d3_time_parseWeekdayAbbrev,
    A: d3_time_parseWeekday,
    b: d3_time_parseMonthAbbrev,
    B: d3_time_parseMonth,
    c: d3_time_parseLocaleFull,
    d: d3_time_parseDay,
    e: d3_time_parseDay,
    H: d3_time_parseHour24,
    I: d3_time_parseHour24,
    L: d3_time_parseMilliseconds,
    m: d3_time_parseMonthNumber,
    M: d3_time_parseMinutes,
    p: d3_time_parseAmPm,
    S: d3_time_parseSeconds,
    x: d3_time_parseLocaleDate,
    X: d3_time_parseLocaleTime,
    y: d3_time_parseYear,
    Y: d3_time_parseFullYear
  };
  <span class="keyword">var</span> d3_time_numberRe = <span class="regexp">/^\s*\d+/</span>;
  <span class="keyword">var</span> d3_time_amPmLookup = d3.map({
    am: <span class="number">0</span>,
    pm: <span class="number">1</span>
  });
  d3.time.format.utc = <span class="keyword">function</span>(template) {
    <span class="function"><span class="keyword">function</span> <span class="title">format</span><span class="params">(date)</span> {</span>
      <span class="keyword">try</span> {
        d3_time = d3_time_utc;
        <span class="keyword">var</span> utc = <span class="keyword">new</span> d3_time;
        utc._ = date;
        <span class="keyword">return</span> local(utc);
      } <span class="keyword">finally</span> {
        d3_time = Date;
      }
    }
    <span class="keyword">var</span> local = d3.time.format(template);
    format.parse = <span class="keyword">function</span>(string) {
      <span class="keyword">try</span> {
        d3_time = d3_time_utc;
        <span class="keyword">var</span> date = local.parse(string);
        <span class="keyword">return</span> date &amp;&amp; date._;
      } <span class="keyword">finally</span> {
        d3_time = Date;
      }
    };
    format.toString = local.toString;
    <span class="keyword">return</span> format;
  };
  <span class="keyword">var</span> d3_time_formatIso = d3.time.format.utc(<span class="string">"%Y-%m-%dT%H:%M:%S.%LZ"</span>);
  d3.time.format.iso = Date.prototype.toISOString ? d3_time_formatIsoNative : d3_time_formatIso;
  d3_time_formatIsoNative.parse = <span class="keyword">function</span>(string) {
    <span class="keyword">var</span> date = <span class="keyword">new</span> Date(string);
    <span class="keyword">return</span> isNaN(date) ? <span class="literal">null</span> : date;
  };
  d3_time_formatIsoNative.toString = d3_time_formatIso.toString;
  d3.time.second = d3_time_interval(<span class="keyword">function</span>(date) {
    <span class="keyword">return</span> <span class="keyword">new</span> d3_time(Math.floor(date / <span class="number">1e3</span>) * <span class="number">1e3</span>);
  }, <span class="keyword">function</span>(date, offset) {
    date.setTime(date.getTime() + Math.floor(offset) * <span class="number">1e3</span>);
  }, <span class="keyword">function</span>(date) {
    <span class="keyword">return</span> date.getSeconds();
  });
  d3.time.seconds = d3.time.second.range;
  d3.time.seconds.utc = d3.time.second.utc.range;
  d3.time.minute = d3_time_interval(<span class="keyword">function</span>(date) {
    <span class="keyword">return</span> <span class="keyword">new</span> d3_time(Math.floor(date / <span class="number">6e4</span>) * <span class="number">6e4</span>);
  }, <span class="keyword">function</span>(date, offset) {
    date.setTime(date.getTime() + Math.floor(offset) * <span class="number">6e4</span>);
  }, <span class="keyword">function</span>(date) {
    <span class="keyword">return</span> date.getMinutes();
  });
  d3.time.minutes = d3.time.minute.range;
  d3.time.minutes.utc = d3.time.minute.utc.range;
  d3.time.hour = d3_time_interval(<span class="keyword">function</span>(date) {
    <span class="keyword">var</span> timezone = date.getTimezoneOffset() / <span class="number">60</span>;
    <span class="keyword">return</span> <span class="keyword">new</span> d3_time((Math.floor(date / <span class="number">36e5</span> - timezone) + timezone) * <span class="number">36e5</span>);
  }, <span class="keyword">function</span>(date, offset) {
    date.setTime(date.getTime() + Math.floor(offset) * <span class="number">36e5</span>);
  }, <span class="keyword">function</span>(date) {
    <span class="keyword">return</span> date.getHours();
  });
  d3.time.hours = d3.time.hour.range;
  d3.time.hours.utc = d3.time.hour.utc.range;
  d3.time.day = d3_time_interval(<span class="keyword">function</span>(date) {
    <span class="keyword">var</span> day = <span class="keyword">new</span> d3_time(<span class="number">1970</span>, <span class="number">0</span>);
    day.setFullYear(date.getFullYear(), date.getMonth(), date.getDate());
    <span class="keyword">return</span> day;
  }, <span class="keyword">function</span>(date, offset) {
    date.setDate(date.getDate() + offset);
  }, <span class="keyword">function</span>(date) {
    <span class="keyword">return</span> date.getDate() - <span class="number">1</span>;
  });
  d3.time.days = d3.time.day.range;
  d3.time.days.utc = d3.time.day.utc.range;
  d3.time.dayOfYear = <span class="keyword">function</span>(date) {
    <span class="keyword">var</span> year = d3.time.year(date);
    <span class="keyword">return</span> Math.floor((date - year - (date.getTimezoneOffset() - year.getTimezoneOffset()) * <span class="number">6e4</span>) / <span class="number">864e5</span>);
  };
  d3_time_daySymbols.forEach(<span class="keyword">function</span>(day, i) {
    day = day.toLowerCase();
    i = <span class="number">7</span> - i;
    <span class="keyword">var</span> interval = d3.time[day] = d3_time_interval(<span class="keyword">function</span>(date) {
      (date = d3.time.day(date)).setDate(date.getDate() - (date.getDay() + i) % <span class="number">7</span>);
      <span class="keyword">return</span> date;
    }, <span class="keyword">function</span>(date, offset) {
      date.setDate(date.getDate() + Math.floor(offset) * <span class="number">7</span>);
    }, <span class="keyword">function</span>(date) {
      <span class="keyword">var</span> day = d3.time.year(date).getDay();
      <span class="keyword">return</span> Math.floor((d3.time.dayOfYear(date) + (day + i) % <span class="number">7</span>) / <span class="number">7</span>) - (day !== i);
    });
    d3.time[day + <span class="string">"s"</span>] = interval.range;
    d3.time[day + <span class="string">"s"</span>].utc = interval.utc.range;
    d3.time[day + <span class="string">"OfYear"</span>] = <span class="keyword">function</span>(date) {
      <span class="keyword">var</span> day = d3.time.year(date).getDay();
      <span class="keyword">return</span> Math.floor((d3.time.dayOfYear(date) + (day + i) % <span class="number">7</span>) / <span class="number">7</span>);
    };
  });
  d3.time.week = d3.time.sunday;
  d3.time.weeks = d3.time.sunday.range;
  d3.time.weeks.utc = d3.time.sunday.utc.range;
  d3.time.weekOfYear = d3.time.sundayOfYear;
  d3.time.month = d3_time_interval(<span class="keyword">function</span>(date) {
    date = d3.time.day(date);
    date.setDate(<span class="number">1</span>);
    <span class="keyword">return</span> date;
  }, <span class="keyword">function</span>(date, offset) {
    date.setMonth(date.getMonth() + offset);
  }, <span class="keyword">function</span>(date) {
    <span class="keyword">return</span> date.getMonth();
  });
  d3.time.months = d3.time.month.range;
  d3.time.months.utc = d3.time.month.utc.range;
  d3.time.year = d3_time_interval(<span class="keyword">function</span>(date) {
    date = d3.time.day(date);
    date.setMonth(<span class="number">0</span>, <span class="number">1</span>);
    <span class="keyword">return</span> date;
  }, <span class="keyword">function</span>(date, offset) {
    date.setFullYear(date.getFullYear() + offset);
  }, <span class="keyword">function</span>(date) {
    <span class="keyword">return</span> date.getFullYear();
  });
  d3.time.years = d3.time.year.range;
  d3.time.years.utc = d3.time.year.utc.range;
  <span class="keyword">var</span> d3_time_scaleSteps = [ <span class="number">1e3</span>, <span class="number">5e3</span>, <span class="number">15e3</span>, <span class="number">3e4</span>, <span class="number">6e4</span>, <span class="number">3e5</span>, <span class="number">9e5</span>, <span class="number">18e5</span>, <span class="number">36e5</span>, <span class="number">108e5</span>, <span class="number">216e5</span>, <span class="number">432e5</span>, <span class="number">864e5</span>, <span class="number">1728e5</span>, <span class="number">6048e5</span>, <span class="number">2592e6</span>, <span class="number">7776e6</span>, <span class="number">31536e6</span> ];
  <span class="keyword">var</span> d3_time_scaleLocalMethods = [ [ d3.time.second, <span class="number">1</span> ], [ d3.time.second, <span class="number">5</span> ], [ d3.time.second, <span class="number">15</span> ], [ d3.time.second, <span class="number">30</span> ], [ d3.time.minute, <span class="number">1</span> ], [ d3.time.minute, <span class="number">5</span> ], [ d3.time.minute, <span class="number">15</span> ], [ d3.time.minute, <span class="number">30</span> ], [ d3.time.hour, <span class="number">1</span> ], [ d3.time.hour, <span class="number">3</span> ], [ d3.time.hour, <span class="number">6</span> ], [ d3.time.hour, <span class="number">12</span> ], [ d3.time.day, <span class="number">1</span> ], [ d3.time.day, <span class="number">2</span> ], [ d3.time.week, <span class="number">1</span> ], [ d3.time.month, <span class="number">1</span> ], [ d3.time.month, <span class="number">3</span> ], [ d3.time.year, <span class="number">1</span> ] ];
  <span class="keyword">var</span> d3_time_scaleLocalFormats = [ [ d3.time.format(<span class="string">"%Y"</span>), <span class="keyword">function</span>(d) {
    <span class="keyword">return</span> <span class="literal">true</span>;
  } ], [ d3.time.format(<span class="string">"%B"</span>), <span class="keyword">function</span>(d) {
    <span class="keyword">return</span> d.getMonth();
  } ], [ d3.time.format(<span class="string">"%b %d"</span>), <span class="keyword">function</span>(d) {
    <span class="keyword">return</span> d.getDate() != <span class="number">1</span>;
  } ], [ d3.time.format(<span class="string">"%a %d"</span>), <span class="keyword">function</span>(d) {
    <span class="keyword">return</span> d.getDay() &amp;&amp; d.getDate() != <span class="number">1</span>;
  } ], [ d3.time.format(<span class="string">"%I %p"</span>), <span class="keyword">function</span>(d) {
    <span class="keyword">return</span> d.getHours();
  } ], [ d3.time.format(<span class="string">"%I:%M"</span>), <span class="keyword">function</span>(d) {
    <span class="keyword">return</span> d.getMinutes();
  } ], [ d3.time.format(<span class="string">":%S"</span>), <span class="keyword">function</span>(d) {
    <span class="keyword">return</span> d.getSeconds();
  } ], [ d3.time.format(<span class="string">".%L"</span>), <span class="keyword">function</span>(d) {
    <span class="keyword">return</span> d.getMilliseconds();
  } ] ];
  <span class="keyword">var</span> d3_time_scaleLinear = d3.scale.linear(), d3_time_scaleLocalFormat = d3_time_scaleFormat(d3_time_scaleLocalFormats);
  d3_time_scaleLocalMethods.year = <span class="keyword">function</span>(extent, m) {
    <span class="keyword">return</span> d3_time_scaleLinear.domain(extent.map(d3_time_scaleGetYear)).ticks(m).map(d3_time_scaleSetYear);
  };
  d3.time.scale = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3_time_scale(d3.scale.linear(), d3_time_scaleLocalMethods, d3_time_scaleLocalFormat);
  };
  <span class="keyword">var</span> d3_time_scaleUTCMethods = d3_time_scaleLocalMethods.map(<span class="keyword">function</span>(m) {
    <span class="keyword">return</span> [ m[<span class="number">0</span>].utc, m[<span class="number">1</span>] ];
  });
  <span class="keyword">var</span> d3_time_scaleUTCFormats = [ [ d3.time.format.utc(<span class="string">"%Y"</span>), <span class="keyword">function</span>(d) {
    <span class="keyword">return</span> <span class="literal">true</span>;
  } ], [ d3.time.format.utc(<span class="string">"%B"</span>), <span class="keyword">function</span>(d) {
    <span class="keyword">return</span> d.getUTCMonth();
  } ], [ d3.time.format.utc(<span class="string">"%b %d"</span>), <span class="keyword">function</span>(d) {
    <span class="keyword">return</span> d.getUTCDate() != <span class="number">1</span>;
  } ], [ d3.time.format.utc(<span class="string">"%a %d"</span>), <span class="keyword">function</span>(d) {
    <span class="keyword">return</span> d.getUTCDay() &amp;&amp; d.getUTCDate() != <span class="number">1</span>;
  } ], [ d3.time.format.utc(<span class="string">"%I %p"</span>), <span class="keyword">function</span>(d) {
    <span class="keyword">return</span> d.getUTCHours();
  } ], [ d3.time.format.utc(<span class="string">"%I:%M"</span>), <span class="keyword">function</span>(d) {
    <span class="keyword">return</span> d.getUTCMinutes();
  } ], [ d3.time.format.utc(<span class="string">":%S"</span>), <span class="keyword">function</span>(d) {
    <span class="keyword">return</span> d.getUTCSeconds();
  } ], [ d3.time.format.utc(<span class="string">".%L"</span>), <span class="keyword">function</span>(d) {
    <span class="keyword">return</span> d.getUTCMilliseconds();
  } ] ];
  <span class="keyword">var</span> d3_time_scaleUTCFormat = d3_time_scaleFormat(d3_time_scaleUTCFormats);
  d3_time_scaleUTCMethods.year = <span class="keyword">function</span>(extent, m) {
    <span class="keyword">return</span> d3_time_scaleLinear.domain(extent.map(d3_time_scaleUTCGetYear)).ticks(m).map(d3_time_scaleUTCSetYear);
  };
  d3.time.scale.utc = <span class="keyword">function</span>() {
    <span class="keyword">return</span> d3_time_scale(d3.scale.linear(), d3_time_scaleUTCMethods, d3_time_scaleUTCFormat);
  };
})();</code></pre>